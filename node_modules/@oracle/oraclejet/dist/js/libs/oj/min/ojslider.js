/**
 * Copyright (c) 2014, 2017, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
/*
 Copyright 2013 jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
*/
define(["ojs/ojcore","jquery","ojs/ojeditablevalue","jqueryui-amd/widgets/draggable","ojs/ojtouchproxy"],function(a,g){(function(){a.ib("oj.ojSlider",g.oj.editableValue,{defaultElement:"\x3cinput\x3e",version:"1.0.1",widgetEventPrefix:"oj",options:{max:100,min:0,orientation:"horizontal",readOnly:!1,disabled:!1,step:1,type:"fromMin",value:0,rawValue:void 0},mma:5,x2a:null,wpa:null,Eh:function(){return"rtl"===a.T.Qk()},qc:function(){this._super();this.Fka=!1;this.element.is("INPUT")?(this.Fka=!0,this.element[0].style&&
(this.pUa=this.element[0].style.cssText),this.Dka=this.element.css("display"),this.element.css("display","none"),this.Yh=this.Fc?g(this.Fc):g(this.element).wrap("\x3cdiv\x3e \x3c/div\x3e").parent()):this.Yh=this.element;this.Zea()},Zea:function(){this.ema=[];this.Ik=null;var a="oj-slider ",a=this.Ve()?a+"oj-slider-vertical":a+"oj-slider-horizontal",a=a+" oj-component oj-form-control";this.options.nV&&(a+=" oj-read-only");this.options.disabled&&(a+=" oj-disabled");this.Yh.removeClass();this.Yh.addClass(a);
this.Fh="range"===this.options.type?!0:!1;this.pea();this.oGa();this.GFa();this.lEa();this.jGa();this.sGa();this.pE();this.zp()},hfa:function(a){var b=this.Yh.find(".oj-slider-thumb");b.attr("aria-labelledby",a);1<b.length&&g(b[1]).attr("aria-labelledby",String(a))},Df:function(){this._super();this.xz();var c;this.Fc&&(c=this.uuid+"_Label",(c=a.ia.hL(this.widget(),c))&&this.element.attr("aria-labelledby",c));if(this.Fc&&(c=this.element.attr("aria-labelledby"),void 0!==c&&null!==c)){this.hfa(c);return}if(c=
this.Xza()){var b=c.attr("id");b||(b=c.attr("for"));0<b.length&&this.hfa(b)}else if(b=this.Fc?this.Yh.attr("aria-label"):this.element.attr("aria-label"))c=this.Yh.find(".oj-slider-thumb"),c.attr("aria-label",b)},Xza:function(){var a=this.xIa();if(null!==a&&0!==a.length)return a;a=this.wIa();return null!==a&&0!==a.length?a:null},wIa:function(){var a;a=this.element.prop("id");if(void 0!==a){var b=g("label[for\x3d'"+a+"']");if(0<b.length)return b;a="span[for\x3d'"+a+"']";if(0!==g(a).length)return g(a)}return null},
xIa:function(){var a=this.element.attr("aria-labelledby");if(void 0===a&&this.Fc){var b=this.Yh.attr("aria-labelledby");if(b&&null!==document.getElementById(b))return g(document.getElementById(b))}if(void 0!==a){b=g("label[id\x3d'"+a+"']");if(0<b.length)return b;a=g("span[id\x3d'"+a+"']");if(0<a.length)return a}return null},widget:function(){return this.Yh},xk:function(a){this.wpa=a},Ki:function(){return this.wpa},NP:function(){if(this.Fc)return this.Yh[0].id||this.Yh.uniqueId(),this.Yh[0].id;this.element[0].id||
this.element.uniqueId();return this.element[0].id},g1:function(a){return this.NP()+"-thumb"+a},gha:function(){return this.NP()+"-barValue"},zIa:function(){return this.NP()+"-barBack"},lKa:function(){return this.NP()+"-sliderWrapper"},sGa:function(){var a,b,d="",e="class\x3d'oj-slider-thumb ui-state-default' tabindex\x3d'0' role\x3d'slider'"+("aria-valuemin \x3d '"+this.Ce()+"' ")+("aria-valuemax \x3d '"+this.Gg()+"' ")+"\x3e\x3c/span\x3e",f=[];b=this.Fh?2:1;for(a=0;a<b;a++)d="\x3cspan "+("id\x3d'"+
this.g1(a)+"' ")+e,f.push(d);this.Lj=g(f.join("")).appendTo(this.zr);this.Wm=this.Lj.eq(0);this.gna()},gna:function(){var a=this;this.Lj.each(function(){g(this).data("oj-slider-thumb-index");a.Ve()&&g(this).attr("aria-orientation","vertical");a.options.disabled?(g(this).attr("aria-disabled","true"),g(this).removeAttr("tabindex")):g(this).removeAttr("aria-disabled");a.options.readOnly?g(this).attr("title","read only"):g(this).removeAttr("title")})},oGa:function(){var a=this.lKa(),b=this.Yh.find("#"+
a);b.length&&b.remove();this.zr=g("\x3cdiv\x3e\x3c/div\x3e");g(this.zr).attr("id",a);this.zr.addClass("oj-slider-container");this.element.after(this.zr);this.zr[0].style.cssText=this.pUa},GFa:function(){var a=this.zIa(),b=this.Yh.find("#"+a);b.length&&b.remove();this.Hf=g("\x3cdiv\x3e\x3c/div\x3e");g(this.Hf).attr("id",a);this.Hf.addClass("oj-slider-bar");this.zr.append(this.Hf);var d=this;this.Hf.on("mousedown"+d.eventNamespace,function(a){d.Lna(a);d.qJ(a);d.cI().focus()})},lEa:function(){this.options.type&&
(null==this.options.value?(this.options.value=this.Fh?[this.Ce(),this.Gg()]:this.Ce(),this.option("value",this.options.value,{_context:{gd:!0,ob:!0}})):this.Fh&&2!==this.options.value.length&&(this.options.value=[0<this.options.value.length?this.options.value[0]:this.Ce(),this.Gg()],this.option("value",this.options.value,{_context:{gd:!0,ob:!0}})))},jGa:function(){var a=this.options,b="";if(a.type){this.kd=g("\x3cdiv\x3e\x3c/div\x3e");g(this.kd).attr("id",this.gha());this.zr.append(this.kd);var b=
"oj-slider-range oj-slider-bar-value",d=this;this.kd.on("mousedown"+d.eventNamespace,function(a){d.Lna(a);d.qJ(a);d.cI().focus()});this.kd=this.zr.find("#"+this.gha());var e="";"fromMin"===a.type?e=" oj-slider-range-min":"fromMax"===a.type&&(e=" oj-slider-range-max");this.kd.addClass(b+e)}else this.kd&&this.kd.remove(),this.kd=null},N4:function(c){this.wK=a.Vg.Z5(c)},g5:function(c){a.Vg.T8(c)},zp:function(){this.uq()&&this.rg(this.Yh);this.Lj.toArray().forEach(function(a){a=g(a);this.Ay(a);this._on(a,
this.DUa);this.N4(a);this._focusable({element:a,applyHighlight:!0})},this)},_GetMessagingLauncherElement:function(){return this.Yh},ve:function(){return this.cI()},bga:function(){this.Lj.toArray().forEach(function(a){a=g(a);this.g5(a)},this);this.MGa();this.kd&&this.kd.remove();this.zr&&this.zr.remove();this.Fc?(this.Yh.removeUniqueId(),this.vy(this.Yh)):(this.element.removeUniqueId(),this.vy(this.element))},cVa:function(){a.T.unwrap(this.element,this.Yh);this.element.css("display",this.Dka);this.$B(this.element)},
_destroy:function(){this.bga();this.cVa();return this._super()},Lna:function(a){var b,d,e=this.options,f=0,h=this;this.Sea=this.Wm;if(e.disabled||e.readOnly)return!1;b=this.JJa({x:a.pageX,y:a.pageY});d=this.Gg()-this.Ce()+1;this.Fh&&this.Lj.each(function(a){var c=Math.abs(b-h.Ck(a));if(d>c||d===c&&(a===h.LOa||h.Ck(a)===e.min))d=c,this.Sea=g(this),f=a});this.Ik=f;if(!this.Sea)return!0;this.Lj.hasClass("ui-state-hover")||this.yr(a,f,b);this.cI().addClass("oj-active").focus();this.kd.addClass("oj-active");
return!0},oNa:function(a,b){var d=this.options;if(d.disabled||d.readOnly)return!1;b.removeClass("oj-focus-highlight");b.addClass("oj-active").focus();this.kd.addClass("oj-active");return!0},uPa:function(a,b){var d=this.xia(b);this.yr(a,this.Ik,d,!0);d=100*this.Mha(b);this.Fh?this.Xoa(d,this.Ik):this.Uoa(d);return!1},qJ:function(a,b){this.Lj.removeClass("oj-active");this.kd.removeClass("oj-active");var d=this.xia(b);this.yr(a,this.Ik,d);this.Jm(a,this.Ik,!1);this.Ik=null;return!1},Ve:function(){return"vertical"===
this.options.orientation},yia:function(a){1<a&&(a=1);0>a&&(a=0);this.Ve()&&(a=1-a);return a},JJa:function(a){var b=this.fJa(a);a=this.Gg()-this.Ce();this.Eh()&&!this.Ve()&&(b=1-b);return this.Xm(this.Ce()+b*a)},fJa:function(a){var b;this.Ve()?(b=this.Hf.height(),a=a.y-this.Hf.offset().top):(b=this.Hf.width(),a=a.x-this.Hf.offset().left);return 0===b?1:b=this.yia(a/b)},cI:function(){return this.Fh?g(this.Lj[this.Ik]):this.Wm},Mha:function(a){var b;(b=a)||(b=this.cI());this.Ve()?(a=b.outerHeight()/
2,a=b.offset().top+a,b=this.Hf.height(),a-=this.Hf.offset().top):(a=b.outerWidth()/2,a=b.offset().left+a,b=this.Hf.width(),a-=this.Hf.offset().left);return 0===b?1:b=this.yia(a/b)},xia:function(a){var b;a=this.Mha(a);b=this.Gg()-this.Ce();this.Eh()&&!this.Ve()&&(a=1-a);return this.Xm(this.Ce()+a*b)},MJa:function(a){return this.Ck(a?0:1)},EJa:function(a,b,d){return 2===this.options.value.length&&(0===a&&b>d||1===a&&b<d)?d:b},yr:function(a,b,d,e){var f;this.Fh?(f=this.MJa(b),d=this.EJa(b,d,f),d!==this.Ck(b)&&
this.uTa(a,b,d,e)):d!==this.mQ()&&(this.HTa(a,d,e),e||this.Fka&&this.element.val(d))},HTa:function(a,b,d){this.wJ=this.Xm(b);this.Y()||this.Gm(this.wJ,a);d||(this.Y()&&(this.options.rawValue=this.wJ),this.jc(this.wJ,a),this.pE())},Jm:function(a,b,d){this.Fh?(this.Fla=this.FJa(b,this.ema[b]),this.Y()||this.Gm(this.Fla,a),d||this.jc(this.Fla,a)):(this.Y()||this.Gm(this.wJ,a),d||this.jc(this.wJ,a));this.LOa=b},FJa:function(a,b){var d,e;d=this.options.value.slice();for(e=0;e<d.length;e+=1)d[e]=this.Xm(d[e]);
a===this.Ik&&(d[a]=b);return d},mQ:function(){return this.lja()},Ck:function(a){return this.zKa(a)},uTa:function(a,b,d,e){this.ema[b]=this.Xm(d);this.Jm(a,b,e);e||this.pE()},_setOption:function(a,b,d){var e;if("value"===a)if(Array.isArray(b))if(isNaN(b[0]))this.Fh=!1,e=this.or(a,b[0]),this.tH(e,this.Ce(),this.Gg());else{this.Fh=!0;e=b;for(var f=0;f<e.length;f+=1)this.tH(e[f],this.Ce(),this.Gg())}else this.Fh=!1,e=this.Y()?b:this.or(a,b),this.tH(e,this.Ce(),this.Gg());"max"===a||"min"===a?(e=this.Y()?
b:this.or(a,b),"min"===a?(this.DZ(e,this.Gg()),this.Fh?(this.Ck(0)<e&&this._super("value",[e,this.Ck(1)],d),this.Ck(1)<e&&this._super("value",[this.Ck(0),e],d)):this.mQ()<e&&this._super("value",e,d)):"max"===a&&(this.DZ(this.Ce(),e),this.Fh?(this.Ck(0)>e&&this._super("value",[e,this.Ck(1)],d),this.Ck(1)>e&&this._super("value",[this.Ck(0),e],d)):this.mQ()>e&&this._super("value",e,d))):e="step"===a?this.AD(b):b;this._super(a,e,d);"readOnly"===a&&(this.options.nV=e);"disabled"===a&&(this.options.disabled=
e);switch(a){case "disabled":this.gna();this.options.disabled?this.WGa():this.xz();break;case "value":this.pE();this.xz();break;case "min":case "max":this.pea();this.pE();this.xz();break;case "orientation":case "readonly":case "step":case "type":this.OQa()}},OQa:function(){this.bga();this.Zea();this.Df()},lja:function(){var a=this.options.value;return a=this.Xm(a)},zKa:function(a){return this.Xm(this.options.value[a])},Xm:function(a){if(a<=this.Ce())return this.Ce();if(a>=this.Gg())return this.Gg();
var b=0<this.options.step?this.options.step:1,d=(a-this.Ce())%b;a-=d;2*Math.abs(d)>=b&&(a+=0<d?b:-b);return parseFloat(a.toFixed(5))},pea:function(){var a=this.Ce();this.max=0!==(this.options.max-a)/this.options.step%1?this.options.max-(this.options.max-a)%this.options.step+this.options.step:this.options.max},Ce:function(){return this.options.min},Gg:function(){return this.max},Nha:function(){var a;a=0<this.options.step?(this.Gg()-this.Ce())/this.options.step:100;a=(this.Ve()?this.Hf.height():this.Hf.width())/
a;1>a&&(a=1);return this.Ve()?[1,a]:[a,1]},h1:function(a){return(this.Ck(a)-this.Ce())/(this.Gg()-this.Ce())},pE:function(){var a,b,d,e;this.Fh?this.Lj.toArray().forEach(function(b,h){var k=g(b);a=100*this.h1(h);this.Eh()&&!this.Ve()&&(a=100-a);this.Ve()?k.css({top:100-a+"%"}):k.css({left:a+"%"});k.hasClass("oj-active")||(k.attr("aria-valuenow",this.Ck(h)),k.attr("aria-valuemin",d),k.attr("aria-valuemax",e));this.Xoa(a,h)},this):(b=this.lja(),d=this.Ce(),e=this.Gg(),a=e!==d?(b-d)/(e-d)*100:0,this.Eh()&&
!this.Ve()&&(a=100-a),this.Ve()?this.Wm.css({top:100-a+"%"}):this.Wm.css({left:a+"%"}),g(this.Wm).hasClass("oj-active")||(g(this.Wm).attr("aria-valuenow",b),g(this.Wm).attr("aria-valuemin",d),g(this.Wm).attr("aria-valuemax",e)),this.Uoa(a))},Uoa:function(a){var b=this.options.type;this.Ve()?("fromMin"===b&&this.kd.css({height:a+"%"}),"fromMax"===b&&this.kd.css({height:100-a+"%"})):this.Eh()?("fromMin"===b&&this.kd.css({width:100-a+"%"}),"fromMax"===b&&this.kd.css({width:a+"%"})):("fromMin"===b&&this.kd.css({width:a+
"%"}),"fromMax"===b&&this.kd.css({width:100-a+"%"}))},Xoa:function(a,b){var d=this.kd.attr("id");if(0===b)switch(d=100*this.h1(1),this.options.type){case "fromMin":this.Ve()?this.kd.css({height:a+"%"}):this.kd.css({width:a+"%"});break;case "range":this.Ve()?(this.kd.css({top:100-d+"%"}),this.kd.css({height:d-a+"%"})):this.Eh()?(this.kd.css({left:100-d+"%"}),this.kd.css({width:d-(100-a)+"%"})):(this.kd.css({left:a+"%"}),this.kd.css({width:d-a+"%"}))}else{var e=100*this.h1(0);switch(this.options.type){case "fromMax":this.Ve()?
this.kd.css({height:100-a+"%"}):this.kd.css({width:100-a+"%"});break;case "range":this.Ve()?document.getElementById(d)&&(this.kd.css({top:100-a+"%"}),this.kd.css({height:a-e+"%"})):this.Eh()?document.getElementById(d)&&(this.kd.css({left:a+"%"}),this.kd.css({width:-a+100-e+"%"})):document.getElementById(d)&&this.kd.css({width:a-parseInt(document.getElementById(d).style.left,10)+"%"})}}},DUa:{keydown:function(a){var b,d,e,f=g(a.target).data("oj-slider-thumb-index");this.Ik=f;switch(a.keyCode){case g.ui.keyCode.HOME:case g.ui.keyCode.END:case g.ui.keyCode.PAGE_UP:case g.ui.keyCode.PAGE_DOWN:case g.ui.keyCode.UP:case g.ui.keyCode.RIGHT:case g.ui.keyCode.DOWN:case g.ui.keyCode.LEFT:a.preventDefault(),
g(a.target).addClass("oj-active")}e=this.options.step;b=this.Fh?d=this.Ck(f):d=this.mQ();switch(a.keyCode){case g.ui.keyCode.HOME:d=this.Ce();break;case g.ui.keyCode.END:d=this.Gg();break;case g.ui.keyCode.PAGE_UP:d=this.Xm(b+(this.Gg()-this.Ce())/this.mma);break;case g.ui.keyCode.PAGE_DOWN:d=this.Xm(b-(this.Gg()-this.Ce())/this.mma);break;case g.ui.keyCode.UP:if(b===this.Gg())return;d=this.Xm(b+e);break;case g.ui.keyCode.RIGHT:if(!this.Eh()||this.Ve()){if(b===this.Gg())return;b+=e}else{if(b===this.Ce())return;
b-=e}d=this.Xm(b);break;case g.ui.keyCode.DOWN:if(b===this.Ce())return;d=this.Xm(b-e);break;case g.ui.keyCode.LEFT:if(!this.Eh()||this.Ve()){if(b===this.Ce())return;b-=e}else{if(b===this.Gg())return;b+=e}d=this.Xm(b)}this.yr(a,f,d)},keyup:function(a){switch(a.keyCode){case g.ui.keyCode.HOME:case g.ui.keyCode.END:case g.ui.keyCode.PAGE_UP:case g.ui.keyCode.PAGE_DOWN:case g.ui.keyCode.UP:case g.ui.keyCode.RIGHT:case g.ui.keyCode.DOWN:case g.ui.keyCode.LEFT:var b=g(a.target).data("oj-slider-thumb-index");
this.Ik=b;this.Jm(a,b,!1);g(a.target).removeClass("oj-active");this.pE(!0);this.Ik=null}}},rh:function(c,b){var d=this.options,e=this;this._superApply(arguments);a.ia.Ur([{wa:"disabled",ef:!0},{wa:"value"},{wa:"title"},{wa:"min"},{wa:"max"},{wa:"step"}],b,this,function(a){for(var b=["value","step","min","max"],c=0;c<b.length;c++){var f=b[c],g=f in a?a[f]:d[f];null!=g&&("step"===f?a[f]=e.AD(g):"min"===f||"max"===f?a[f]=e.or(f,g):"value"===f&&(Array.isArray(g)?a[f]=g:a[f]=e.or(f,g)))}});if(!this.Y()&&
void 0===d.value)throw Error(this.R("noValue"));this.DZ(d.min,d.max);if(Array.isArray(d.value))for(var f=0;f<d.value.length;f+=1)this.tH(d.value[f],d.min,d.max);else this.tH(d.value,d.min,d.max)},tH:function(a,b,d){if(null!=b&&a<b)throw Error(this.R("valueRange"));if(null!=d&&a>d)throw Error(this.R("valueRange"));},DZ:function(a,b){if(null!=a&&null!=b&&a>b)throw Error(this.R("maxMin"));},getNodeBySubId:function(a){if(null==a)return this.element?this.element[0]:null;a=a.subId;return"oj-slider-thumb-0"===
a?this.widget().find(".oj-slider-thumb")[0]:"oj-slider-thumb-1"===a?this.widget().find(".oj-slider-thumb")[1]:"oj-slider-bar"===a||"oj-slider-bar-value"===a?this.widget().find("."+a)[0]:null},getSubIdByNode:function(a){if(null!=a){if(a.id===this.g1(0)&&g(a).hasClass("oj-slider-thumb"))return{subId:"oj-slider-thumb-0"};if(a.id===this.g1(1)&&g(a).hasClass("oj-slider-thumb"))return{subId:"oj-slider-thumb-1"};if(g(a).hasClass("oj-slider-bar"))return{subId:"oj-slider-bar"};if(g(a).hasClass("oj-slider-bar-value"))return{subId:"oj-slider-bar-value"}}return null},
_GetDefaultStyleClass:function(){return"oj-slider"},or:function(a,b){var d;d=null!==b?+b:b;if(isNaN(d))throw Error(this.R("optionNum",{option:a}));return d},AD:function(a){if(null===a)return 1;a=this.or("step",a);if(0>=a)throw Error(this.R("invalidStep"));if(null===a||0>=a)a=1;return a},E2a:function(){return this.Hf.offset().left+this.Hf.width()},O2a:function(){return this.Hf.offset().left},qea:function(a){var b=this.Nha(),d=a[0].style,e=this;a.draggable({axis:this.Ve()?"y":"x",grid:b,disabled:!1,
start:function(b){a[0]===g(e.Lj)[0]?e.Ik=0:a[0]===g(e.Lj)[1]&&(e.Ik=1);e.oNa(b,a)},drag:function(b,h){var k=h.position;e.Ve()?(d.left="",k.left=""):(d.top="",k.top="");e.uPa(b,a);e.Ve()?(0>k.top&&(k.top=0),k.top>e.Hf.height()&&(k.top=e.Hf.height())):(0>k.left&&(k.left=0),k.left>e.Hf.width()&&(k.left=e.Hf.width()));if(e.Fh){var l;l=0===e.Ik?g(e.Lj[1]):g(e.Lj[0]);if(e.Ve()){var m=a.outerHeight()/2,p=e.Hf.offsetParent().offset().top;l=l.offset().top+m-p}else m=a.outerWidth()/2,p=e.Hf.offsetParent().offset().left,
l=l.offset().left+m-p;0===e.Ik?e.Ve()?k.top<l&&(k.top=l):e.Eh()?k.left<l&&(k.left=l):k.left>l&&(k.left=l):e.Ve()?k.top>l&&(k.top=l):e.Eh()?k.left>l&&(k.left=l):k.left<l&&(k.left=l)}},stop:function(b){this.style.width="";this.style.height="";e.qJ(b,a)}})},xz:function(){this.options.disabled||(this.Fh?this.Lj.toArray().forEach(function(a){a=g(a);this.qea(a)},this):this.qea(this.Wm))},WGa:function(){this.Fh?this.Lj.toArray().forEach(function(a){a=g(a);a.is(".ui-draggable")&&a.draggable("disable")},this):
this.Wm.is(".ui-draggable")&&this.Wm.draggable("disable")},MGa:function(){this.Fh?this.Lj.toArray().forEach(function(a){a=g(a);a.is(".ui-draggable")&&a.draggable("destroy")},this):this.Wm.is(".ui-draggable")&&this.Wm.draggable("destroy")}})})();a.J.$a("oj-slider","editableValue",{properties:{max:{type:"number"},min:{type:"number"},orientation:{type:"string",enumValues:["horizontal","vertical"]},step:{type:"number"},type:{type:"string",enumValues:["single","fromMin","fromMax"]},value:{type:"number",
writeback:!0}},methods:{},extension:{rj:"input",Ya:"ojSlider"}});a.J.register("oj-slider",{metadata:a.J.getMetadata("oj-slider")})});