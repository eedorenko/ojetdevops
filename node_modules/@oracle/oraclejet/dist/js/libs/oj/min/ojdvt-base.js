/**
 * Copyright (c) 2014, 2017, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
define(["ojs/ojcore","jquery","ojs/ojcomponentcore","ojs/ojvalidation-number","ojs/internal-deps/dvt/DvtToolkit","ojdnd","promise"],function(a,g,c,b,d){function e(a,b){this.eQa=b;this.zSa=a;this.JGa="/"}a.gm=function(a){this.Init(a)};o_("AttributeGroupHandler",a.gm,a);a.f.ya(a.gm,a.f,"oj.AttributeGroupHandler");a.gm.prototype.Init=function(a){this.hH={};this.$S=0;this.Z2={};for(var b in a)this.Y5(b,a[b])};a.gm.prototype.Pp=function(){return[]};a.f.j("AttributeGroupHandler.prototype.getValueRamp",
{Pp:a.gm.prototype.Pp});a.gm.prototype.jg=function(a){if(this.Z2[a])return this.Z2[a];this.hH[a]||(this.gg||(this.gg=this.Pp().slice()),this.hH[a]=this.gg[this.$S],this.$S++,this.$S==this.gg.length&&(this.$S=0));return this.hH[a]};a.f.j("AttributeGroupHandler.prototype.getValue",{jg:a.gm.prototype.jg});a.gm.prototype.fsa=function(){var a=[],b;for(b in this.hH)a.push({category:b,value:this.hH[b]});return a};a.f.j("AttributeGroupHandler.prototype.getCategoryAssignments",{fsa:a.gm.prototype.fsa});a.gm.prototype.Y5=
function(a,b){this.Z2[a]=b};a.f.j("AttributeGroupHandler.prototype.addMatchRule",{Y5:a.gm.prototype.Y5});a.FB=function(a){this.Init(a)};o_("ShapeAttributeGroupHandler",a.FB,a);a.f.ya(a.FB,a.gm,"oj.ShapeAttributeGroupHandler");a.FB.iH="square circle diamond plus triangleDown triangleUp human".split(" ");a.FB.prototype.Pp=function(){return a.FB.iH};a.f.j("ShapeAttributeGroupHandler.prototype.getValueRamp",{Pp:a.FB.prototype.Pp});e.prototype.qSa=function(a,b,c,d){for(var e={};a&&-1<b.indexOf(c);){var f=
b.substring(0,b.indexOf(c));d&&void 0===a[f]&&(a[f]={});a=a[f];b=b.substring(b.indexOf(c)+1,b.length)}a&&(e.object=a,e.parameter=b);return e};e.prototype.Xna=function(a){void 0===this.jJ&&(a=this.qSa(this.zSa,this.eQa,this.JGa,a),this.jJ=a.object,this.w3=a.parameter)};e.prototype.jg=function(){this.Xna(!1);return void 0===this.jJ?void 0:this.jJ[this.w3]};e.prototype.AV=function(a,b){this.Xna(!0);if(b||!this.jJ[this.w3])this.jJ[this.w3]=a};a.te=function(b){this.iH=[];if(g(document.body).hasClass("oj-hicontrast"))this.iH=
a.te.Taa.slice();else{if(!a.te.rC){var c=a.te.r6();c&&(a.te.N8(c),c.remove())}this.iH=0<a.te.rC.length?a.te.rC.slice():a.te.Taa.slice()}this.Init(b)};o_("ColorAttributeGroupHandler",a.te,a);a.f.ya(a.te,a.gm,"oj.ColorAttributeGroupHandler");a.te.Taa="#237bb1 #68c182 #fad55c #ed6647 #8561c8 #6ddbdb #ffb54d #e371b2 #47bdef #a2bf39 #a75dba #f7f37b".split(" ");a.te.jca="oj-dvt-category1 oj-dvt-category2 oj-dvt-category3 oj-dvt-category4 oj-dvt-category5 oj-dvt-category6 oj-dvt-category7 oj-dvt-category8 oj-dvt-category9 oj-dvt-category10 oj-dvt-category11 oj-dvt-category12".split(" ");
a.te.rC=null;a.te.prototype.Pp=function(){return this.iH};a.f.j("ColorAttributeGroupHandler.prototype.getValueRamp",{Pp:a.te.prototype.Pp});a.te.r6=function(){if(a.te.rC)return null;var b=g(document.createElement("div"));b.attr("style","display:none;");b.attr("id","attrGps");g(document.body).append(b);for(var c=0;c<a.te.jca.length;c++){var d=g(document.createElement("div"));d.addClass(a.te.jca[c]);b.append(d)}return b};o_("ColorAttributeGroupHandler.createAttrDiv",a.te.r6,a);a.te.N8=function(b){a.te.rC=
[];b=b.children();for(var c=0;c<b.length;c++){var d=g(b[c]).css("color");d&&a.te.rC.push(d)}};o_("ColorAttributeGroupHandler.processAttrDiv",a.te.N8,a);var f={CSS_TEXT_PROPERTIES:function(a){var b={};a&&(a.hasClass("oj-gauge-metric-label")?(b["font-size"]=!0,b.color=!0):a.hasClass(a,"oj-chart-slice-label")?b.color=!0:a.hasClass("oj-treemap-node-header")&&(b["font-weight"]=!0));return f.kEa(a,b)},CSS_BACKGROUND_PROPERTIES:function(a){return f.cEa(a)},kba:"rgb(254, 0, 254)",dAa:"Times",eAa:"1px",mba:"1",
lba:"normal",Uza:4,XD:{},eXa:function(a,b){return a.css(b)},cEa:function(a){var b={};a.css("border-top-color")&&(b["border-color"]=a.css("border-top-color"));a.css("border-width")&&a.css("border-style")&&"none"!=a.css("border-style")&&(b["border-width"]=a.css("border-width"));a.css("background-color")&&(b["background-color"]=a.css("background-color"));return b},kEa:function(a,b){var c={},d=a.css("font-family");d&&d!==f.dAa&&(c["font-family"]=d.replace(/"/g,"'"));d=a.css("font-size");!d||-1<d.indexOf("px")&&
parseFloat(d)<f.Uza||b["font-size"]||(c["font-size"]=d);(d=a.css("font-weight"))&&d!==f.mba&&!b["font-weight"]&&(c["font-weight"]=d);(d=a.css("color"))&&d!==f.kba&&!b.color&&(c.color=d);(d=a.css("font-style"))&&d!==f.lba&&(c["font-style"]=d);return c},P_a:function(b,c,d,e){for(var p=null,t=null,r="",n=0;n<d.length;n++)r=r+d[n]+" ";d={};var n={},q;for(q in e){var s=e[q];s instanceof Array||(s=[s]);var u=f.VMa(q,s);t||p||!u||(p=g(document.createElement("div")),p.attr("style","display:none;"),b.append(p),
p.attr("class",r),g(document.body).append(p),t=g(document.createElement("div")),t.css("font-size",f.eAa),t.css("color",f.kba),t.css("font-weight",f.mba),t.css("font-style",f.lba),p.append(t));d[q]=s;u&&(n[q]=f.pGa(t,q,s))}b=a.te.r6();for(q in e)f.EQa(n[q],c,q,d[q]);b&&(a.te.N8(b),b.remove());p&&p.remove()},pGa:function(a,b,c){f.XD[b]||(f.XD[b]={});for(var d=null,e=0;e<c.length;e++){var t=c[e].property;t&&"undefined"==typeof f.XD[b][t]&&!d&&(d=g(document.createElement("div")),d.addClass(b),a.append(d))}return d},
EQa:function(a,b,c,d){for(var g=0;g<d.length;g++){var t=d[g],r=t.property;if(r){var n=f.XD[c][r];"undefined"==typeof n&&a&&(n=f.rSa(a,r),f.XD[c][r]=n);if(null!=n){t=new e(b,t.path);r=f[r];if(null!=r){var q=t.jg(),s="";if(null!=q){var q=f.oKa(q),u;for(u in n)-1===q.indexOf(u)&&(s+=u+":"+n[u]+";");s+=q}else for(u in n)s+=u+":"+n[u]+";";n=s}t.AV(n,null!=r)}}}},oKa:function(a){if(a instanceof Object){var b="",c;for(c in a)var d=c.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),b=b+(d+":"+a[c]+";");return b}return null!=
a&&"string"==typeof a?a:""},rSa:function(a,b){var c=f[b],c=c?c(a):f.eXa(a,b);return null==c||"string"==typeof c&&""==c.replace(/^\s+/g,"")?null:c},VMa:function(a,b){var c=f.XD[a];if(!c)return!0;for(var d=0;d<b.length;d++){var e=b[d].property;if(e&&"undefined"==typeof c[e])return!0}return!1}};a.ib("oj.dvtBaseComponent",g.oj.baseComponent,{qc:function(){this._super();this.hw=this.a4=0;this.kw=null;this.Rt={};for(var b=this.Tg(),c=0;c<b.length;c++)this.element.addClass(b[c]);this.OR=g(document.createElement("div"));
this.OR.attr("style","visibility:hidden;");this.element.append(this.OR);this.wg=(b=this.element[0].parentElement)&&b.RH?b.RH:new d.Context(this.element[0],null,this.OR[0]);this.wg.oj=a;this.wg.setReadingDirection(this.Qc());this.wg.setTooltipAttachedCallback(a.Components.pd);this.wg.setOverlayAttachedCallback(a.Components.pd);this.wg.setTooltipStyleClass("oj-dvt-tooltip");this.wg.setDatatipStyleClass("oj-dvt-datatip");this.wg.setFixContextCallback(this.vk.bind(this));this.wg.setCustomElement(this.Y());
g(document.body).hasClass("oj-hicontrast")&&d.Agent.setHighContrast(!0);this.Ka=this.Vh(this.wg,this.Bn,this);this.wg.getStage().addChild(this.Ka);!1!==d.requireJS&&(this.sTa(),this.Qma());this.Po();this.options._environment="jet";this.options._widgetConstructor=a.Components.ud(this.element)},Df:function(){this._super();"off"!=this.options.trackResize&&this.JY();this.Fq();this.Wh()},refresh:function(){this._super();this.wg.setReadingDirection(this.Qc());this.Qma();this.Wh()},getNodeBySubId:function(a){var b=
this.Ka&&this.Ka.getAutomation?this.Ka.getAutomation():null;return b?(a=this.ym(a),b.getDomElementForSubId(a)):null},getSubIdByNode:function(a){var b=this.Ka&&this.Ka.getAutomation?this.Ka.getAutomation():null;return b?(a=b.getSubIdForDomElement(a))?this.pj(a):null:null},ym:function(){return null},pj:function(){return null},ZN:function(){f.P_a(this.element,this.options,this.Tg(),this.ll())},Tg:function(){return["oj-dvtbase"]},ll:function(){return{"oj-dvt-no-data-message":{path:"_statusMessageStyle",
property:"CSS_TEXT_PROPERTIES"}}},Bm:function(){return[]},wk:function(){var b=this.options.translations,b={"DvtUtilBundle.CLEAR_SELECTION":b.labelClearSelection,"DvtUtilBundle.COLON_SEP_LIST":b.labelAndValue,"DvtUtilBundle.INVALID_DATA":b.labelInvalidData,"DvtUtilBundle.NO_DATA":b.labelNoData,"DvtUtilBundle.DATA_VISUALIZATION":b.labelDataVisualization,"DvtUtilBundle.STATE_SELECTED":b.stateSelected,"DvtUtilBundle.STATE_UNSELECTED":b.stateUnselected,"DvtUtilBundle.STATE_MAXIMIZED":b.stateMaximized,
"DvtUtilBundle.STATE_MINIMIZED":b.stateMinimized,"DvtUtilBundle.STATE_EXPANDED":b.stateExpanded,"DvtUtilBundle.STATE_COLLAPSED":b.stateCollapsed,"DvtUtilBundle.STATE_ISOLATED":b.stateIsolated,"DvtUtilBundle.STATE_HIDDEN":b.stateHidden,"DvtUtilBundle.STATE_VISIBLE":b.stateVisible,"DvtUtilBundle.SCALING_SUFFIX_THOUSAND":b.labelScalingSuffixThousand,"DvtUtilBundle.SCALING_SUFFIX_MILLION":b.labelScalingSuffixMillion,"DvtUtilBundle.SCALING_SUFFIX_BILLION":b.labelScalingSuffixBillion,"DvtUtilBundle.SCALING_SUFFIX_TRILLION":b.labelScalingSuffixTrillion,
"DvtUtilBundle.SCALING_SUFFIX_QUADRILLION":b.labelScalingSuffixQuadrillion},c=a.vb.gL("abbreviated");b["DvtUtilBundle.MONTH_SHORT_JANUARY"]=c[0];b["DvtUtilBundle.MONTH_SHORT_FEBRUARY"]=c[1];b["DvtUtilBundle.MONTH_SHORT_MARCH"]=c[2];b["DvtUtilBundle.MONTH_SHORT_APRIL"]=c[3];b["DvtUtilBundle.MONTH_SHORT_MAY"]=c[4];b["DvtUtilBundle.MONTH_SHORT_JUNE"]=c[5];b["DvtUtilBundle.MONTH_SHORT_JULY"]=c[6];b["DvtUtilBundle.MONTH_SHORT_AUGUST"]=c[7];b["DvtUtilBundle.MONTH_SHORT_SEPTEMBER"]=c[8];b["DvtUtilBundle.MONTH_SHORT_OCTOBER"]=
c[9];b["DvtUtilBundle.MONTH_SHORT_NOVEMBER"]=c[10];b["DvtUtilBundle.MONTH_SHORT_DECEMBER"]=c[11];return b},Qma:function(){var a=this.wk();d.Bundle.addLocalizedStrings(a)},sTa:function(){var b={};b.numberConverterFactory=a.Ma.nsa("number");b.dateToIsoConverter=function(b){return b instanceof Date?a.Va.Fe(b):b};b.isoToDateConverter=function(b){if("string"==typeof b){var c=a.Va.BU(b);b=c.toJSON()?a.Va.Fe(c):b;return a.Va.nu(b)}return b};b.dateToIsoWithTimeZoneConverter=function(b){if(b instanceof Date){var c=
-1*b.getTimezoneOffset(),d=Math.floor(Math.abs(c)/60),e=Math.abs(c)%60,c=(0<=c?"+":"-")+(2!==d.toString().length?"0"+d:d)+":"+(2!==e.toString().length?e+"0":e);return a.Va.Fe(b)+c}return b};this.wg.setLocaleHelpers(b)},_destroy:function(){this.wg.hideTooltips();this.wg=null;var a=this.element[0].parentElement;a&&a.RH&&(a.RH=null);this.Ka.destroy&&this.Ka.destroy();this.Ka=null;this.X3();this.Maa();this.element.children().remove();this.element.removeAttr("role").removeAttr("tabIndex").removeAttr("aria-activedescendant");
for(var a=this.Tg(),b=0;b<a.length;b++)this.element.removeClass(a[b]);this.Rs();this._super()},_setOptions:function(a,b){this._superApply(arguments);var c=this.options.trackResize;"off"==c&&this.Gj?this.X3():"off"==c||this.Gj||this.JY();this.Fq();if(!this.Qda){var d=!1,e=this.Bm(),f=["highlightedCategories","selection","dataCursorPosition"];g.each(a,function(a){if(0>e.indexOf(a)&&0>f.indexOf(a))return d=!0,!1});d?this.Wh():(void 0!==a.highlightedCategories&&this.Ka.highlight(a.highlightedCategories),
void 0!==a.selection&&this.Ka.select(a.selection),void 0!==a.dataCursorPosition&&this.Ka.positionDataCursor&&this.Ka.positionDataCursor(a.dataCursorPosition))}},Vh:function(){return null},Bn:function(a){var b=a.type;"selection"===b?this.hf("selection",a.selection):"categoryHide"===b||"categoryShow"===b?this.hf("hiddenCategories",a.hiddenCategories):"categoryHighlight"===b?this.hf("highlightedCategories",a.categories):"optionChange"===b?this.hf(a.key,a.value,a.optionMetadata):"touchHoldRelease"===
b&&this.wq()?this.Oi(g.Event(a.nativeEvent),"touch"):"ready"===b&&0===this.hw&&this.Rs()},JY:function(){this.Gj||(this.Gj=this.Dh.bind(this),a.T.Nl(this.element[0],this.Gj,250))},X3:function(){this.Gj&&(a.T.dm(this.element[0],this.Gj),this.Gj=null)},Dh:function(){var a=this.element.width(),b=this.element.height();(null==this.bT||null==this.GQ||5<=Math.abs(a-this.bT)+Math.abs(b-this.GQ))&&this.Wh(!0)},Po:function(){},Wh:function(b){this.wg.hideTooltips();this.WB();this.wg.isReadyToRender()?(this.bT=
this.NN()?null:this.element.width(),this.GQ=this.NN()?null:this.element.height(),this.wg.setDefaultFontFamily(this.OR.css("font-family")),this.options._width=this.bT,this.options._height=this.GQ,this.options._locale=a.sa.Uj(),this.options.dnd&&this.element.attr("draggable",!0),this.ZN(),this.a4++,b?0===this.hw&&this.MG(this.kw,b):this.oSa()&&this.MG(this.kw),this.Hna=!1):(this.Hna=!0,this.Rs())},Cq:function(){this._super();this.kma()},Dn:function(){this._super();this.kma()},uh:function(){this._super();
this.jma()},Ro:function(){this._super();this.jma()},kma:function(){this.Hna&&this.Wh()},jma:function(){this.wg.hideTooltips();this.Rs()},hf:function(a,b,c){this.Qda=!0;this.option(a,b,{_context:{gd:!0,xx:c,ob:!0}});this.Qda=!1},Mi:function(a,b,c){if("touch"!==c)if("keyboard"===c){a=this.element[0].getBoundingClientRect();var d=this.Ka.getKeyboardFocus()?this.Ka.getKeyboardFocus().getBoundingClientRect():null;this.Oi(b,c,{position:{at:d?"left+"+(d.left+.5*d.width-a.left)+" top+"+(d.top+.5*d.height-
a.top):"center"}})}else this._super(a,b,c)},wG:function(b){return(b=a.Components.ud(b)("instance"))?b.Ka:null},SB:function(a){for(var b="",c=0;c<a.length;c++)b+="["+a[c]+"]";return b},xq:function(a){for(var b=[],c=0;0<a.indexOf("[",c);){var d=a.indexOf("[",c)+1,c=a.indexOf("]",c);b.push(Number(a.substring(d,c)));c+=1}return b},Cm:function(a){return Number(this.JN(a))},JN:function(a){var b=a.indexOf("[")+1,c=a.indexOf("]");return a.substring(b,c)},Am:function(){return{}},uG:function(){if(!this.i3){this.i3=
{};var a=this,b=this.Am().root;b&&b.forEach(function(b){a.i3[b]=!0})}return this.i3},oSa:function(){this.kw=d.JsonUtils.clone(this.options,null,this.uG());this.Vza(this.kw);this.hw=0;var a=this,b=this.Am(),c;for(c in b)b[c].forEach(function(b){if("root"===c)a.Tna.bind(a)(a.options,a.kw,b);else{var d=a.options[c];if(d)for(var e=0;e<d.length;e++)a.Tna.bind(a)(d[e],a.kw[c][e],b)}});return 0===this.hw},Tna:function(a,b,c){var d=new e(a,c),f=d.jg();f instanceof Function?f=Promise.resolve(f(this.gba(a))):
this.Y()&&Array.isArray(f)&&(f=Promise.resolve(f),d.AV(f,!0));if(f instanceof Promise){var g=this.a4,r=this;f.then(function(a){r.Fna(g,b,c,a)},function(){r.Fna(g,b,c,[])});this.hw++}},Fna:function(a,b,c,d){a===this.a4&&(this.hw--,(new e(b,c)).AV(d,!0),0===this.hw&&(this.MG(this.kw),this.kw=null))},MG:function(a,b){this.Maa();var c=this.NN()&&this.Gj;c&&this.X3();this.Ka.render(b?null:a,this.bT,this.GQ);c&&this.JY();this.element.attr("role")?this.element.attr("tabindex",0):this.element.attr("tabindex",
null)},gba:function(){return{}},NN:function(){return!1},whenReady:function(){if(this.JJ)return Promise.resolve(!0);if(!this.JR){var a=this;this.JR=new Promise(function(b){a.J3=b})}return this.JR},WB:function(){this.JJ=!1;if(0===this.hw&&!this.eg){var b=a.Context.getContext(this.element[0]).md(),c={description:"The component identified by '"+this.element.attr("id")+"' is being loaded."};this.eg=b.ad(c)}},Rs:function(){this.J3&&(this.J3(!0),this.J3=null);this.JJ=!0;this.JR=null;this.eg&&(this.eg(),
this.eg=null)},Fq:function(){var a=this.options.tooltip;"function"===typeof a?this.options.tooltip={renderer:a}:a&&a._renderer&&(this.options.tooltip={renderer:this.yG(a._renderer,"tooltip")})},ml:function(a){var b=this;return function(c){c._dvtcontext=b.wg;var d=a(c);c._templateName&&c._templateCleanup&&b.$W(c._templateName,c._templateCleanup);return d&&!0!==d.preventDefault&&d.insert?(c=d.insert,c.classList&&c.classList.contains("oj-dvtbase")?b.wG(c):c):null}},Vza:function(a){if(this.Y())for(var b=
this.Os(),c=0;c<b.length;c++){var d=new e(a,b[c]),f=d.jg();f&&d.AV(this.ml(f),!0)}},Os:function(){return["tooltip/renderer"]},yG:function(a,b){var c=this;return function(d){var e=document.createElement("div");e.style.display="none";a({parentElement:e,context:d});return(d=e.children[0])?(c.$W(b,function(){g(e).remove()}),e.removeChild(d),g(e).remove(),d):null}},rX:function(a,b){var c=this;return function(d){var e=document.createElement("div");e.style.display="none";e.RH=c.wg;c.element.append(e);a({parentElement:e,
data:d.data});return(d=e.children[0])?(c.$W(b,function(){g(e).remove()}),"http://www.w3.org/2000/svg"===d.namespaceURI?(e.removeChild(d),g(e).remove(),d):c.wG(d)):null}},Maa:function(){for(var a in this.Rt)this.iX(a);this.Rt={}},iX:function(a){if(this.Rt[a]){for(var b=this.Rt[a].length,c=0;c<b;c++)this.Rt[a][c]();this.Rt[a]=[]}},$W:function(a,b){this.Rt[a]||(this.Rt[a]=[]);this.Rt[a].push(b)},kl:function(b,c,d){switch(b){case "hiddenCategories":case "highlightedCategories":case "selection":return a.f.Nb(c,
d);default:return this._super(b,c,d)}}},!0);(function(){var b=/\d/,c={circle:!0,ellipse:!0,square:!0,rectangle:!0,diamond:!0,triangleUp:!0,triangleDown:!0,plus:!0,human:!0,star:!0};a.J.$a("dvtBaseComponent","baseComponent",{properties:{trackResize:{type:"string"},translations:{properties:{labelAndValue:{type:"string"},labelClearSelection:{type:"string"},labelCountWithTotal:{type:"string"},labelDataVisualization:{type:"string"},labelInvalidData:{type:"string"},labelNoData:{type:"string"},stateCollapsed:{type:"string"},
stateDrillable:{type:"string"},stateExpanded:{type:"string"},stateHidden:{type:"string"},stateIsolated:{type:"string"},stateMaximized:{type:"string"},stateMinimized:{type:"string"},stateSelected:{type:"string"},stateUnselected:{type:"string"},stateVisible:{type:"string"}}}},methods:{},extension:{Ya:"dvtBaseComponent",PB:function(a,d){var e=d||c;return function(c,f,g,k){if(a[f]){if(b.test(c)||e[c])return c;throw Error("Found: '"+c+"'. Expected one of the following: "+Object.keys(d).toString());}return k(c)}}}})})()});