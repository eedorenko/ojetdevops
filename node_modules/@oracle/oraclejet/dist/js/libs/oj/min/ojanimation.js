/**
 * Copyright (c) 2014, 2017, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
define(["ojs/ojcore","jquery","promise","ojs/ojcomponentcore"],function(a,g){a.ea={};o_("AnimationUtils",a.ea,a);a.ea.Pm=function(c,b){if(!a.ea.e3){a.ea.e3={};var d=a.ea.e3,e=c.style;d.backfaceVisibility=void 0!==e.webkitBackfaceVisibility?"webkitBackfaceVisibility":"backfaceVisibility";d.transform=void 0!==e.webkitTransform?"webkitTransform":"transform";d.transformOrigin=void 0!==e.webkitTransformOrigin?"webkitTransformOrigin":"transformOrigin";d.transition=void 0!==e.webkitTransition?"webkitTransition":
"transition";d.transitionend=void 0!==e.webkitTransition?"webkitTransitionEnd":"transitionend"}return a.ea.e3[b]};a.ea.Gy=function(c,b,d,e,f,h){function k(g){function k(){q||(n&&(window.cancelAnimationFrame(n),n=0),c.removeEventListener(a.ea.Pm(c,"transitionend"),t),g&&g(!0),q=!0)}function t(a){a=l.indexOf(a.propertyName);-1<a&&(1<l.length?l.splice(a,1):k())}function r(){n=0;a.ea.Eda(c,d,1<s)}var n=0,q=!1;null==d&&(d={});null==d.css&&(d.css={});d.css[a.ea.Pm(c,"transition")]=a.ea.uGa(f,e);var s=a.ea.foa(c,
b,d,e,h||f);a.ea.Eda(c,b,1<s);c.addEventListener(a.ea.Pm(c,"transitionend"),t);var u=e.duration,v=e.delay,w=e._skipPromise;null==b?r():(e._noReflow||(a.ea.r3a=c.offsetWidth),n=window.requestAnimationFrame(r));u=a.ea.eja(u,v);w||setTimeout(k,u+100)}var l=[].concat(f);return e._skipPromise?(k(null),null):(new Promise(k)).then(function(){b&&b.addClass&&g(c).removeClass(b.addClass);d&&d.addClass&&g(c).removeClass(d.addClass);a.ea.aoa(c)})};a.ea.doa=function(a,b,d,e){a=a.style;for(var f in b)d.hasOwnProperty(f)||
e&&-1!=e.indexOf(f)||(d[f]=a[f])};a.ea.foa=function(c,b,d,e,f){var g=c.n3||{};b=b&&b.css?b.css:{};d=d&&d.css?d.css:{};e&&"all"===e.persist||(f=null);a.ea.doa(c,b,g,f);a.ea.doa(c,d,g,f);c.n3=g;e=c.zR||0;c.zR=++e;return e};a.ea.aoa=function(a){var b=a.zR;if(1<b)a.zR=b-1;else if(b=a.n3){var d=a.style,e;for(e in b)d[e]=b[e];delete a.n3;delete a.zR}};a.ea.y2a=function(a){if(0<=a.indexOf("-")){var b="";a=a.split("-");for(var d=0;d<a.length;d++){var e=a[d];e&&(b=b?b+(e.charAt(0).toUpperCase()+e.slice(1)):
e)}return b}return a};a.ea.nJa=function(a){a=a.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();0==a.indexOf("webkit")&&(a="-"+a);return a};a.ea.Q2a=function(a){return"webkit"+a.charAt(0).toUpperCase()+a.slice(1)};a.ea.pFa=function(a,b,d){b.css[d]&&(a=a.style[d])&&0!=a.indexOf("all")&&(b.css[d]=a+", "+b.css[d])};a.ea.Dpa=function(a){var b=[];if(a&&"none"!=a)for(var d;0<(d=a.indexOf(")"));)b.push(a.substr(0,d+1).trim()),a=a.slice(d+1);return b};a.ea.uKa=function(a){var b=a.indexOf("(");return 1<=b?
a.substr(0,b):a};a.ea.KDa=function(c,b){for(var d=c.style[a.ea.Pm(c,"transform")],d=a.ea.Dpa(d),e=a.ea.Dpa(b),f=[],g=0;g<e.length;g++){var k=a.ea.uKa(e[g]),l=!1;if(k)for(var m=0;m<d.length;m++)0==d[m].indexOf(k+"(")&&(d[m]=e[g],l=!0);l||f.push(e[g])}d=d.concat(f);return d.join(" ")};a.ea.Eda=function(c,b,d){if(b){if(b.css){var e=a.ea.Pm(c,"transition"),f=a.ea.Pm(c,"transform");d&&a.ea.pFa(c,b,e);b.css[f]&&(b.css[f]=a.ea.KDa(c,b.css[f]));d=c.style;var e=b.css,h;for(h in e)d[h]=e[h]}b.addClass&&g(c).addClass(b.addClass);
b.removeClass&&g(c).removeClass(b.removeClass)}};a.ea.dja=function(a){var b=parseFloat(a);return isNaN(b)?0:-1<a.indexOf("ms")?b:1E3*b};a.ea.eja=function(c,b){var d=a.ea.dja(c);if(0<d){var e=b?a.ea.dja(b):0;return d+e}return 0};a.ea.iea=function(c,b,d){b=b.split(",");d=d.split(",");c=c.split(",").length;for(var e=b.length,f=d.length,g=0,k=0;k<c;k++)var l=a.ea.eja(d[k%f],b[k%e]),g=Math.max(g,l);return g};a.ea.wZ=function(c){var b=window.getComputedStyle(c),d,e,f;d=b.animationName||b.webkitAnimationName;
e=b.animationDelay||b.webkitAnimationDelay;f=b.animationDuration||b.webkitAnimationDuration;c=a.ea.iea(d,e,f);d=b.transitionProperty||b.webkitTransitionProperty;e=b.transitionDelay||b.webkitTransitionDelay;f=b.transitionDuration||b.webkitTransitionDuration;b=a.ea.iea(d,e,f);return Math.max(c,b)};a.ea.XHa=function(a,b){a.delay=a.delay||b.delay;a.duration=a.duration||b.duration;a.timingFunction=a.timingFunction||b.timingFunction;a.persist=a.persist||b.persist};a.ea.wi=function(c,b,d,e){c=g(c)[0];return new Promise(function(f){function h(){n=
!0;l()}function k(){r=!0;l()}function l(){if(r&&n){m.removeClass(p);m.removeClass(t);a.ea.aoa(c);f(!0);var d={action:b,element:c};e&&e._trigger?e._trigger("animateEnd",null,d):m.trigger("ojanimateend",d)}}var m=g(c),p="oj-animate-"+b,t=p+"-active",r=!1,n=!1;a.ea.foa(c,null,null,null,null);var q=g.Event("ojanimatestart"),s={action:b,element:c,endCallback:k};e&&e._trigger?q=!e._trigger("animateStart",null,s):(m.trigger(q,s),q=q.isDefaultPrevented());if(!q){for(var q=[].concat(d),s=[],u={},v=0;v<q.length;v++){var w=
q[v],x="",y;null!=w&&"none"!=w&&("string"==typeof w?(x=w,y={}):"object"==typeof w&&(x=w.effect,y=g.extend({},w)),a.ea.XHa(y,u),u=g.extend({},y));x&&a.ea[x]&&s.push(a.ea[x](c,y))}s.length?Promise.all(s).then(k):k()}m.addClass(p);var z=window.requestAnimationFrame(function(){z=0;m.addClass(t);var b=a.ea.wZ(c);0<b?setTimeout(h,b+100):h()});setTimeout(function(){z&&(window.cancelAnimationFrame(z),z=0,h())},1E3)})};o_("AnimationUtils.startAnimation",a.ea.wi,a);a.ea.Bz=function(c,b){null==a.ea.mt&&(a.ea.mt=
a.ic.Tc("oj-animation-effect-default-options"));return g.extend({duration:"400ms"},a.ea.mt?a.ea.mt[c]:null,b)};a.ea.uGa=function(c,b){var d="";if(c)for(var e=0;e<c.length;e++){var f=a.ea.nJa(c[e]),d=d+((0<e?", ":"")+f+" "+b.duration);b.timingFunction&&(d+=" "+b.timingFunction);b.delay&&(d+=" "+b.delay)}return d};a.ea.Fga=function(c,b,d,e,f){b=a.ea.Bz(d,b);d={css:{opacity:e}};f={css:{opacity:f}};b&&(b.startOpacity&&(d.css.opacity=b.startOpacity),b.endOpacity&&(f.css.opacity=b.endOpacity));return a.ea.Gy(c,
d,f,b,["opacity"])};a.ea.fadeIn=function(c,b){return a.ea.Fga(c,b,"fadeIn",0,1)};o_("AnimationUtils.fadeIn",a.ea.fadeIn,a);a.ea.fadeOut=function(c,b){return a.ea.Fga(c,b,"fadeOut",1,0)};o_("AnimationUtils.fadeOut",a.ea.fadeOut,a);a.ea.expand=function(c,b){return a.ea.wP(c,b,!0)};o_("AnimationUtils.expand",a.ea.expand,a);a.ea.collapse=function(c,b){return a.ea.wP(c,b,!1)};o_("AnimationUtils.collapse",a.ea.collapse,a);a.ea.CVa=function(a,b){var d=[],e=a.children,f=[],g=[];a.nma=a.style.height;for(var k=
0;k<e.length;k++){var l=e[k],m=window.getComputedStyle(l);f.push(m.padding);g.push(m.textAlign);l.oma=l.style.padding}for(k=0;k<e.length;k++){l=e[k];m=document.createElement("div");m.style.overflow="hidden;";var p=document.createElement("div");p.style.display="table-cell";p.style.verticalAlign="middle";p.style.boxSizing="border-box";p.style.height=b;p.style.padding=f[k];p.style.textAlign=g[k];for(m.appendChild(p);l.firstChild;)p.appendChild(l.firstChild);l.appendChild(m);l.style.padding="0";d.push(m)}a.style.height=
"0";return d};a.ea.bVa=function(a){for(var b=a.children,d=0;d<b.length;d++){var e=b[d],f=e.children[0];if(f){var g=f.children[0];if(g)for(;g.firstChild;)e.appendChild(g.firstChild);e.removeChild(f)}e.style.padding=e.oma;delete e.oma}a.style.height=a.nma;delete a.nma};a.ea.OHa=function(c,b,d){var e,f=c.offsetHeight+"px",h=a.ea.CVa(c,f),k=g.extend({},b);d?k.endMaxHeight||(k.endMaxHeight=f):k.startMaxHeight||(k.startMaxHeight=f);k.persist="all";k._noReflow=!0;if(h.length)for(f=0;f<h.length;f++)0==f?
(k._skipPromise=!1,e=a.ea.wP(h[f],k,d)):(k._skipPromise=!0,a.ea.wP(h[f],k,d));else e=Promise.resolve();return e.then(function(){null!=b&&"all"==b.persist||a.ea.bVa(c)})};a.ea.nQ=function(a,b,d,e,f){d||(e?d="0":(b=f?b.maxWidth:b.maxHeight,d="none"!==b?b:(f?a.offsetWidth:a.offsetHeight)+"px"));return d};a.ea.wP=function(c,b,d){if(c&&"TR"==c.tagName)return a.ea.OHa(c,b,d);b=a.ea.Bz(d?"expand":"collapse",b);var e={},f={},g=b.direction||"height",k=e.css={},l=f.css={},m=window.getComputedStyle(c),p=[];
if("both"===g||"height"===g){var t=a.ea.nQ(c,m,b.endMaxHeight,!d,!1);k.maxHeight=a.ea.nQ(c,m,b.startMaxHeight,d,!1);l.maxHeight=t;p.push("maxHeight")}if("both"===g||"width"===g)g=a.ea.nQ(c,m,b.endMaxWidth,!d,!0),k.maxWidth=a.ea.nQ(c,m,b.startMaxWidth,d,!0),l.maxWidth=g,p.push("maxWidth");k.overflow=b.overflow?b.overflow:"hidden";d=[].concat(p);d.push("overflow");return a.ea.Gy(c,e,f,b,p,d)};a.ea.F9=function(c,b){return a.ea.Lqa(c,b,!0)};o_("AnimationUtils.zoomIn",a.ea.F9,a);a.ea.G9=function(c,b){return a.ea.Lqa(c,
b,!1)};o_("AnimationUtils.zoomOut",a.ea.G9,a);a.ea.Lqa=function(c,b,d){b=a.ea.Bz(d?"zoomIn":"zoomOut",b);var e={},f={},g=b.axis||"both",g="both"===g?"scale":"x"===g?"scaleX":"scaleY",k=e.css={},l=f.css={},m=a.ea.Pm(c,"transform"),p=a.ea.Pm(c,"transformOrigin");k[m]=g+"("+(d?0:1)+") translateZ(0)";l[m]=g+"("+(d?1:0)+") translateZ(0)";k[p]=b.transformOrigin||"center";return a.ea.Gy(c,e,f,b,[m])};a.ea.l9=function(c,b){return a.ea.yr(c,b,!0)};o_("AnimationUtils.slideIn",a.ea.l9,a);a.ea.$0a=function(c,
b){return a.ea.yr(c,b,!1)};o_("AnimationUtils.slideOut",a.ea.$0a,a);a.ea.yr=function(c,b,d){b=a.ea.Bz(d?"slideIn":"slideOut",b);var e={},f={},g=b.direction||"start",k="0",l="0",m=e.css={},p=f.css={};if(b.offsetX||b.offsetY)b.offsetX&&(k=b.offsetX),b.offsetY&&(l=b.offsetY);else{var t="rtl"===a.T.Qk();switch(g){case "left":k=(d?c.offsetWidth:-c.offsetWidth)+"px";break;case "right":k=(d?-c.offsetWidth:c.offsetWidth)+"px";break;case "top":l=(d?c.offsetHeight:-c.offsetHeight)+"px";break;case "bottom":l=
(d?-c.offsetHeight:c.offsetHeight)+"px";break;case "end":k=(d?-c.offsetWidth:c.offsetWidth)*(t?-1:1)+"px";break;default:k=(d?c.offsetWidth:-c.offsetWidth)*(t?-1:1)+"px"}}g=a.ea.Pm(c,"transform");d?(m[g]="translate("+k+","+l+") translateZ(0)",p[g]="translate(0,0) translateZ(0)"):(m[g]="translate(0,0) translateZ(0)",p[g]="translate("+k+","+l+") translateZ(0)");return a.ea.Gy(c,e,f,b,[g])};a.ea.D0a=function(c,b){b=a.ea.Bz("ripple",b);var d={},e={},f=c.offsetWidth,h=c.offsetHeight,k=g("\x3cdiv style\x3d'position:absolute; overflow:hidden'\x3e"),
l=g("\x3cdiv class\x3d'oj-animation-effect-ripple oj-animation-rippler'\x3e"),m="static"==window.getComputedStyle(c).position?{left:c.offsetLeft,top:c.offsetTop}:{left:0,top:0};c.insertBefore(k[0],c.firstChild);k.css({left:m.left+"px",top:m.top+"px",width:f+"px",height:h+"px"});k.prepend(l);f=d.css={};h=e.css={};m=a.ea.Pm(c,"transform");a.ea.FTa(f,l,k,b);f[m]="scale(0) translateZ(0)";f.opacity=b.startOpacity||l.css("opacity");h[m]="scale(1) translateZ(0)";h.opacity=b.endOpacity||0;b.persist="all";
return a.ea.Gy(l[0],d,e,b,[m,"opacity"]).then(function(){k.remove()})};o_("AnimationUtils.ripple",a.ea.D0a,a);a.ea.FTa=function(c,b,d,e){b=b.width();var f=d.width(),g=d.height();if(e.diameter){var k=e.diameter,l=parseInt(k,10);isNaN(l)||(b="%"==k.charAt(k.length-1)?Math.floor(Math.min(f,g)*(l/100)):l,c.width=b+"px",c.height=b+"px")}d="static"==d.css("position")?d.position():{left:0,top:0};f=a.ea.nea(e.offsetX,b,f,d.left);null!=f&&(c.left=f+"px");f=a.ea.nea(e.offsetY,b,g,d.top);null!=f&&(c.top=f+"px");
e.color&&(c.backgroundColor=e.color)};a.ea.nea=function(a,b,d,e){var f;a=a||"50%";var g=parseInt(a,10);isNaN(g)||(f="%"==a.charAt(a.length-1)?g/100*d-b/2:g-b/2,f=Math.floor(f+e));return f};a.ea.h3a=function(c,b){b=b||{};var d={fadeOut:1,collapse:1,zoomOut:1,slideOut:1},e=b.removeEffect||"fadeOut",f=g(".oj-animation-rippler",c);if(0===f.length)console.warn("No rippler so returning");else return e in d?a.ea[e](f,b).then(function(){f.remove()}):f.remove()};a.ea.hea=function(a){var b,d=a.match(/^([\+\-]?\d*\.?\d*)(.*)$/);
a=parseFloat(d[1]);d=d[2];switch(d){case "deg":b=a-180+d;break;case "grad":b=a-200+d;break;case "rad":b=a-3.1416+d;break;case "turn":b=a-.5+d;break;default:console.log("Unknown angle unit in flip animation: "+d)}return b};a.ea.Y_=function(c,b,d,e,f){if(b&&"children"==b.flipTarget){var h=[];c=g(c).children();var k=g.extend({},b);delete k.flipTarget;var l=g.extend({},k);l.startAngle=a.ea.hea(b.startAngle||e);l.endAngle=a.ea.hea(b.endAngle||f);for(var m=0;m<c.length;m++)b=g(c[m]).hasClass("oj-animation-backface")?
l:k,h.push(a.ea.Y_(c[m],b,d,e,f));return Promise.all(h)}b=a.ea.Bz(d,b);d={};var h={},k={css:d},l={css:h},p="rotateY(",t="2000px",m="hidden",r="center";b&&("x"===b.axis&&(p="rotateX("),b.startAngle&&(e=b.startAngle),b.endAngle&&(f=b.endAngle),b.perspective&&(t=b.perspective),b.backfaceVisibility&&(m=b.backfaceVisibility),b.transformOrigin&&(r=b.transformOrigin));var p="perspective("+t+") "+p,t=a.ea.Pm(c,"backfaceVisibility"),n=a.ea.Pm(c,"transform"),q=a.ea.Pm(c,"transformOrigin");d[n]=p+e+")";d[t]=
m;d[q]=r;h[n]=p+f+")";return a.ea.Gy(c,k,l,b,[n],[n,t,q])};a.ea.zXa=function(c,b){return a.ea.Y_(c,b,"flipIn","-180deg","0deg")};o_("AnimationUtils.flipIn",a.ea.zXa,a);a.ea.AXa=function(c,b){return a.ea.Y_(c,b,"flipOut","0deg","180deg")};o_("AnimationUtils.flipOut",a.ea.AXa,a);a.ea.IVa=function(c,b){b=a.ea.Bz("addTransition",b);return a.ea.Gy(c,null,null,b,b.transitionProperties)};o_("AnimationUtils.addTransition",a.ea.IVa,a)});