/**
 * Copyright (c) 2014, 2017, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
define(["ojs/ojcore","require","promise","customElements"],function(a,g){a.$={};a.$.kh={ZK:function(c){function b(){var a=window.Reflect;return"undefined"!==typeof a?a.construct(HTMLElement,[],this.constructor):HTMLElement.call(this)}var d=Object.create(HTMLElement.prototype);this.t$(d);var e=this.QF(c);a.$.vP(d,e,"properties",this.FM.bind(this));a.$.vP(d,e,"methods",this.fW.bind(this));this.zM(d);d.setProperties=function(b){a.$.Ta(this).CTa(this,b)};d.attributeChangedCallback=this.YY;d.connectedCallback=
this.sFa;d.disconnectedCallback=this.QGa;var f=this;Object.defineProperty(b,"observedAttributes",{get:function(){return f.g$(e)}});Object.defineProperty(d,"constructor",{value:b,writable:!0,configurable:!0});b.prototype=d;Object.setPrototypeOf(b,HTMLElement);return b},eYa:function(){return this.PM().yA()},$3a:function(){this.nW().$_a()},vi:function(){this.nW().zF()},zM:function(){},CM:function(){},fW:function(){},FM:function(){},PM:function(){this.Rfa||(this.Rfa=new a.$.rO);return this.Rfa},nW:function(){this.Sfa||
(this.Sfa=new a.$.rO);return this.Sfa},g$:function(c){return a.$.csa(c.properties)},QF:function(){return{}},ys:function(a){return a},o$:function(){},L1a:function(){},p$:function(){},SF:function(){this.Mda=!1;this.Yea||this.qf()},wW:function(){},Xx:function(c){this.Ru=this.QF(a.$.sO(c.tagName))},t$:function(){},M9:function(a,b){for(var d=Object.keys(b),e=0;e<d.length;e++){var f=d[e];a.setProperty(f,b[f])}},BM:function(){return!1},uN:function(c,b,d,e,f){e=this.IB(f,d,e);a.$.Uca(c,b,d,e)},IB:function(c,
b,d){if(null!=d){var e=a.$.Pk(this),f=a.$.Hm(b,e),h=b.split("."),k=this.BM(h);if(!f&&!k){a.D.warn("Ignoring property set for undefined property "+b+" on "+c.tagName);return}if(e[h[0]].readOnly)throw this.vi(),"Read-only property "+b+" cannot be set on "+this.tagName;a.$.pCa(c,b,d,f);if(!k)return a.$.qCa(c,b,d,f)}return d},YY:function(c,b,d){var e=a.$.Ta(this);if(e.Nda){var f=a.rc.LK(c),h=a.$.Hm(f,a.$.Pk(e));a.$.Qca(this,c);null===d&&(d=void 0);this.dispatchEvent(new CustomEvent("attribute-changed",
{detail:{attribute:c,value:d,previousValue:b}}));h&&!a.rc.QT(d).expr&&this.setProperty(f,a.$.Rca(this,c,f,d,h,e.eN));e.o$(this,c,b,d)}},rFa:function(c){this.Mda=!0;if(this.Nda)this.Yea||this.lna(c),this.wW();else{this.Nda=!0;this.lna(c);this.rPa(c);this.Xx(c);var b=this;a.$.AIa(c).then(function(a){a.whenReady(c).then(function(){b.CM(c)});a.addDisposeCallback(c,b.p$.bind(b))})}},sFa:function(){a.$.Ta(this).rFa(this)},QGa:function(){a.$.Ta(this).SF(this)},rPa:function(a){function b(){d.Mda&&d.qf();
d.Yea=!0}var d=this;this.nW().yA().then(function(){a.classList.add("oj-complete");b()},b)},lna:function(c){this.pka=a.Context.getContext(c).md().ad({description:c.tagName+" identified by '"+c.id+"' is being upgraded."})},qf:function(){var a=this.pka;if(!a)throw this.vi(),"Unexpected call to _resolveBusyState()";this.pka=null;a()},CTa:function(a,b){for(var d=[],e={},f=!1,h=Object.keys(b),k=0;k<h.length;k++){var g=h[k];0<=g.indexOf(".")?d.push(g):(e[g]=b[g],f=!0)}f&&this.M9(a,e);for(e=0;e<d.length;e++)f=
d[e],a.setProperty(f,b[f])}};a.$.csa=function(c){var b=[];a.$.eha("",c,b);return b};a.$.eha=function(c,b,d){if(b)for(var e in b){var f=b[e];if(!f.readOnly){var h=c+e;d.push(a.rc.P8(h));var k=f.type;k&&"object"===k.toLowerCase()&&a.$.eha(h+".",f.properties,d)}}};a.$.Ta=function(c){var b=c[a.$.pba];if(!b){b=a.$.HD[c.tagName.toLowerCase()];if(!b)throw"Attempt to interact with the custom element before it has been registered";b=Object.create(b.eWa);Object.defineProperty(c,a.$.pba,{value:b})}return b};
a.$.Pk=function(a){return a.Ru&&a.Ru.properties};a.$.zA=function(c){return c&&(c=a.$.HD[c.toLowerCase()])?{PK:c.PK}:null};a.$.S7=function(a){return 1===a.nodeType||3===a.nodeType};a.$.aBa="none";a.$.vP=function(a,b,d,e){if(b&&b[d]){var f=b[d];Object.keys(f).forEach(function(b){e(a,b,f[b])})}};a.$.AIa=function(c){var b=a.$.hha(c);if(b===a.$.aBa)c=Promise.resolve({whenReady:function(){return Promise.resolve(!1)},addDisposeCallback:function(){}});else if("knockout"==b)c=a.$.rJa();else throw a.$.Ta(c).vi(),
"Unknown binding provider: "+b;return c};a.$.hha=function(c){var b=c._ojBndgPrv;if(b)return b;b=c.getAttribute("data-oj-binding-provider")||a.$.MIa(c);if(!b)if(b=c.parentElement,null==b)if(c===document.documentElement)b="knockout";else throw a.$.Ta(c).vi(),"Cannot determine binding provider for a disconnected subtree";else b=a.$.hha(b);Object.defineProperty(c,"_ojBndgPrv",{value:b});return b};a.$.MIa=function(c){return a.gf?a.gf.IXa(c.parentElement):null};a.$.rJa=function(){a.$.fea||(a.$.fea=a.Cy()?
new Promise(function(a,b){g(["ojs/ojknockout"],a,b)}):Promise.resolve(a.oy.Ta()));return a.$.fea};a.$.pCa=function(c,b,d,e){if("string"==typeof d&&e&&(e=e.enumValues)&&-1===e.indexOf(d))throw a.$.Ta(c).vi(),"Invalid value found for property '"+b+"' on "+c.tagName+" with id "+c.id+"'. Found: '"+d+"'. Expected one of the following: "+e.toString();};a.$.qCa=function(c,b,d,e){if(e=e.type){e=e.toLowerCase();var f=e.split("|"),h=typeof d;if(1===f.length)("array"===e.substring(0,5)&&!Array.isArray(d)||"object"===
e.substring(0,6)&&"object"!==h||"number"===e&&("number"!==typeof d||!isFinite(d))||"string"===e&&"string"!==h)&&a.$.fC(c,b,d,e),"boolean"===e&&(d=!!d);else if(2===f.length){var k=f.indexOf("string"),g=f.indexOf("promise");-1!==k&&"string"!==typeof f[k]?(f=0===k?f[1]:f[0],("function"===f&&"function"!==h||"array"===f.substring(0,5)&&!Array.isArray(d)||"object"===f.substring(0,6)&&"object"!==h)&&a.$.fC(c,b,d,e)):-1===g||d instanceof Promise||(f=0===g?f[1]:f[0],"array"!==f.substring(0,5)||Array.isArray(d)||
a.$.fC(c,b,d,e))}}return d};a.$.fC=function(c,b,d,e){a.$.Ta(c).vi();throw"Invalid type found for "+c.tagName+" property '"+b+"'. Found: "+d+" of type "+typeof d+", but expected type "+e+".";};a.$.sO=function(c){return c?a.$.HD[c.toLowerCase()].hXa:null};a.$.sCa=function(c){return c?a.$.HD[c.toLowerCase()].mi:null};a.$.Qca=function(c,b){var d=b.split(".");if(1<d.length)for(d.pop();d.length;){var e=d.join(".");if(c.hasAttribute(e))throw a.$.Ta(c).vi(),"Cannot set overlapping attributes "+b+" and "+
e;d.pop()}};a.$.Hm=function(a,b){for(var d=b,e=a.split("."),f=0;f<e.length;f++)if(d=d[e[f]],1<e.length&&f<e.length-1&&(d=d.properties,!d))return null;return d};a.$.DY=function(c,b,d){var e=a.$.Ta(c),f=a.$.Pk(e);if(f)for(var h=c.attributes,k=0;k<h.length;k++){var g=h[k],m=a.rc.LK(g.nodeName),p=a.$.Hm(m,f);p&&!p.readOnly&&(a.$.Qca(c,g.nodeName),a.rc.QT(g.value).expr||(g=a.$.Rca(c,g.nodeName,m,g.value,p,d),e.uN(e.ys.bind(e),b,m,g,c)))}};a.$.Uca=function(a,b,d,e){d=d.split(".");for(var f=0;f<d.length;f++){var h=
a(d[f]);if(f===d.length-1){b[h]=e;break}else b[h]||(b[h]={});b=b[h]}};a.$.CY=function(a,b){for(var d=a,e=b.split("."),f=0;f<e.length;f++){var h=e[f];if(f===e.length-1)return d[h];if(!d[h])return null;d=d[h]}};a.$.Rca=function(c,b,d,e,f,h){if(null==e)return e;var k=f.type;return h?h(e,d,f,function(d){return a.rc.p6(c,b,d,k)}):a.rc.p6(c,b,e,k)};a.$.Sca=function(c,b){c=a.tc.Gd({},c,void 0,!0,1);c.properties=c.properties||{};a.$.vP(null,c,"properties",function(b,e){c.properties[a.rc.Qra(a.rc.Bva(e))]=
{fP:!0,UH:!0}});a.$.vP(null,c,"events",function(d,e){c.properties[a.rc.Qra(b?a.rc.Pra(e):e)]={fP:!0,UH:!0}});return c};a.$.Tca=function(c,b,d,e){var f=c.toLowerCase();if(!a.$.HD[f]){if(!b)throw"Error registering "+c+": missing a descriptor.";a.$.HD[f]={hXa:b,eWa:d,PK:e,mi:{}};return!0}return!1};a.$.HD={};a.$.pba="_ojBridge";a.$.rO=function(){var a,b,d;this.yA=function(){a||(a=new Promise(function(a,c){b=a;d=c}));return a};this.$_a=function(){d&&d(void 0)};this.zF=function(d){b?b(d):a=Promise.resolve(d)}}});