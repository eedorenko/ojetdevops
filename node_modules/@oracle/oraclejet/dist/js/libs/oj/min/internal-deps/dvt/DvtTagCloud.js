/**
 * Copyright (c) 2014, 2016, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
define(['./DvtToolkit'], function(dvt) {
  // Internal use only.  All APIs and functionality are subject to change at any time.

var ga;function ka(a,F){0==a.indexOf("dvt.")&&(a=a.substring(4));var D=a.split("."),E=eval("dvt");D[0]in E||!E.execScript||E.execScript("var "+D[0]);for(var v;D.length&&(v=D.shift());)D.length||void 0===F?E=E[v]?E[v]:E[v]={}:E[v]=F}Math.floor(2147483648*Math.random()).toString(36);
(function(a){function F(a){this.Init(a)}function D(a,c,e,f){this.Init(c,e,f);this.Fa=a}function E(){}function v(){this.Init({alta:v.If})}function x(a,c,e){this.Init(a,c,e)}function f(a,c,e,f,p,m,z,w,v){this.Init(a,c,e,f,p,m,z,w,v)}function c(a){this.JD=a}a.Mh=function(a,c,e){this.Init(a,c,e)};a.f.v(a.Mh,a.ec);a.Mh.newInstance=function(c,e,f){return new a.Mh(c,e,f)};a.Mh.prototype.Init=function(c,e,f){a.Mh.C.Init.call(this,c,e,f);this.a.Gc.ja().setAttributeNS(null,"text-rendering","geometricPrecision");
this.u=new D(this,c,this.Ef,this);this.u.Lf(this);a.m.eb()||this.u.Zr(new F(this.u));this.Ff=new v;this.Ob=[];this.Cv=[];this.ck=null;this.Ho=new a.vc(this.a);this.u.eS(this.Ho)};a.Mh.prototype.ia=function(c,e,f){isNaN(e)||isNaN(f)||(this.Oa=e,this.bb=f);this.BZ();this.me(c);this.Vq();this.Ji=this.ha;this.aH=this.Ob;this.Ob=[];this.hEa=[];this.ha=new a.ca(this.a);this.B(this.ha);p.ia(this,this.ha,new a.U(0,0,this.Oa,this.bb));this.Gb&&this.Gb.Vr(this.J.selection,this.Ov());e=this.J.animationDuration;
f=new a.U(0,0,this.Oa,this.bb);this.Ji?"none"!==this.J.animationOnDataChange&&c&&(this.lh=new a.ca(this.a),this.B(this.lh),c=new a.Ql(this.a,this.lh),c.En(this.aH,this.Ob),this.Cb=c.vz()):"none"!==this.J.animationOnDisplay&&(this.Cb=a.Sa.YD(this.a,a.Sa.Vz,this.ha,f,e));this.Cb?(this.u.ed(),this.u.ln(this),this.Cb.pg(this.Oya,this),this.Cb.play()):this.Oya();this.ps()};a.Mh.prototype.Ava=function(a){this.Ob=a};a.Mh.prototype.Bi=function(){this.Lc||(this.Lc=new c(this));return this.Lc};a.Mh.prototype.zL=
function(a,c){this.Cv.push(a);this.hEa[c]=a};a.Mh.prototype.Ov=function(){return this.Cv};a.Mh.prototype.gy=function(){return this.hEa};a.Mh.prototype.Zd=function(c){this.J.highlightedCategories=a.cb.clone(c);a.sd.Zd(c,this.Ov(),"any"===this.J.highlightMatch);this.ck&&this.ck.Zd(c)};a.Mh.prototype.select=function(c){this.J.selection=a.cb.clone(c);this.Gb&&this.Gb.Vr(this.J.selection,this.Ov())};a.Mh.prototype.me=function(c){c?this.J=this.Ff.no(c):this.J||(this.J=this.dA());c=this.J.selectionMode;
this.Gb="single"===c?new a.Gb(a.Gb.hv):"multiple"===c?new a.Gb(a.Gb.os):null;this.u.Fy(this.Gb);a.m.Il()||(this.J.animationOnDisplay="none",this.J.animationOnDataChange="none")};a.Mh.prototype.vk=function(){return a.I.Zc(this.A(),"componentName",a.I.pa,"TAG_CLOUD")};a.Mh.prototype.Oya=function(){this.Ji&&(this.removeChild(this.Ji),this.Ji.Ec(),this.Ji=null);this.lh&&(this.removeChild(this.lh),this.lh.Ec(),this.lh=null);this.Cb&&this.u.Lf(this);this.J.highlightedCategories&&0<this.J.highlightedCategories.length&&
this.Zd(this.J.highlightedCategories);this.Bj||this.nl();this.Cb=null;this.Bj=!1};a.Mh.prototype.BZ=function(){this.u.ed();this.Cv.length=0};a.Mh.prototype.Ef=function(c,e){var f=c.type;if("categoryHide"==f||"categoryShow"==f){var p=c.category,v=a.Y.$b(this.J.hiddenCategories,p);"categoryHide"==f&&0>v&&this.J.hiddenCategories.push(p);"categoryShow"==f&&0<=v&&this.J.hiddenCategories.splice(v,1);this.ia(this.J,this.Oa,this.bb)}else"categoryHighlight"==f&&(this!=e?this.Zd(c.categories):this.ck&&this.ck!=
e&&this.ck.Ef(c,e));c&&this.dispatchEvent(c)};a.Mh.prototype.b5a=function(a){return this.Gb?a[0]:null};a.Mh.prototype.z2a=function(a){a.hb()||(this.Gb.kn(a,!1),this.u.Bu());a=[];for(var c=this.Gb.getSelection(),e=0;e<c.length;e++){var f=c[e];f instanceof x&&a.push(f.getId())}return a};a.Mh.prototype.Rp=function(){for(var a=[],c=this.Gb.getSelection(),e=0;e<c.length;e++)a=a.concat(c[e].Xd());return a};a.Mh.prototype.jn=function(a,c,e){return this.Ho.jn(e)};a.Mh.prototype.Fl=function(a,c){return this.Ho.Fl(a,
c)};a.Mh.prototype.ey=function(a,c){return this.Ho.ey(a,c)};a.Mh.prototype.aC=function(a,c){return this.Ho.aC(a,c)};a.f.v(c,a.Lc);c.prototype.Rl=function(a){return(a=this.JD.u.Za(a))&&a instanceof x?"item["+this.JD.gy().indexOf(a)+"]":null};c.prototype.Rh=function(c){if(c==a.Lc.Ew)return this.eA(this.JD);var e=c.indexOf("[");return 0<e&&"item"===c.substring(0,e)&&(c=this.JD.gy()[parseInt(c.substring(e+1,c.length-1))])?c.Xd()[0].ja():null};c.prototype.getItem=function(a){if(a=this.JD.gy()[a]){var c=
{};c.color=a.pi();c.tooltip=a.Dh();c.label=a.ag();c.value=a.getValue();c.selected=a.hb();return c}return null};c.prototype.l4=function(){return this.JD.Ov().length};a.f.v(f,a.Tb);f.tRa=.3;f.uRa=.6;f.ida=0;f.Z6=1;f.jda=2;f.prototype.Init=function(a,c,e,p,v,m,z,w,A){f.C.Init.call(this,c,e,p,v,m,A);this.JD=a;this.uz();this.ic.Na(z);this.ic.sc(w);m&&this.WBa(m)};f.prototype.gc=function(a){this.wi!=a&&((this.wi=a)?this.yl?this.ub(this.p$):this.ub(this.raa):this.ub(this.qK))};f.prototype.Rc=function(){this.yl||
(this.yl=!0,this.wi?this.ub(this.p$):this.ub(this.Ima))};f.prototype.Cc=function(){this.wi?this.ub(this.raa):this.ub(this.qK);this.yl=!1};f.prototype.Mf=function(c,p){var u=new a.td(this.a,this,e.Kb(this.JD)),v=this.Bd(),y=p.Bd(),m=!1,z=y.N(a.j.od),w=v.N(a.j.od);if(z!=w){var A=this;this.ub(v.Na(a.j.od,z));u.da.aa(a.L.H8,this,function(){return A.Bd().N(a.j.od)},function(c){A.ub(A.Bd().Na(a.j.od,c))},w)}y=parseFloat(y.N(a.j.hi));v=parseFloat(v.N(a.j.hi));y!=v&&(m=!0,A=this,this.Ag(y),u.da.aa(a.L.ta,
this,function(){return parseFloat(A.Bd().N(a.j.hi))},this.Ag,v));v=p.rb();y=this.rb();z=p.dl();w=this.dl();if(y!=v||m&&w!=z)w!=z&&(v=f.JTa(p,v,z)),this.na(v),u.da.aa(a.L.ta,this,this.rb,this.na,y);m=p.vb();v=this.vb();v!=m&&(this.Qa(m),u.da.aa(a.L.ta,this,this.vb,this.Qa,v));p.qa(0);c.add(u,f.Z6)};f.prototype.ai=function(c){c.add(new a.Vg(this.a,this,e.Kb(this.JD)),f.ida)};f.prototype.mh=function(c){this.qa(0);c.add(new a.dg(this.a,this,e.Kb(this.JD)),f.jda)};f.prototype.Ag=function(a){f.C.Ag.call(this,
a);this.WBa(this.Bd())};f.prototype.WBa=function(c){this.qK=c.clone();c=this.qK.N(a.j.od);this.qK.Na(a.j.fe,null);this.Ima=this.qK.clone();var e=f.nEa(c,f.tRa);this.Ima.Na(a.j.fe,e);this.Ima.Na(a.j.od,a.D.Ok(e));this.raa=this.qK.clone();this.raa.Na(a.j.fe,c);this.raa.Na(a.j.od,a.D.Ok(c));this.p$=this.qK.clone();c=f.nEa(c,f.uRa);this.p$.Na(a.j.fe,c);this.p$.Na(a.j.od,a.D.Ok(c))};f.JTa=function(c,e,f){c=c.hJa();return f==a.M.Fj?e+c.b:f==a.M.ii?e-c.b:e};f.nEa=function(c,e){var f=a.D.mj(c),p=a.D.kj(c),
v=a.D.hj(c);return a.D.sC(Math.floor(255*(1-e)+e*f),Math.floor(255*(1-e)+e*p),Math.floor(255*(1-e)+e*v))};a.f.v(x,a.f);x.prototype.Init=function(c,e,f){this.Fa=c;this.af=e;this.sb=f;this.hD=this.wi=!1;f.url?(e.zg("link"),this.HXa=a.l.Bba("_blank",f.url)):e.zg("img");this.So()};x.prototype.getId=function(){return this.sb.id};x.prototype.ag=function(){return this.sb.label};x.prototype.getValue=function(){return this.sb.value};x.prototype.Dh=function(){return this.sb.shortDesc};x.prototype.oh=function(){return this.sb.action};
x.prototype.bf=function(){var a=this.Fa.A().tooltip;return(a=a?a.renderer:null)?this.Fa.a.cf().Rs(a,this.zj()):this.Dh()};x.prototype.zj=function(){return{id:this.getId(),label:this.ag(),color:this.pi(),value:this.getValue()}};x.prototype.Bba=function(){return this.HXa};x.prototype.pi=function(){return this.af.qK.N(a.j.od)};x.prototype.Kn=function(a){this.hD=a};x.prototype.gb=function(){return this.hD};x.prototype.hb=function(){return this.wi};x.prototype.gc=function(a){this.wi=a;this.af.gc(a);this.So()};
x.prototype.Rc=function(){this.af.Rc()};x.prototype.Cc=function(){this.af.Cc()};x.prototype.Kd=function(c){var e=this.Fa.u.ya;return c.type==a.MouseEvent.He||e.yo(c)?this:e.Th(c)?F.Kd(this,c,this.Fa.Ov()):null};x.prototype.md=function(a){return this.af.V(a)};x.prototype.$j=function(){return this.af.ja()};x.prototype.qh=function(){this.Tc=!0;this.Rc()};x.prototype.mf=function(){this.Tc&&(this.Tc=!1,this.Cc())};x.prototype.Ae=function(){return this.Tc};x.prototype.Xd=function(){return[this.af]};x.prototype.se=
function(){var c=[];this.gb()&&c.push(a.I.Ja(a.I.pa,this.hb()?"STATE_SELECTED":"STATE_UNSELECTED"));return a.R.mm(this.Dh(),c)};x.prototype.rd=function(){return this.sb.categories};x.prototype.So=function(){a.m.Vj()||this.af.Od("label",this.se())};x.prototype.pk=function(){if(!this.Lp&&(this.Lp=[],this.sb.showPopupBehaviors))for(var c=this.sb.showPopupBehaviors,e=0;e<c.length;e++)this.Lp.push(new a.ib(c[e].popupId,c[e].triggerType,c[e].alignId,c[e].align));return this.Lp};x.prototype.jn=function(a){return this.Fa.b5a(a)};
x.prototype.Fl=function(){return this.Fa.z2a(this)};x.prototype.Rp=function(){return this.Fa.Rp()};a.f.v(v,a.ka);v.If={animationOnDisplay:"none",animationOnDataChange:"none",emptyText:null,hiddenCategories:[],hideAndShowBehavior:"none",highlightedCategories:[],highlightMatch:"all",hoverBehavior:"none",layout:"rectangular",selectionMode:"none",_statusMessageStyle:new a.j(a.ka.pj+"color: #333333;"),styleDefaults:{animationDuration:500,hoverBehaviorDelay:200,_style:new a.j(a.ka.pj+"color: #333333;")},
touchResponse:"auto"};var p={};a.f.v(p,a.f);p.ia=function(a,c,e){p.Cn(a,c,e);p.Moa(a,c,e);p.cD(e);var f=a.A();f.items&&0<f.items.length?(f=p.n2(a,c,e),0<f.length?(a.Ava(f),a.u.Xr(a.Ov()[0])):p.ju(a,c,e)):p.ju(a,c,e)};p.ju=function(c,e,f){var p=c.A(),v=p.emptyText;v||(v=a.I.Zc(p,"labelNoData",a.I.pa,"NO_DATA",null));a.ga.um(e,v,new a.U(f.x,f.y,f.b,f.i),c.u,p._statusMessageStyle)};p.Cn=function(c,e,f){c=new a.Rect(c.a,f.x,f.y,f.b,f.i);c.Yb();e.B(c)};p.n2=function(c,e,p){for(var v=c.A(),y=[],m=v.items,
z=Number.MAX_VALUE,w=-Number.MAX_VALUE,A=0;A<m.length;A++)z=Math.min(z,m[A].value),w=Math.max(w,m[A].value);var z=E.O2a(z,w),w=a.Y.VB(v.hiddenCategories),d=a.j.Yba(),g=v.styleDefaults,B=g.svgStyle||g.style;!B||B instanceof Object||(B=a.j.HK(B));for(A=0;A<m.length;A++){var r=m[A];r.categories||(r.categories=[r.label]);if(!w||!a.Y.BI(w,r.categories)){var l=g._style.clone(),C=r.svgStyle||r.style;!C||C instanceof Object||(C=a.j.HK(C));var K=C&&C.color?C.color:r.color?r.color:B&&B.color?B.color:null;if(C=
a.cb.ae(C,B)){for(var D=0;D<d.length;D++){var F=a.j.RD(d[D]);C[F]&&(l.Na(d[D],C[F]),delete C[F])}delete C.color}K&&l.Na(a.j.od,K);l.Na(a.j.hi,z.call(null,r.value).toString());l=new f(c,c.a,r.label,0,0,l,C,r.svgClassName||r.className,r.id);C=new x(c,l,r);c.u.Xb(l,C);c.zL(C,A);"none"!==v.selectionMode&&C.Kn(!0);(C.gb()||r.url||C.oh())&&l.setCursor("pointer");y.push(l);e.B(l)}}0<y.length&&("cloud"===v.layout?E.K0a(p,y):E.A6a(p,y,a.m.ea(c.a)));return y};p.Moa=function(c,e,f){var p=c.A(),v=p.legend;if(v&&
v.sections){v=a.cb.clone(v);v.orientation="horizontal";v.halign="center";v.hoverBehavior=p.hoverBehavior;v.hideAndShowBehavior=p.hideAndShowBehavior;v.hiddenCategories=p.hiddenCategories;p=a.Rf.newInstance(c.a,c.Ef,c);e.B(p);var m=p.ly(v,f.b,f.i/3);p.ia(v,m.b,m.i);a.qj.position(f,"bottom",p,m.b,m.i,0);c.ck&&(c.ck.Ec(),e.removeChild(c.ck));c.ck=p}};p.cD=function(a){a.x=Math.round(a.x);a.y=Math.round(a.y);a.b=Math.round(a.b);a.i=Math.round(a.i)};a.f.v(E,a.f);E.O2a=function(a,c){return function(e){return 12+
Math.ceil(2*(e-a)/(c-a)*12)}};E.K0a=function(c,e){var f=[],p=10/180,v=10/180;c.b>c.i?p*=c.b/c.i:v*=c.i/c.b;for(var m=2*Math.PI/180,z=null,w=0,A=[],d=[],g=0;g<e.length;g++)for(var B=!1,r=0,l=4,C=e[g],x=C.V(),w=Math.max(w,parseFloat(C.Bd().N(a.j.hi))),D=-1;!B;){var E=r%180;void 0===A[E]&&(A[E]=Math.cos(r*m));void 0===d[E]&&(d[E]=Math.sin(r*m));var F=p*r*A[E],ja=v*r*d[E],ea=new a.U(F,ja,x.b,x.i),B=!0;-1!=D&&f[D].gca(ea)&&(B=!1);if(B)for(E=0;E<g;E++)if(f[E].gca(ea)){D=E;B=!1;break}B&&(z=z?z.Hn(ea):ea,
D=-1,f[g]=ea,C.na(F),C.Qa(-x.y+ja));3600===r?l=3:5400===r?l=2:10800===r&&(l=1);r+=l}f=Math.max(z.b/c.b,z.i/c.i);p=z.x+z.b/2;z=z.y+z.i/2;for(E=0;E<e.length;E++)C=e[E],C.na(c.x+C.rb()/f+(c.b/2-p/f)),C.Qa(c.y+C.vb()/f+(c.i/2-z/f)),v=parseFloat(C.Bd().N(a.j.hi)),C.Ag(v/f)};E.A6a=function(c,e,f){for(var p=[],v=0,m=0,z=0,w=0;w<e.length;w++){var A=e[w],d=A.V(),v=Math.max(v,d.b),m=Math.max(m,d.i),z=Math.max(z,parseFloat(A.Bd().N(a.j.hi)));p.push(new a.eg(d.b,d.i))}w=0;for(A=(c.b-10)/v;.001<A-w;)v=(w+A)/2,
z=E.IBa(p,(c.b-10)/v),z.length*(v*m+2)-2>c.i-10?A=v:w=v;v=w;z=E.IBa(p,(c.b-10)/v);z.push(e.length);for(w=0;w<z.length-1;w++){var d=z[w],g=z[w+1],B=0,r=0,l=!0;if(1<g-d){for(var A=0,C=d;C<g;C++)A+=p[C].b*v,r=Math.max(r,p[C].i*v);B=(c.b-10-A)/(g-d-1);w==z.length-2&&(C=.5*r,C<B&&A+(g-d)*C<.9*(c.b-10)&&(B=C,l=!1))}for(var r=5+(w+1)*(m*v+2)-2,x=f?c.b-5:5,C=d;C<g;C++){var A=e[C],D=parseFloat(A.Bd().N(a.j.hi));A.Ag(D*v);A.Qa(c.y+r);l&&C==g-1&&C!=d?f?(A.Oh(),A.na(c.x+5)):(A.bh(),A.na(c.x+c.b-5)):(A.na(c.x+
x),f?(A.bh(),x-=p[C].b*v+B):(A.Oh(),x+=p[C].b*v+B))}}};E.IBa=function(a,c){var e=[0],f=a[0].b+2;if(1<a.length)for(var p=1;p<a.length;p++)f+a[p].b>c&&(e.push(p),f=0),f+=a[p].b+2;return e};var e={};a.f.v(e,a.f);e.Kb=function(a){return a.A().styleDefaults.animationDuration/1E3};a.f.v(D,a.u);D.prototype.iF=function(a){a=this.Za(a.target);this.sma(a);this.BP(a)};D.prototype.xM=function(a){a=this.Za(a.target);this.BP(a)};D.prototype.cv=function(a){a=this.Za(a.target);this.sma(a);this.BP(a)};D.prototype.sma=
function(a){a instanceof x&&(a=a.Bba())&&a.call()};D.prototype.Vl=function(c){var e=!0,f=this.Fe();c.keyCode==a.KeyboardEvent.Nn?this.sma(f):e=D.C.Vl.call(this,c);return e};D.prototype.Ij=function(c,e,f){c=this.Fa.A();"dim"==c.hoverBehavior&&(e=e.rd?e.rd():[],c.highlightedCategories=f?e.slice():null,f=a.la.MI(c.highlightedCategories,f),e=a.$a.Aq(c.styleDefaults.hoverBehaviorDelay),this.pF.Ef(f,this.Fa.Ov(),e,"any"==c.highlightMatch))};D.prototype.BP=function(c){c&&c.oh&&c.oh()&&this.jt(a.la.yy("action",
c.oh(),c.getId()))};D.prototype.Oy=function(){return this.Fa.A().touchResponse};a.f.v(F,a.ya);F.prototype.Init=function(a){F.C.Init.call(this,a)};F.prototype.Iz=function(a){return this.Th(a)&&!a.ctrlKey};F.prototype.yo=function(c){return c.keyCode==a.KeyboardEvent.Kj&&c.ctrlKey};F.Kd=function(c,e,f){e=e.keyCode==a.KeyboardEvent.Be||e.keyCode==a.KeyboardEvent.kf?!0:!1;c=a.Y.$b(f,c)+(e?1:-1);return c<f.length&&0<=c?f[c]:null};a.f.v(function(){},a.bM);a.K(a,"TagCloud",a.Mh);a.K(a.Mh,"newInstance",a.Mh.newInstance);
a.K(a.Mh.prototype,"render",a.Mh.prototype.ia);a.K(a.Mh.prototype,"getAutomation",a.Mh.prototype.Bi);a.K(a.Mh.prototype,"highlight",a.Mh.prototype.Zd);a.K(a.Mh.prototype,"select",a.Mh.prototype.select);a.K(c.prototype,"getDomElementForSubId",c.prototype.Rh);a.K(c.prototype,"getItem",c.prototype.getItem);a.K(c.prototype,"getItemCount",c.prototype.l4)})(dvt);
  return dvt;
});
