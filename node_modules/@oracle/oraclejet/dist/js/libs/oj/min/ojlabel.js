/**
 * Copyright (c) 2014, 2017, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
define(["ojs/ojcore","jquery","hammerjs","ojs/ojjquery-hammer","ojs/ojcomponentcore","ojs/ojpopup"],function(a,g,c){(function(){a.ib("oj.ojLabel",g.oj.baseComponent,{version:"1.0.0",defaultElement:"\x3clabel\x3e",widgetEventPrefix:"oj",options:{"for":null,help:{definition:null,source:null},labelId:null,showRequired:!1,rootAttributes:null},bb:{Jca:"tooltipHelp",Kca:"tooltipRequired"},widget:function(){return this.ts},refresh:function(){this._super();this.Be();this.ana();this.eda()},rh:function(a,c){this._super(a,
c);this.ci=this.Y();this.FEa()},qc:function(){this._super();this.FS=this.eventNamespace+"TouchEatClick";this.fqa=this.eventNamespace+"TouchEatContextMenu";this.HQ=this.eventNamespace+"HelpDefPopup";this.mv=a.T.ie();this.wHa()},NG:function(a){this.Y()||(this.$J=a.attr("class"))},$B:function(){this.Y()||(this.$J?this.element.attr("class",this.$J):this.element.removeAttr("class"))},uh:function(){this._superApply(arguments);this.x1()},Ro:function(){this._superApply(arguments);this.x1()},zG:function(){return"oj-ojLabel"},
wHa:function(){var a=null;this.Fc?(this.ts=g(this.Fc).append(this.element.wrap(this.pfa()).parent()),this.ts.addClass("oj-label oj-component")):this.ts=this.element.wrap(this.mGa()).closest(".oj-component");this.eda();a=this.element[0].id;this.qU=a+"_helpIcon";this.nM=a+"_requiredIcon";this.ci||this.wPa();this.options.showRequired&&(this.xfa(),this.ci&&this.jda());this.ci&&this.$ma();this.dma()&&(a=this.b_(this.qU,!0),this.kfa(a),this.ci&&this.dda(this.qU))},zha:function(){var a,c=null;if(!this.ci)return null;
c=this.Lha();null==c&&(this.Fc&&(a=this.Fc.id),c=this.qQ("labelled-by",a),null==c&&(c=this.qQ("aria-labelledby",this.options.labelId)));return c},jda:function(){var a;this.Fc&&(a=this.Fc.id);(a=this.qQ("labelled-by",a))&&this.Yka(a)&&this.bda(a,this.nM,"described-by")},MRa:function(){var a;this.Fc&&(a=this.Fc.id);(a=this.qQ("labelled-by",a))&&this.Yka(a)&&this.tna(a,this.nM,"described-by")},dda:function(a){var c,e=this.zha();e&&(c=this.dha(e),this.bda(e,a,c))},yRa:function(a){var c,e=this.zha();e&&
(c=this.dha(e),this.tna(e,a,c))},dha:function(a){return this.Xka(a)?"described-by":"group"===a.getAttribute("role")?"aria-labelledby":"aria-describedby"},Lha:function(){return document.getElementById(this.options["for"])},qQ:function(a,c){return c?document.querySelector("["+a+"~\x3d"+c+"]"):null},Xka:function(b){return b?null!=a.$.zA(b.tagName):!1},Yka:function(a){var c=["oj-radioset","oj-checkboxset"],e=c.length,f;if(a){f=a.tagName.toLowerCase();for(var g=0;g<e;g++)if(a=c[g],0===f.indexOf(a))return!0}return!1},
bda:function(a,c,e){var f=a.getAttribute(e),f=f?f.split(/\s+/):[];-1===g.inArray(c,f)&&f.push(c);c=g.trim(f.join(" "));a.setAttribute(e,c)},tna:function(a,c,e){var f=a.getAttribute(e),f=f?f.split(/\s+/):[];c=g.inArray(c,f);-1!==c&&f.splice(c,1);(c=g.trim(f.join(" ")))?a.setAttribute(e,c):a.setAttribute(e,"")},UCa:function(a){var c=this.element[0],e=this.options["for"];this.Xka(a)?c.setAttribute("for",e+"|input"):c.setAttribute("for",e)},kfa:function(a){var c=this.TFa(this.options.help.definition,
this.options.help.source);g(a).prepend(c);this.ODa();this._focusable({element:c,applyHighlight:!0})},xfa:function(){this.b_(this.nM,!1).appendChild(this.lGa())},FEa:function(){var a=this.options.showRequired;if(null!==a&&"boolean"!==typeof a)throw Error("Option 'showRequired' has invalid value set: "+a);},eda:function(){this.ci&&this.bna();null==this.element.attr("id")&&this.element.uniqueId()},wPa:function(){if(!this.ci){var a;a=this.element.attr("class");var c,e;if(a&&(a=a.split(/\s+/),null!=a)){e=
a.length;for(var f=0;f<e;f++)c=a[f],0<c.indexOf("-label")&&(this.ts.addClass(c),this.element.removeClass(c))}}},b_:function(a,c){var e,f=document.createElement("span");f.setAttribute("id",a);c?(e=this.ts.find(".oj-label-group"),e.prepend(f)):this.element.before(f);return f},mGa:function(){var a,c=this.options.rootAttributes,e="oj-label oj-component";c&&(a=c["class"]);a&&(e=e+" "+a);a=document.createElement("div");a.className=e;a.appendChild(this.pfa());return a},pfa:function(){var a;a=document.createElement("div");
a.className="oj-label-group";return a},lGa:function(){var a=this.R(this.bb.Kca),c=document.createElement("span");c.className="oj-label-required-icon oj-component-icon";c.setAttribute("role","img");c.setAttribute("title",a);c.setAttribute("aria-label",a);return c},TFa:function(b,c){var e;e=document.createElement("a");e.setAttribute("tabindex","0");e.setAttribute("target","_blank");e.className="oj-label-help-icon-anchor oj-label-help-icon oj-component-icon oj-clickable-icon-nocontext";if(c)try{a.T.D1a(c),
e.setAttribute("href",c)}catch(f){throw Error(f+". The source option ("+c+") is invalid.");}else e.setAttribute("role","img");b?e.setAttribute("aria-label",b):e.setAttribute("aria-label",this.R(this.bb.Jca));return e},ODa:function(){var a,c,e,f=this;c=this.widget().find(".oj-label-help-icon-anchor");0!==c.length&&(a=this.SFa(),this.mv&&(this.F_&&this.widget().off(this.FS),this.F_=function(){return!1},this.wga=function(){return!1},c.on("contextmenu"+this.fqa,this.wga)),this.yD||(this.yD=function(e){f.pMa(e,
a,c)}),this.PZ||(this.PZ=function(){f.x1()}),this.jDa(c),e={my:"start bottom",at:"end top",collision:"flipcenter",of:c},a.ojPopup({position:e,modality:"modeless",animation:{open:null,close:null}}))},SFa:function(){var a,c,e=this.options.help.definition,f;a=e?e:this.R(this.bb.Jca);if(this.kz){if(f=g(document.getElementById(this.kz)))c=f.find(".oj-help-popup-container").first(),c.text(a)}else e=document.createElement("div"),e.className="oj-help-popup",e.style.display="none",f=g(e),f.uniqueId(),this.kz=
f.prop("id"),c=document.createElement("div"),c.className="oj-help-popup-container",e.appendChild(c),c=g(c),c.text(a),a=document.getElementsByTagName("body")[0],a.appendChild(e);return f},jDa:function(b){var d;b.on("focusin"+this.HQ+" mouseenter"+this.HQ,this.yD);b.on("mouseleave"+this.HQ,this.PZ);this.mv&&(this.options.help.source?(d={recognizers:[[c.Press,{time:a.T.BB}]]},b.Lg(d),this._on(b,{press:this.yD})):(d={recognizers:[[c.Tap],[c.Press,{time:a.T.BB}]]},b.Lg(d),this._on(b,{press:this.yD,tap:this.yD})))},
pMa:function(b,c,e){if(!c.ojPopup("isOpen"))if(this.mv){if("press"===b.type){var f=this.widget();f.on("click"+this.FS,this.F_);var g=this;c.on("ojclose",function(){f.off(g.FS)})}else c.off("ojclose");"press"!==b.type&&"tap"!==b.type&&(a.T.T_a()||"focusin"!==b.type&&"mouseenter"!==b.type)||c.ojPopup("open",e)}else c.ojPopup("open",e)},x1:function(){var a;null!=this.kz&&(a=g(document.getElementById(this.kz)),a.ojPopup("close"))},wna:function(a){this.mv&&(this.widget().off(this.FS),a.off(this.fqa),this.wga=
this.F_=null,a.Lg("destroy"));a.off(this.HQ);this.PZ=this.yD=null},xna:function(){var a;if(null!=this.kz){if(a=g(document.getElementById(this.kz)))a.ojPopup("destroy"),a.remove();this.kz=null}},dma:function(){var a=this.options;return null!=a.help.source||null!=a.help.definition},ana:function(){var a=this.qU,c;c=this.ts.find(".oj-label-help-icon");1===c.length&&(this.wna(c),this.xna(),c.remove());c=document.getElementById(a);this.dma()?(null==c&&(c=this.b_(a,!0)),this.kfa(c),this.ci&&this.dda(a)):
null!==c&&(c.parentNode.removeChild(c),this.ci&&this.yRa(a))},Be:function(){var a;a=this.nM;var c;c=document.getElementById(a);this.options.showRequired?c?(c=this.R(this.bb.Kca),a=this.ts.find(".oj-label-required-icon"),a.attr("title",c)):(this.xfa(),this.ci&&this.jda()):(c=document.getElementById(a),null!==c&&c.parentNode.removeChild(c),this.ci&&this.MRa())},$ma:function(){var a;this.ci&&(a=this.Lha())&&this.UCa(a)},bna:function(){var a;this.ci&&((a=this.options.labelId)?this.element.attr("id",a):
(a=this.ts.attr("id"))&&this.element.attr("id",a+"|label"))},_setOption:function(a,c){this._superApply(arguments);switch(a){case "showRequired":this.Be();break;case "help":this.ana();break;case "for":this.ci&&this.$ma();break;case "labelId":this.ci&&this.bna()}},getNodeBySubId:function(a){var c;c=this._super(a);c||(a=a.subId,"oj-label-help-icon"===a&&(c=this.widget().find(".oj-label-help-icon")[0]));return c||null},getSubIdByNode:function(a){var c=null;null!=a&&a===this.widget().find(".oj-label-help-icon")[0]&&
(c={subId:"oj-label-help-icon"});return c||this._superApply(arguments)},_destroy:function(){var b=this.ts.find(".oj-label-help-icon");this.wna(b);this.xna();this.ci=this.nM=this.qU=null;a.T.unwrap(this.element,this.ts);return this._super()}})})();a.J.$a("oj-label","baseComponent",{properties:{help:{type:"Object",properties:{definition:{type:"string"},source:{type:"string"}}},showRequired:{type:"boolean"},labelId:{type:"string"},"for":{type:"string"}},extension:{rj:"label",Ya:"ojLabel",RB:["accesskey"]}});
a.J.register("oj-label",{metadata:a.J.getMetadata("oj-label")})});