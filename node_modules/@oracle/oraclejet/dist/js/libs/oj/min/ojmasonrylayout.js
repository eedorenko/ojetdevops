/**
 * Copyright (c) 2014, 2017, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
define(["ojs/ojcore","jquery","ojs/ojcomponentcore","ojdnd","ojs/ojanimation"],function(a,g){function c(a,d,e,f,g,k){null==c.LY&&(c.LY=c.sIa());this.If=a;this.Vi=d;this.SDa=e;f&&f.Kwa&&(this.EUa=f.Kwa);g&&g.Lwa&&(this.s5=g.Lwa);k&&(k.IK&&(this.Kq=k.IK),k.mM&&(this.rr=k.mM),k.ata&&(this.Qia=k.ata),k.ita&&(this.$ia=k.ita),k.twa&&(this.vw=k.twa),k.Lta&&(this.hD=k.Lta),k.zwa&&(this.Yz=k.zwa),k.mua&&(this.rD=k.mua),k.lua&&(this.nr=k.lua),k.kua&&(this.fw=k.kua),k.wwa&&(this.kK=k.wwa),k.pd&&(this.YD=k.pd),
k.Mg&&(this.ZD=k.Mg),k.ad&&(this.Wo=k.ad));d=document.createElement("div");e=d.style;e.display="inline-block";e.overflow="hidden";e.visibility="hidden";f=document.createElement("div");e=f.style;e.display="inline-block";d.appendChild(f);a.insertBefore(d,a.firstChild);this.upa=d;this.W4=f;var l=this;this.fka=function(){l.$Ma()};this.h4=function(){l.qf()}}(function(){function b(a){for(;a;){a=a.nextSibling;var b=!0;if(a){var c=a.style;!c||c.visibility!==t&&c.display!==r||(b=!1)}if(a&&1===a.nodeType&&
b)return a}return null}function d(a,b){for(var c=a;c;){var d=c.style;if(d&&(d.visibility===t||d.display===r))break;d=c.parentNode;if(d===b)return c;c=d}return null}function e(a,b){return b.ze<a.ze?1:a.ze<b.ze?-1:0}function f(a){a&&a.sort(e);return a}function h(a){var b=null;if(a=g(a).attr("class").match(v))b=a[0].substring(u.length+1),a=b.indexOf("x"),b={colSpan:c.Ch(b.substring(0,a)),rowSpan:c.Ch(b.substring(a+1))};return b}function k(a){var b=null;(a=g(a).attr("class").match(v))&&(b=a[0]);return b}
function l(a,b){g(a).removeClass(b)}function m(a,b){g(a).addClass(b)}a.ib("oj.ojMasonryLayout",g.oj.baseComponent,{defaultElement:"\x3cdiv\x3e",widgetEventPrefix:"oj",options:{reorderHandle:null,animateStart:null,animateEnd:null,beforeInsert:null,insert:null,beforeRemove:null,remove:null,beforeResize:null,resize:null,beforeReorder:null,reorder:null},qc:function(){this._super();this.element.addClass("oj-masonrylayout oj-component");this.options.disabled&&a.D.warn(y);this.dB=this.eventNamespace+"ReorderHandle";
this.fb={};this.fb.fj=!1;this.fb.Bf=!1;this.fb.I9=!1;this.fb.fm=!1;this.fb.qn=!1;this.Tv();this.dH();this.sb(!0)},refresh:function(){this._super();var a="rtl"===this.Qc()!==this.wj;a&&this.$fa();this.sb(a)},Cq:function(){this._super();this.Lf?this.sb(this.Lf[0]):this.gi.hq(!0)},Dn:function(){this._super();this.Lf?this.sb(this.Lf[0]):this.gi.hq(!0)},Mi:function(a,b,c){this.mQa(b);(a=this.fb.Bf.children().not(".oj-helper-hidden"))&&0<a.length&&this.Oi(b,c,{launcher:g(b.target).closest(":tabbable")})},
sb:function(b){if(this.oH()){this.Lf=null;this.wj="rtl"===this.Qc();this.mv=a.T.ie();var d=this.element,e=this.options;if(b){var g=this;this.vw=function(a){g.hUa(a)};this.hD=function(a){g.ZMa(a)};this.Yz=function(a,b){return g.VD(a,b)};this.rD=function(){g.QOa()};this.nr=function(){g.POa()};this.fw=function(a){g.OOa(a)};if(!this.gi){var q={};q.Kwa=w;var n={};n.Lwa=x;var s={};s.IK=m;s.mM=l;s.ata=k;s.ita=h;s.twa=this.vw;s.Lta=this.hD;s.zwa=this.Yz;s.mua=this.rD;s.lua=this.nr;s.kua=this.fw;s.wwa=f;s.pd=
a.Components.pd;s.Mg=a.Components.Mg;s.ad=function(a){return g.Xh(a)};this.Gda();this.BSa();this.gi=new c(d[0],this.wj,"enabled"===a.sa.L6(),q,n,s)}this.Bja=function(a){g.GI(a)};this.xja=function(a){g.D1(a)};this.zja=function(a){g.F1(a)};this.yja=function(a){g.E1(a)};this.vja=function(a){g.C1(a)};this.Cja=function(a){g.G1(a)};e.reorderHandle&&this.hpa()}else this.Gda(),e=d.children(),this.f5(e),this.M4(e),this.GEa();this.gi.hq(b);b&&(this.Bl=function(){g.Dh()},a.T.Nl(d[0],this.Bl,I))}else d=!1,this.Lf&&
(d=this.Lf[0]),this.Lf=[b||d]},_destroy:function(){this.Ny();var b=this.element;a.T.dm(b[0],this.Bl);this.Bl=null;this.ySa();for(var c=this.er(),d=c.length,e=0;e<d;e++)delete c[e].ze;this.$fa();b.removeClass("oj-masonrylayout oj-component");this.options.reorderHandle&&this.Wpa();b.children("."+u).removeClass(u);this.mC=this.fw=this.nr=this.rD=this.Yz=this.hD=this.vw=this.Cja=this.vja=this.yja=this.zja=this.xja=this.Bja=null;this._super()},_setOption:function(b,c,d){var e=!1;switch(b){case "reorderHandle":this.Wpa();
e=!0;break;case "disabled":a.D.warn(y);break;case "contextMenu":a.T.ie()||(this.Ny(),c&&this.Tv(c))}this._super(b,c,d);e&&c&&this.hpa()},resizeTile:function(a,b){var c=this.gi;c.xU()&&c.JT();var d=g(a),e=d[0],f=k(e);if(b==f)throw Error("JET MasonryLayout: Unable to resize child "+a+" to style class "+b+" because "+b+" is already applied.");!1!==this._trigger("beforeResize",null,{tile:d,previousSizeStyleClass:f,sizeStyleClass:b})&&(this.fH||(this.fH=[]),this.fH.push(e,f,b),c.resizeTile(a,b))},insertTile:function(b,
c){var d=this.gi;d.xU()&&d.JT();isNaN(c)&&(c=-1);var e=g(b),f=e[0];e.addClass(u);!1!==this._trigger("beforeInsert",null,{tile:e,index:c})&&(f.Bla=c,d.Qp()&&e.addClass(x),e=f.style,e.top="-1px",this.wj?e.right="-1px":e.left="-1px",this.Uv(f,c),d.HZa(f,c),a.Components.pd(f),this.mC||(this.mC=[]),this.mC.push(b))},removeTile:function(b){var c=this.gi;c.xU()&&c.JT();var d=g(b),e=d[0];if(a.mf.rT(e)){var f=this.er(!0),e=f.indexOf(e);0<e&&(this.r_=f[e-1])}!1!==this._trigger("beforeRemove",null,{tile:d})&&
c.wZa(b)},Dh:function(){this.Mq||this.lka||this.gi.t0a()},hUa:function(a){var b=g(a),c=a.Bla;delete a.Bla;this.options.reorderHandle&&this.M4(b);this.GC.push("insert",{tile:b,index:c})},ZMa:function(b){var c=g(b);this.options.reorderHandle&&this.f5(c);c.removeClass(u);a.Components.Mg(b);b.parentNode.removeChild(b);this.$R(b);this.GC.push("remove",{tile:c})},VD:function(b,c){var d=(a.ic.Tc("oj-masonrylayout-option-defaults")||{}).animation;return a.ea.wi(b,c,d?d[c]:null,this)},QOa:function(){if(this.mC){for(var a=
this.gi,b=this.mC,c=0;c<b.length;c++)a.Z0a(b[c]);this.mC=null}if(this.fH){a=this.fH;for(c=0;c<a.length;c+=3){var b=a[c+1],d=a[c+2],b={tile:g(a[c]),previousSizeStyleClass:b,sizeStyleClass:d};this.GC.push("resize",b)}this.fH=null}this.Mq&&(this.GO?this.lLa():this.$Y&&this.wja())},POa:function(){this.lka=!0;this.oR=null;this.GC=[];var b=document.activeElement;b&&a.T.Vr(this.element[0],b)&&(this.oR=b)},OOa:function(b){this.lka=!1;var c=this.element[0];if(this.oR){var d=this.oR;this.oR=null;if(this.r_){if(d=
this.r_,this.r_=null,d&&a.T.Vr(c,d)){var c=this.er(c,!0),e=c.indexOf(d);0<=e&&e<c.length-1?a.mf.I6(c[e+1]):a.mf.I6(d)}}else a.T.Vr(c,d)?a.mf.XK(d):a.mf.I6(c)}b&&b();if(this.GC)for(b=this.GC,this.GC=null,d=0;d<b.length;d+=2)this._trigger(b[d],null,b[d+1])},$fa:function(){var a=this.gi;a&&a.destroy();this.gi=null},oH:function(){var a=document.createElement("div"),b=a.style;b.width="10px";b.height="10px";b=this.element[0];b.appendChild(a);var c=!1;try{c=0<a.offsetWidth&&0<a.offsetHeight}catch(d){}b.removeChild(a);
return c},er:function(a){for(var b=this.element.children(w),c=b.length,d=[],e=0;e<c;e++){var f=b[e];if(!a||a&&f!==this.yg){var g=f.style;g.visibility!==t&&g.display!==r&&d.push(f)}}return d},BSa:function(){var a=this.er();if(a)for(var b=0;b<a.length;b++){var c=a[b];c.ze||(c.ze=b+1)}},GEa:function(){var a=this.er();if(a)for(var b=0;b<a.length;b++){var c=a[b];c.ze||this.Uv(c,b)}},ySa:function(){var b=this.er(),c=this.er();f(c);for(var d=0;d<b.length;d++){var e=b[d],g=c[d];e!=g&&(a.Components.Mg(g),
e.parentNode.insertBefore(g,e),a.Components.pd(g),e=b.indexOf(g),e>d&&(b.splice(e,1),b.splice(d,0,g)))}},Uv:function(a,b){var c=this.er();0>b&&(b=c.length);if(c)for(var d=0;d<c.length;d++){var e=c[d];e.ze&&e.ze>=b+1&&e.ze++}a.ze=b+1},$R:function(a){if(a.ze){var b=this.er();if(b)for(var c=0;c<b.length;c++){var d=b[c];d.ze&&d.ze>a.ze&&d.ze--}delete a.ze}},Gda:function(){var a=this.element.children(),a=a.not("."+u),a=a.filter(function(a,b){return b.className.match(v)});a.addClass(u)},Tv:function(a){var b=
null,c=this.wq();a||c||this.Y()||(c=this.element.attr("contextmenu"))&&(this.options.contextMenu="#"+c);if(a||c){c=a||c;b=g.type(c);if("function"==b){try{c=c()}catch(d){c=null}g.type(c)}if(c){if(b=g(c)){b.css("display",r);c=this.fb;if(!c)return;c.Bf=b;c.fj=!0}this.fb.fj&&a&&this.dH()}}},dH:function(){if(this.fb&&this.fb.fj&&this.options.reorderHandle){var a=this.fb.Bf,b=this;if("OJ-MENU"===a[0].tagName)a[0].addEventListener("ojAction",this.Al.bind(this));else a.on("ojselect",this.Al.bind(this));var c=
!1;a.find("[data-oj-command]").each(function(){if(0===g(this).children("a").length){var d=g(this).attr("data-oj-command").slice(17),d=b.ql(d,"OJ-MENU"===a[0].tagName?this.tagName:"li");g(this).attr("id",d.attr("id"));"OJ-OPTION"===this.tagName?(this.innerHTML=d.get(0).innerHTML,g(this).attr("data-oj-command",d.attr("data-oj-command"))):(d.get(0).className=g(this).get(0).className,g(this).replaceWith(d));c=!0}});c&&("OJ-MENU"===a[0].tagName?a[0].refresh():a.ojMenu("refresh"));this.fb.I9=a.find("#"+
z);this.fb.fm=a.find("#"+A);this.fb.qn=a.find("#"+D)}},Ny:function(){var a=this.fb;a&&a.fj&&(a.fj=!1,"OJ-MENU"===a.Bf[0].tagName?a.Bf[0].removeEventListener("ojAction"):a.Bf.off("ojselect"),a.Bf=null)},mQa:function(a){var c=this.element,e=a.originalEvent.target,f=this.options.reorderHandle;a=!1;f&&(f=g(e).closest(f))&&0<f.length&&(a=!0);c=d(e,c[0]);this.fb.tile=c;if(this.fb.fj){var e=this.fb.vT,f=!1,h=this.fb.I9;if(h){var k=h.hasClass("oj-helper-hidden");a||k?a&&k&&(h.removeClass("oj-helper-hidden"),
f=!0):(h.addClass("oj-helper-hidden"),f=!0);var l=h.hasClass(q),k=!1;e&&c===e&&(k=!0);k&&!l?(h.addClass(q),f=!0):!k&&l&&(h.removeClass(q),f=!0)}if(h=this.fb.fm)k=h.hasClass("oj-helper-hidden"),a||k?a&&k&&(h.removeClass("oj-helper-hidden"),f=!0):(h.addClass("oj-helper-hidden"),f=!0),l=h.hasClass(q),k=!1,e&&c!==e&&c!==b(e)||(k=!0),k&&!l?(h.addClass(q),f=!0):!k&&l&&(h.removeClass(q),f=!0);if(h=this.fb.qn)k=h.hasClass("oj-helper-hidden"),a||k?a&&k&&(h.removeClass("oj-helper-hidden"),f=!0):(h.addClass("oj-helper-hidden"),
f=!0),a=h.hasClass(q),k=!1,e&&e!==c&&e!==b(c)||(k=!0),k&&!a?(h.addClass(q),f=!0):!k&&a&&(h.removeClass(q),f=!0);f&&(a=this.fb.Bf,"OJ-MENU"===a[0].tagName?a[0].refresh():a.ojMenu("refresh"))}},ql:function(a,b){var c=F[a],d=g(document.createElement(b));d.attr("id",c);d.attr("data-oj-command",a);d.append(this.Hy(a));return d},Hy:function(a){a=E[a];var b=g('\x3ca href\x3d"#"\x3e\x3c/a\x3e');b.text(this.R(a));return b},gPa:function(a){a&&(this.fb.vT=a)},Xla:function(a,b){if(a&&this.fb.vT){var c=this.fb.vT;
this.fb.vT=!1;this.iHa(c,a,b)}},iHa:function(a,c,d){var e=a.ze-1,f=g(a);if(!1!==this._trigger("beforeReorder",null,{tile:f,fromIndex:e})){this.$R(a);var h=c.ze-1;d||h++;var k=this.element[0];d||(c=b(c));this.Uv(a,h);k.insertBefore(a,c);this.gi.hq(!0);this._trigger("reorder",null,{tile:f,fromIndex:e,toIndex:h})}},Al:function(a,b){var c=(b?b.item:g(a.target)).attr("id");c===z?this.gPa(this.fb.tile):c===A?this.Xla(this.fb.tile,!0):c===D&&this.Xla(this.fb.tile,!1)},Zia:function(a){var b=this.er(!0);f(b);
for(var c=b.length,d=0;d<c;d++)if(b[d]===a)return d;return-1},hpa:function(){var a=this.element,b=a.children();this.M4(b);a.on("dragstart"+this.dB,this.Bja).on("dragenter"+this.dB,this.xja).on("dragover"+this.dB,this.zja).on("dragleave"+this.dB,this.yja).on("dragend"+this.dB,this.vja).on("drop"+this.dB,this.Cja)},M4:function(a){var b=this.options;a.filter(b.reorderHandle).attr(n,"true").addClass(s);a.find(b.reorderHandle).attr(n,"true").addClass(s)},Wpa:function(){var a=this.element,b=a.children();
this.f5(b);a.off(this.dB)},f5:function(a){var b=this.options;a.filter(b.reorderHandle).removeAttr(n).removeClass(s);a.find(b.reorderHandle).removeAttr(n).removeClass(s)},GI:function(a){var b=this.options;if(b.reorderHandle){var c=a.originalEvent.target,c=g(c).closest(b.reorderHandle);if(!c||1>c.length)return}b.reorderHandle&&!this.Mq&&(c=a.target,b=d(c,this.element[0]))&&(c=this.Zia(b),b.I2=c,c={tile:g(b),fromIndex:c},!1!==this._trigger("beforeReorder",null,c)&&(a=a.originalEvent,this.D_(b,a.pageX,
a.pageY,a.dataTransfer)))},D1:function(b){if(this.Mq){b=b.originalEvent;var c=b.relatedTarget,d=this.element[0],e=!1;c?e=d!=c&&!a.T.Vr(d,c):this.qga&&(e=(c=document.elementFromPoint(b.clientX,b.clientY))&&(c==d||a.T.Vr(d,c)));e&&((this.qga=!1,this.xv)?this.yg&&(g(this.yg).css("display",""),this.gi.hq(!1,!0)):b.dataTransfer.dropEffect="none")}},F1:function(a){if(!this.Mq)return!1;var b=a.originalEvent;b.dataTransfer.dropEffect="move";this.qHa(b.pageX,b.clientX,b.clientY);a.preventDefault();return!1},
E1:function(b){if(this.Mq){var c=b.originalEvent,d=c.relatedTarget;b=this.element[0];var e=!1;e=d?b!=d&&!a.T.Vr(b,d):(c=document.elementFromPoint(c.clientX,c.clientY))&&c!=b&&!a.T.Vr(b,c);e&&(this.qga=!0,this.yg&&(g(this.yg).css("display",r),this.gi.hq(!1,!0)))}},Jea:function(){if(this.sP){clearTimeout(this.sP);this.sP=null;var a=this.xv;a&&g(a).removeClass("oj-drag")}},C1:function(){this.Jea();if(this.Mq&&!this.bZ){var b=this.xv;if(b&&this.yg){var c=this.yg;a.T.Vr(this.element[0],b)&&(g(c).css("display",
""),this.$R(c),c.parentNode.removeChild(c),g(b).css("display",""),this.Uv(b,b.ze-1),this.gi.hq(!1,!0));delete b.I2}this.yg=this.xv=null;this.IO=this.GO=!1;this.C_=null;this.Mq=this.$Y=!1}},G1:function(a){if(!this.Mq)return!1;var b=this.gi;b.xU()&&b.JT();this.Jea();b=a.originalEvent;this.AHa(this.xv,b.pageX,b.pageY);a.stopPropagation();return!1},D_:function(b,c,d,e){this.Mq=!0;this.aZ=this.IO=this.bZ=!1;this.xv=b;var f=this.element[0],h=k(b),l=this.yg=document.createElement("div");l.ze=b.ze;l.className=
h+" oj-drop "+u;var h=l.style,m=b.style;h.top=m.top;this.wj?h.right=m.right:h.left=m.left;h=g(b).offset();f.insertBefore(l,b);this.C_=c={left:c-h.left,top:d-h.top};g(b).addClass("oj-drag");e.effectAllowed="move";e.setData("text/html",b.outerHTML);e.setDragImage(b,c.left,c.top);var q=this;this.sP=setTimeout(function(){q.aZ=!0;m.display=r;g(b).removeClass("oj-drag");q.sP=null;a.Components.jq(b)},0)},qHa:function(a,c,e){this.IO=!0;if(this.aZ&&!this.GO){var f=this.element[0];c=document.elementFromPoint(c,
e);c=d(c,f);e=!1;if(c){var h=g(c),k=this.options.reorderHandle;k&&(e=h.is(k)?!0:(e=h.find(k))&&0<e.length)}c&&c!==this.yg&&c!==this.xv&&e&&(h=g(f).offset(),e=b(this.yg),a=a-h.left>=c.offsetLeft+.5*c.offsetWidth,this.$R(this.yg),a&&!this.wj||!a&&this.wj?(a=b(c))?(this.Uv(this.yg,a.ze-1),f.insertBefore(this.yg,a)):(this.Uv(this.yg,c.ze),f.appendChild(this.yg)):(this.Uv(this.yg,c.ze-1),f.insertBefore(this.yg,c)),e!==b(this.yg)&&(this.GO=this.gi.hq(!1,!0)))}},lLa:function(){this.GO=!1},AHa:function(b,
c,d){this.bZ=!0;var e=this.element[0],f=this.yg;this.yg=null;a.Components.Mg(b);e.replaceChild(b,f);a.Components.pd(b);b.ze=f.ze;f=b.style;f.display="";a.Components.Bo(b);var h=g(e).offset(),k=this.C_;f.top=d-k.top-h.top+p;c=c-k.left-h.left;this.wj?(f.right=e.offsetWidth-(c+g(b).outerWidth(!0))+p,f.left=""):f.left=c+p;this.C_=null;this.IO?this.$Y=this.gi.hq(!1,!0):this.wja()},wja:function(){this.aZ=this.IO=this.bZ=this.Mq=this.$Y=!1;var a=this.xv;this.xv=null;var b=a.I2;delete a.I2;var c=this.Zia(a),
a={tile:g(a),fromIndex:b,toIndex:c};this._trigger("reorder",null,a)},Xh:function(b){var c=this.element,d=a.Context.getContext(c[0]).md(),e="MasonryLayout",c=c.attr("id"),e=e+(" (id\x3d'"+c+"')")+(": "+b);return d.ad({description:e})},getNodeBySubId:function(a){return this._super(a)},getSubIdByNode:function(a){return this._super(a)}});var p="px",t="hidden",r="none",n="draggable",q="oj-disabled",s="oj-draggable",u="oj-masonrylayout-tile",v=/oj-masonrylayout-tile-[0-9]+x[0-9]+/,w="."+u,x="oj-masonrylayout-tile-transition-show-from",
y="JET MasonryLayout: 'disabled' property not supported",z="ojmasonrylayoutcut",A="ojmasonrylayoutpastebefore",D="ojmasonrylayoutpasteafter",F={cut:z,"paste-before":A,"paste-after":D},E={cut:"labelCut","paste-before":"labelPasteBefore","paste-after":"labelPasteAfter"},I=25})();c.prototype.hq=function(a,c){var e=!1;a?(e=this.dg()?!0:!1,this.Ina()):(this.Wo&&(this.rl=this.Wo("performing layout (setup)")),this.nr&&this.nr(),this.t5(c),e=this.r5());return e};c.prototype.destroy=function(){this.qf();for(var a=
this.If,c=this.eD(),e=0;e<c.length;e++){var f=c[e].style;this.Vi?f.right="":f.left="";f.top=""}a.removeChild(this.upa);this.Wo=this.ZD=this.YD=this.kK=this.fw=this.nr=this.rD=this.Yz=this.hD=this.vw=this.$ia=this.Qia=this.rr=this.Kq=this.If=this.bt=this.Lq=this.Gn=this.Yo=this.Im=this.h4=this.fka=this.W4=this.upa=null};c.prototype.resizeTile=function(a,c){var e=this.If.querySelector(a);if(e){this.Yo||(this.Yo=[]);var f=this.Yo;f.push(e);f.push(c);this.Sna=!0;this.GJ()}};c.prototype.HZa=function(a,
c){var e=this.eD();this.kK&&this.kK(e);var f=null;0<=c&&c<e.length&&(f=e[c]);this.If.insertBefore(a,f);this.GJ()};c.prototype.Z0a=function(a){if(a=this.If.querySelector(a))this.Gn||(this.Gn=[]),this.Gn.push(a),this.V4=!0,this.pp!==c.$ba&&this.pp!==c.YN?this.GJ():this.V4=!1};c.prototype.wZa=function(a){if(a=this.If.querySelector(a))this.Lq||(this.Lq=[]),this.Lq.push(a),this.gka=!0,this.GJ()};c.prototype.t0a=function(){this.Sna||this.gka||this.V4||(this.Wo&&(this.rl=this.Wo("performing layout (resizeNotify)")),
this.nr&&this.nr(),this.t5(!1),this.r5())};c.prototype.Qp=function(){if(this.Ypa)return!1;this.nEa||(this.FDa=this.SDa?!1:c.iOa(c.LY[0],c.LY[1]),this.nEa=!0);return this.FDa};c.prototype.xU=function(){return null!=this.pp||null!=this.Im&&0<this.Im.length};c.prototype.JT=function(){this.Ypa=!0;this.ORa(this.s5);for(var a=this.eD(),d=0;d<a.length;d++){var e=a[d];e.$G&&delete e.$G}this.MI?(clearTimeout(this.MI),this.MI=null,this.yQ(null)):this.MQ?(this.MQ=!1,this.yQ(null)):this.UD?(clearTimeout(this.UD),
this.UD=null,this.U4()):this.pp===c.YN||null!=this.Im&&0<this.Im.length?this.jz(null):this.pp===c.aca&&this.U1(null);this.Ypa=!1};c.cJa=function(a){var d=c.iI(a);return{gk:a.offsetWidth+(c.Ch(d.marginLeft)+c.Ch(d.marginRight)),Sl:a.offsetHeight+(c.Ch(d.marginTop)+c.Ch(d.marginBottom))}};c.bJa=function(a){a=c.iI(a);return{paddingLeft:c.Ch(a.paddingLeft),paddingRight:c.Ch(a.paddingRight),paddingTop:c.Ch(a.paddingTop),paddingBottom:c.Ch(a.paddingBottom),borderLeftWidth:c.Ch(a.borderLeftWidth),borderRightWidth:c.Ch(a.borderRightWidth),
borderTopWidth:c.Ch(a.borderTopWidth),borderBottomWidth:c.Ch(a.borderBottomWidth)}};c.iI=function(a){var c=a.ownerDocument.defaultView,e=null;return e=c?c.getComputedStyle(a,null):a.currentStyle};c.Ch=function(a){return 0<a.length&&"auto"!=a?(a=parseInt(a,10),isNaN(a)&&(a=0),a):0};c.WY=function(a,c){if(a)for(var e=0;e<a.length;e++)if(a[e]==c)return e;return-1};c.iOa=function(a,c){var e=["gecko",16,"trident",6,"webkit",533.1],f=e.length;if(0==f%2)for(var g=0;g<=f-2;g+=2)if(a==e[g]){if(c>=e[1+g])return!0;
break}return!1};c.sIa=function(){var a=c.Tm,d=null,e=-1,f=navigator.userAgent.toLowerCase();-1!=f.indexOf("msie")||-1!=f.indexOf("trident")?(d="trident",e=a(f,/trident\/(\d+[.]\d+)/),-1==e&&(e=a(f,/msie (\d+\.\d+);/),-1==e&&(e=a(f,/msie (\d+\.\d+)b;/)),e-=4),null!=document.documentMode&&(e=Math.min(e,document.documentMode-4))):-1!=f.indexOf("applewebkit")?(d="webkit",e=a(f,/applewebkit\/(\d+([.]\d+)*)/)):-1!=f.indexOf("gecko/")&&(d="gecko",e=a(f,/rv:(\d+[.]\d+)/));return[d,e]};c.Tm=function(a,c){var e=
a.match(c);return e&&(e=e[1])?parseFloat(e):-1};c.nFa=function(a,c){return a.FV>c.FV?1:a.FV<c.FV?-1:a.EV>c.EV?1:a.EV<c.EV?-1:0};c.prototype.GJ=function(){this.NQ||(this.pp?this.L3||(this.L3=!0):(this.Wo&&(this.rl=this.Wo("performing layout")),this.NQ=setTimeout(this.fka,0)))};c.prototype.eD=function(){for(var a=this.If.querySelectorAll(this.EUa),c=[],e=0;e<a.length;e++){var f=a[e],g=f.style;0<f.offsetWidth&&0<f.offsetHeight&&"hidden"!=g.visibility&&c.push(f)}return c};c.prototype.r5=function(){var a=
this.Im,d=this.dg();if(this.Yo){var e=this.Yo;d||(d=[]);for(var f=0;f<e.length;f+=2){var g=e[f];0>c.WY(d,g)&&d.push(g)}}e=!1;if(!d||1>d.length){if(!a||1>a.length)this.Im=null,this.jz(null),e=!0}else this.Im=d;a=null!=d&&0<d.length;this.Qp()||e||this.jz(null);return a};c.prototype.dg=function(){var a=this.If,d=this.eD();this.kK&&this.kK(d);var e=this.rH=null;this.pv=0;this.Na=1;this.xD=null;var f=[],g=[],k=[],l=this.Vi,m=c.bJa(a),p=0,t=[];this.Ida=t;for(var r=0;r<d.length;r++){var n=d[r];n.$G&&(this.rH=
n.$G,delete n.$G);var q=this.$ia(n);this.rH||(this.rH=this.oEa(n,q));e=this.rH;this.xD||(this.pv=Math.max(Math.floor((a.offsetWidth-m.paddingLeft-m.paddingRight-m.borderLeftWidth-m.borderRightWidth)/e.gk),1),this.vNa(this.pv,this.Na),p=this.pv);q.colSpan>p&&(p=q.colSpan);q.colSpan>this.pv&&(q.colSpan=this.pv);for(var s=!1,u=0;u<this.Na;u++){for(var v=0;v<this.pv;v++)if(this.iIa(v,u,q)){var s=n.style,w={top:s.top};l?w.right=s.right:w.left=s.left;g.push(w);this.B3(n,v,u,q,e,m);l&&k.push(v);s=!0;t.push({EV:v,
FV:u,tile:n});break}if(s)break;u===this.Na-1&&this.kda()}}if(e&&(a=this.W4.style)){p*=e.gk;e=this.Na*e.Sl;k=a.width?c.Ch(a.width.toString()):0;m=a.height?c.Ch(a.height.toString()):0;if(k>p||m>e)this.lC={},this.lC.width=p+"px",this.lC.height=e+"px";a.width=(k>p?k:p)+"px";a.height=(m>e?m:e)+"px"}for(r=0;r<d.length;r++)n=d[r],s=n.style,w=g[r],""!=w.top&&(l&&parseInt(s.right,10)!==parseInt(w.right,10)||!l&&parseInt(s.left,10)!==parseInt(w.left,10)||parseInt(s.top,10)!==parseInt(w.top,10))&&(f.push(n),
this.pR&&0>c.WY(this.Yo,n)&&this.Ada(n,this.c4?"reorder":"move"));1>f.length&&(f=null);return f};c.prototype.uVa=function(){if(this.lC){var a=this.W4.style;a.width=this.lC.width;a.height=this.lC.height;delete this.lC}};c.prototype.Ina=function(){var a=this.Ida;this.Ida=null;for(var a=a.sort(c.nFa),d=this.eD(),e=0;e<d.length;e++){var f=d[e],g=a[e].tile;f!=g&&(this.ZD(g),f.parentNode.insertBefore(g,f),this.YD(g),f=c.WY(d,g),f>e&&(d.splice(f,1),d.splice(e,0,g)))}};c.prototype.vNa=function(a,c){for(var e=
this.xD=[],f=0;f<c;f++){var g=[];e.push(g);for(var k=0;k<a;k++)g[k]=!1}};c.prototype.kda=function(){this.Na++;var a=[];this.xD.push(a);for(var c=0;c<this.pv;c++)a[c]=!1};c.prototype.iIa=function(a,c,e){var f=e.colSpan;e=e.rowSpan;for(var g=c;g<c+e;g++){g>=this.Na&&this.kda();for(var k=a;k<a+f;k++)if(k>=this.pv||this.xD[g][k])return!1}return!0};c.prototype.B3=function(a,c,e,f,g,k){var l=f.colSpan;f=f.rowSpan;for(var m=this.xD,p=e;p<e+f;p++)for(var t=c;t<c+l;t++)m[p][t]=!0;a=a.style;a.top=k.paddingTop+
e*g.Sl+"px";this.Vi?a.right=k.paddingRight+c*g.gk+"px":a.left=k.paddingLeft+c*g.gk+"px"};c.prototype.ORa=function(a){for(var c=this.eD(),e=0;e<c.length;e++)this.rr(c[e],a)};c.prototype.Ada=function(a,c){if(this.Qp()){var e=this;e.Yz(a,c).then(function(){e.pR&&e.jz(a)})}};c.prototype.t5=function(a){this.pR||(this.c4=a,this.pR=!0)};c.prototype.jz=function(a){var d=!0;if(this.Im){var e=this.Im;if(a)for(var f=0;f<e.length;f++){if(a===e[f]){e=this.Im=[];break}}else this.Qp()||(e=this.Im=[]);0<e.length&&
(d=!1)}if(d){if(this.Yo&&(a=this.Yo,this.Yo=null,this.Qp()))for(f=0;f<a.length;f+=2);this.c4&&(this.c4=!1);this.V4=this.gka=this.Sna=this.pR=!1;this.Ina();this.rD&&this.rD();this.uVa();if(this.pp===c.YN)if(this.Qp()){var g=this;this.UD=setTimeout(function(){g.U4()},0)}else this.U4();else this.pp||this.fw&&this.fw(this.h4)}};c.prototype.oEa=function(a,d){var e=c.cJa(a);return{gk:e.gk/d.colSpan,Sl:e.Sl/d.rowSpan}};c.prototype.$Ma=function(){this.NQ&&(clearTimeout(this.NQ),this.NQ=null);this.nr&&this.nr();
this.pp=c.$ba;if(this.Lq&&this.Qp()){var a=this.Lq,d=this;this.MQ=!0;for(var e=0;e<a.length;e++){var f=a[e];this.Yz(f,"remove").then(function(){d.yQ(f)})}}else this.yQ(null)};c.prototype.yQ=function(a){this.MI?(clearTimeout(this.MI),this.MI=null):this.MQ&&(this.MQ=!1);if(a){var d=this.Lq;if(d){for(var e=0;e<d.length;e++){var f=d[e];if(f===a){d.splice(e,1);this.bt||(this.bt=[]);var g=this.bt;g.push(a);break}}1>d.length&&(this.Lq=null)}}else if(!this.Qp()&&(d=this.Lq)){for(e=0;e<d.length;e++)f=d[e],
this.bt||(this.bt=[]),g=this.bt,g.push(f);this.Lq=null}if(!this.Lq){if(this.bt){g=this.bt;for(e=0;e<g.length;e++)a=g[e],d=a.style,this.Vi?d.right="":d.left="",d.top="",this.hD&&this.hD(a);this.bt=null}this.pp=c.YN;this.t5(!1);if(this.Yo)for(g=this.Yo,e=0;e<g.length;e+=2)a=g[e],d=g[e+1],f=this.Qia(a),this.Qp()&&(a.$G=this.rH,this.Ada(a,"resize")),this.rr(a,f),this.Kq(a,d);this.r5()}};c.prototype.U4=function(){this.UD&&(clearTimeout(this.UD),this.UD=null);this.pp=c.aca;if(this.Gn&&this.Qp())for(var a=
this,d=this.Gn,e=0;e<d.length;e++){var f=d[e];this.rr(f,this.s5);this.Yz(f,"insert").then(function(){a.U1(f)})}else{if(this.Gn)for(d=this.Gn,e=0;e<d.length;e++)f=d[e],this.rr(f,this.s5);this.U1(null)}};c.prototype.U1=function(a){if(a){var c=this.Gn;if(c){for(var e=0;e<c.length;e++){var f=c[e];if(f===a){c.splice(e,1);this.vw&&this.vw(a);break}}1>c.length&&(this.Gn=null)}}else if(!this.Qp()&&(c=this.Gn)){for(e=0;e<c.length;e++)f=c[e],this.vw&&this.vw(f);this.Gn=null}this.Gn||(this.pp=null,this.fw&&
this.fw(this.h4),this.L3&&(this.L3=!1,this.GJ()))};c.prototype.qf=function(){this.rl&&(this.rl(),this.rl=null)};c.$ba=1;c.YN=2;c.aca=3;a.J.$a("oj-masonry-layout","baseComponent",{properties:{reorderHandle:{type:"string"}},methods:{insertTile:{},removeTile:{},resizeTile:{}},events:{animateEnd:{},animateStart:{},beforeInsert:{},beforeRemove:{},beforeReorder:{},beforeResize:{},insert:{},remove:{},reorder:{},resize:{}},extension:{Ya:"ojMasonryLayout"}});a.J.register("oj-masonry-layout",{metadata:a.J.getMetadata("oj-masonry-layout")})});