/**
 * @license
 * Copyright (c) 2014, 2018, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";define(["ojs/ojcore","jquery","ojs/ojcomponentcore","ojs/ojoption"],function(t,e){!function(){var n,o;t.__registerWidget("oj.ojButton",e.oj.baseComponent,{defaultElement:"<button>",widgetEventPrefix:"oj",options:{chroming:"full",disabled:!1,display:"all",label:null,icons:{start:null,end:null},menu:null,action:null},_InitOptions:function(t,e){this._super(t,e),this._IsCustomElement()&&this._processSlots(),this._initButtonTypes(),"disabled"in e||this.option("disabled",!!this.element.prop("disabled"),{_context:{internalSet:!0}}),"label"in e||(this.keepDomLabel=!0,this.option("label","inputPush"===this.type?this.buttonElement.val():this.buttonElement.html(),{_context:{internalSet:!0}})),this._IsCustomElement()||!this.options.menu||e.icons&&void 0!==e.icons.end||this.option("icons.end","oj-component-icon oj-button-menu-dropdown-icon",{_context:{writeback:!0,internalSet:!0}})},_ComponentCreate:function(){this._super(),this.menuEventNamespace=this.eventNamespace+"menu",this._initButtonTypes2(),this.hasTitle=!!this.rootElement.attr("title");var i=this,a=(this.options,this._isToggle),l=a?"":"oj-active";this.rootElement.addClass(s),u(this.rootElement,this.options.chroming);var r=function(){i.rootElement.removeClass(l),i.rootElement.removeClass("oj-hover"),i._toggleDefaultClasses()};if(this.buttonElement.bind("touchstart"+this.eventNamespace,function(){i._IsEffectivelyDisabled()||(i.rootElement.addClass(l),i._toggleDefaultClasses(),i.document.one("touchend",r))}).bind("touchend"+this.eventNamespace+" touchcancel"+this.eventNamespace,r).bind("mouseenter"+this.eventNamespace,function(){i._IsEffectivelyDisabled()||t.DomUtils.recentTouchEnd()||(this===n&&i.rootElement.addClass("oj-active"),i.rootElement.addClass("oj-hover").removeClass("oj-default oj-focus-only"))}).bind("mouseleave"+this.eventNamespace,function(){i.rootElement.removeClass("oj-hover"),i._IsEffectivelyDisabled()||(i.rootElement.removeClass(l),i._toggleDefaultClasses())}),this._disabledClickHandler=function(t){i._IsEffectivelyDisabled()&&(t.preventDefault(),t.stopImmediatePropagation())},this._ojActionClickHandler=function(t){i._trigger("action",t,{})},this._IsCustomElement()?(this.rootElement[0].addEventListener("click",this._disabledClickHandler,!0),this.rootElement[0].addEventListener("click",this._ojActionClickHandler,!1)):this.buttonElement[0].addEventListener("click",this._disabledClickHandler,!0),this._focusable({element:this.rootElement,applyHighlight:!0,afterToggle:function(){i._toggleDefaultClasses()}}),a&&(this.element.bind("change"+this.eventNamespace,function(t){i._applyCheckedStateFromDom(!0);var e=i._getEnclosingContainerComponent("buttonset"),n=e&&e._getCheckedFromDom(e.$buttons);e&&void 0!==n&&e.option("checked",n,{_context:{writeback:!0,originalEvent:t,internalSet:!0}})}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(t){i._IsEffectivelyDisabled()||(o=this,i.document.one("mouseup",function(){o=null}))}).bind("mouseup"+this.eventNamespace,function(t){i._IsEffectivelyDisabled()||this===o&&i.element.focus()})),"checkbox"===this.type)this.buttonElement.bind("click"+this.eventNamespace,function(t){if(i._IsEffectivelyDisabled())return!1}),this.element.bind("keyup"+this.eventNamespace,function(t){t.keyCode===e.ui.keyCode.ENTER&&(i._IsEffectivelyDisabled()||i.element.click())});else if("radio"===this.type)this.buttonElement.bind("click"+this.eventNamespace,function(){if(i._IsEffectivelyDisabled())return!1}),this.element.bind("keyup"+this.eventNamespace,function(t){t.keyCode===e.ui.keyCode.ENTER&&(i.element[0].checked||i._IsEffectivelyDisabled()||(i.element[0].checked=!0,i.element.change(),i.element.click()))});else if(this.buttonElement.bind("mousedown"+this.eventNamespace,function(e){if(i._IsEffectivelyDisabled())return!1;1!==e.which||t.DomUtils.recentTouchEnd()||(i.rootElement.addClass("oj-active").removeClass("oj-default oj-focus-only"),n=this,i.document.one("mouseup",function(){n=null}))}).bind("mouseup"+this.eventNamespace,function(){if(i._IsEffectivelyDisabled())return!1;i.rootElement.removeClass("oj-active"),i._toggleDefaultClasses()}).bind("keydown"+this.eventNamespace,function(t){if(i._IsEffectivelyDisabled())return t.keyCode===e.ui.keyCode.TAB||t.keyCode===e.ui.keyCode.LEFT||t.keyCode===e.ui.keyCode.RIGHT;var n=t.keyCode===e.ui.keyCode.SPACE,o="anchor"===i.type;o&&n&&t.preventDefault(),(n&&!o||t.keyCode===e.ui.keyCode.ENTER)&&i.rootElement.addClass("oj-active").removeClass("oj-default oj-focus-only")}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){i.rootElement.removeClass("oj-active"),i._toggleDefaultClasses()}),"anchor"===this.type){var h=this.buttonElement.attr("tabindex");(null===h||isNaN(h))&&this.buttonElement.attr("tabindex","0")}this.options.disabled&&this._manageAnchorTabIndex(!1,!0),this._updateEffectivelyDisabled();var c=i._getEnclosingContainerComponent("buttonset");this._IsCustomElement()||c&&c._IsCustomElement()?this._setDisplayOptionOnDom():this._handleLabelAndIconsAtCreateTime(),this._setupMenuButton(null),this._toggleDefaultClasses()},_NotifyContextMenuGesture:function(t,e,n){this._OpenContextMenu(e,n,{position:{of:"keyboard"===n?this.rootElement:e}})},_processSlots:function(){var n=this,o=this.element[0],s=o.parentNode,i="OJ-MENU-BUTTON"===s.tagName,a=t.BaseCustomElementBridge.getSlotMap(s);if(i)var l=["startIcon","","endIcon","menu"];else l=["startIcon","","endIcon"];e.each(l,function(t,n){a[n]&&""!=n&&e.each(a[n],function(t,e){o.appendChild(e)})}),e(s).children().not(o).not("[slot='contextMenu']").remove();var r=t.BaseCustomElementBridge.getSlotMap(o);e.each(l,function(t,s){r[s]&&e.each(r[s],function(t,i){if(o.appendChild(i),""===s){var a=i,l=a;3===a.nodeType&&(l=document.createElement("span"),e(a).replaceWith(l),l.appendChild(a)),e(l).addClass("oj-button-text"),n._setTextSpanIdAndLabelledBy(e(l))}else if("startIcon"===s)e(i).addClass("oj-button-icon"),e(i).addClass("oj-start");else if("endIcon"===s)e(i).addClass("oj-button-icon"),e(i).addClass("oj-end");else if("menu"===s&&(e(i).uniqueId(),n.menuSlot="#"+i.id,void 0===r.endIcon)){var u=document.createElement("span");u.className="oj-button-icon oj-end oj-component-icon oj-button-menu-dropdown-icon",u.slot="endIcon",o.insertBefore(u,i)}})});var u=e("<div>");u.addClass("oj-button-label"),e(o).children().wrapAll(u)},_getMenuNode:function(){return this._IsCustomElement()?this.menuSlot:this.options.menu},_initButtonTypes:function(){if(this.element.is("input[type=checkbox]"))this.type="checkbox",this._isToggle=!0;else if(this.element.is("input[type=radio]"))this.type="radio",this._isToggle=!0;else if(this.element.is("input[type=button],input[type=submit],input[type=reset]"))this.type="inputPush";else if(this.element.is("button"))this.type="button";else{if(!this.element.is("a"))throw new Error("JET Button not supported on this element type");this.type="anchor"}if(this._isToggle){var t="label[for='"+this.element.attr("id")+"']";this.buttonElement=this.element.siblings().filter(t)}else this.buttonElement=this.element},_initButtonTypes2:function(){this._isToggle?(this.buttonElement.addClass("oj-button-label"),this.element.addClass("oj-button-input oj-helper-hidden-accessible").attr("data-oj-internal","").add(this.buttonElement).wrapAll("<span></span>"),this.rootElement=this.element.parent(),this.rootElement.addClass("oj-button-jqui oj-button-toggle"),this.element[0].checked&&this.rootElement.addClass("oj-selected").removeClass("oj-default oj-focus-only")):this._IsCustomElement()?(this.rootElement=this.element.parent(),this.element.addClass("oj-button-button")):(this.rootElement=this.element,this.element.addClass("oj-button-jqui"))},widget:function(){return this.rootElement},_destroy:function(){this._removeMenuBehavior(this._getMenuNode()),this.buttonElement[0].removeEventListener("click",this._disabledClickHandler,!0),this.buttonElement[0].removeEventListener("click",this._ojActionClickHandler,!1),this.element.removeClass("oj-helper-hidden-accessible").removeAttr("aria-labelledby").removeUniqueId(),this.options.disabled&&this._manageAnchorTabIndex(!0,!1);var e=this._isToggle;e||this.rootElement.removeClass(s+" oj-button-jqui "+i+" "+a+" "+l),this.buttonElement.html(this.buttonElement.find(".oj-button-text").html()),e?(this.buttonElement.removeClass("oj-button-label"),t.DomUtils.unwrap(this.element)):this.hasTitle||this.rootElement.removeAttr("title"),o===this.buttonElement[0]&&(o=null)},_NotifyDetached:function(){this._super(),this._toggleDefaultClasses()},__setAncestorComponentDisabled:function(t){this._super(t),this._updateEffectivelyDisabled()},_updateEffectivelyDisabled:function(){var t=this._IsEffectivelyDisabled();this.rootElement.toggleClass("oj-disabled",t),this.rootElement.toggleClass("oj-enabled",!t),"anchor"!==this.type?(this.element.prop("disabled",t),this.rootElement.removeAttr("aria-disabled")):(this.element.attr("aria-disabled",t),this._IsCustomElement()&&this.rootElement.removeAttr("aria-disabled")),t?(this.widget().removeClass("oj-active oj-default oj-focus-only oj-hover oj-focus oj-focus-highlight"),n=null,this._dismissMenu(this._getMenuNode())):this._toggleDefaultClasses()},_setOption:function(t,e,n){var o=this.options[t];switch(this._super(t,e,n),t){case"chroming":u(this.rootElement,e);break;case"disabled":this._manageAnchorTabIndex(o,e),this._updateEffectivelyDisabled();break;case"label":this._setLabelOption();break;case"display":"inputPush"!==this.type&&this._setDisplayOptionOnDom();break;case"icons":this._setIconsOption(!0);break;case"menu":this._setupMenuButton(o)}},refresh:function(){this._super(),this._ancestorDisabled&&!this._getEnclosingContainerElement("buttonset").length&&this.__setAncestorComponentDisabled(!1),u(this.rootElement,this.options.chroming)},_applyCheckedStateFromDom:function(t){"radio"===this.type?(t?h(this.element[0]):this.element).each(function(){var t=e(this).data("oj-ojButton");this.checked?t.rootElement.addClass("oj-selected").removeClass("oj-default oj-focus-only"):(t.rootElement.removeClass("oj-selected"),t._toggleDefaultClasses())}):"checkbox"===this.type&&(this.element[0].checked?this.rootElement.addClass("oj-selected").removeClass("oj-default oj-focus-only"):(this.rootElement.removeClass("oj-selected"),this._toggleDefaultClasses()))},_handleLabelAndIconsAtCreateTime:function(){if("inputPush"===this.type)this._setLabelOnDomOfSpanlessButton();else{var t=this._setLabelOnDomAtCreateTime(),e=this._setIconOnDom(!0),n=this._setIconOnDom(!1);this._setDisplayOptionOnDom(t,e,n)}},_setLabelOnDomAtCreateTime:function(){var t=this.buttonElement,n=e("<span class='oj-button-text'></span>",this.document[0]);if(this.keepDomLabel?n.append(t.contents()):(t.empty(),n.text(this.options.label)),"button"===this.type){var o=e("<div></div>").addClass("oj-button-label");o.append(n),this.element.append(o)}else t.append(n);return"button"!==this.type&&"anchor"!==this.type||this.element[0].hasAttribute("aria-label")||this.element[0].hasAttribute("aria-labelledby")||this._setTextSpanIdAndLabelledBy(n),n},_setTextSpanIdAndLabelledBy:function(t){t.uniqueId(),this.element.attr("aria-labelledby",t.attr("id"))},_setLabelOption:function(){if("inputPush"===this.type)this._setLabelOnDomOfSpanlessButton();else{var t=this.buttonElement.find(".oj-button-text");t.text(this.options.label),this._setDisplayOptionOnDom(t)}},_setLabelOnDomOfSpanlessButton:function(){this.options.label&&this.element.val(this.options.label)},_setIconsOption:function(){if("inputPush"!==this.type){var t=this._setIconOnDom(!0),e=this._setIconOnDom(!1);this._setDisplayOptionOnDom(void 0,t,e)}},_setIconOnDom:function(t){var n=this.buttonElement;if("button"===this.type&&(n=this.element.children("div.oj-button-label")),t)var o=".oj-button-icon.oj-start",s="oj-button-icon oj-start",i=this.options.icons.start,a="_lastStartIcon",l="prependTo";else o=".oj-button-icon.oj-end",s="oj-button-icon oj-end",i=this.options.icons.end,a="_lastEndIcon",l="appendTo";var r=n.find(o);if(i){if(r.length){var u=this[a];r.removeClass(u)}else r=e("<span></span>").addClass(s)[l](n);r.addClass(i)}else r.remove();return this[a]=i,!!i},_setDisplayOptionOnDom:function(t,n,o){var s=this.buttonElement.children(".oj-button-label");if(!s.length){var i=this._getEnclosingContainerComponent("buttonset");s=this._IsCustomElement()||i&&i._IsCustomElement()?this.buttonElement.children("oj-option"):this.buttonElement}void 0===t&&(t=s.children(".oj-button-text")),void 0===n&&(n=!!this.options.icons.start||s.children("[slot='startIcon']").length),void 0===o&&(o=!!this.options.icons.end||s.children("[slot='endIcon']").length);var l=n&&o,r=n||o,u="icons"===this.options.display;if(r&&u){if(t.addClass("oj-helper-hidden-accessible"),!this.hasTitle){var h=t.text();this.rootElement.attr("title",e.trim(h))}}else t.removeClass("oj-helper-hidden-accessible"),this.hasTitle||this.rootElement.removeAttr("title");var c=r?u?l?"oj-button-icons-only":"oj-button-icon-only":l?"oj-button-text-icons":n?"oj-button-text-icon-start":"oj-button-text-icon-end":"oj-button-text-only";this.rootElement.removeClass(a).addClass(c)},_manageAnchorTabIndex:function(t,e){if(!t!=!e&&"anchor"===this.type&&!this._getEnclosingContainerElement("buttonset").length&&!this._getEnclosingContainerElement("toolbar").length)if(e){var n=this.element.attr("tabindex");this._oldAnchorTabIndex=this._isInteger(Number(n))?n:null,this.element.attr("tabindex",-1)}else null==this._oldAnchorTabIndex?this.element.removeAttr("tabindex"):this.element.attr("tabindex",this._oldAnchorTabIndex)},_isInteger:function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},_selectorMap:{buttonset:".oj-buttonset",toolbar:".oj-toolbar"},_constructorMap:{buttonset:"ojButtonset",toolbar:"ojToolbar"},_getEnclosingContainerElement:function(t){return this.rootElement.closest(this._selectorMap[t])},_getEnclosingContainerComponent:function(e){var n=this._getEnclosingContainerElement(e)[0],o=t.Components.__GetWidgetConstructor(n,this._constructorMap[e]);return o&&o("instance")},_setupMenuButton:function(t){if(this._getMenuNode()&&this.element.is("input"))throw new Error("Menu Button functionality is not supported on input elements.");if(this._removeMenuBehavior(t),this._getMenuNode()){var n=this;this.element.attr("aria-haspopup",!0).on("keydown"+this.menuEventNamespace,function(t){if(t.which===e.ui.keyCode.DOWN)return n._showMenu(t,"firstItem"),t.preventDefault(),!0;if(t.which===e.ui.keyCode.ESCAPE){var o=!n.rootElement.hasClass("oj-selected");return n._dismissMenu(n._getMenuNode(),t),o}return!0}).on("click"+this.menuEventNamespace,function(t){var e=n._getMenu();return e.__spaceEnterDownInMenu||n._showMenu(t,"firstItem"),e.__spaceEnterDownInMenu=!1,t.preventDefault(),!0})}},_removeMenuBehavior:function(t){this.element.removeAttr("aria-haspopup").off(this.menuEventNamespace),this._dismissMenu(t),e(t).off(this.menuEventNamespace),this._menuListenerSet=!1},_getMenu:function(){var t=this._getMenuOnly(this._getMenuNode());if(!t)throw new Error('JET Button: "menu" option specified, but does not reference a valid JET Menu.');if(!this._menuListenerSet){var e=this;if(this._IsCustomElement())n="ojClose";else var n="ojclose";t.widget().on(n+this.menuEventNamespace,function(t,n){e._menuDismissHandler(t)}),this._menuListenerSet=!0}return t},_getMenuOnly:function(n){var o=t.Components.__GetWidgetConstructor(e(n)[0],"ojMenu");return o&&o("instance")},_showMenu:function(t,e){if(!this._IsEffectivelyDisabled()){var n=this._getMenu(),o=n.widget();n.open(t,{launcher:this.element,initialFocus:e}),o.is(":visible")&&(this._menuVisible=!0,o.attr("aria-label")||o.attr("aria-labelledby")||(this.element.uniqueId(),this._setAriaLabelledBy=!0,o.attr("aria-labelledby",this.element.attr("id"))),this.rootElement.addClass("oj-selected").removeClass("oj-default oj-focus-only"))}},_dismissMenu:function(t,e){if(this._menuVisible){var n=this._getMenuOnly(t);n&&(n.__collapseAll(e,!0),n.__dismiss(e))}},_menuDismissHandler:function(t){this._setAriaLabelledBy&&(e(this._getMenuNode()).removeAttr("aria-labelledby"),this._setAriaLabelledBy=!1),this.rootElement.removeClass("oj-selected"),this._toggleDefaultClasses(),this._menuVisible=!1},_toggleDefaultClasses:function(){var t,e;if(this.rootElement.is(".oj-hover, .oj-active, .oj-selected, .oj-disabled"))t=!1,e=!1;else{var n=this.rootElement.is(".oj-focus");t=!n,e=n}this.rootElement.toggleClass("oj-default",t),this.rootElement.toggleClass("oj-focus-only",e)}}),t.__registerWidget("oj.ojButtonset",e.oj.baseComponent,{_items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a",widgetEventPrefix:"oj",options:{checked:null,chroming:"full",display:"all",focusManagement:"oneTabstop"},_setCheckedOnDom:function(t,n){var o,s=e.type(t);if((o="OJ-BUTTONSET-MANY"===this.element[0].tagName||n.length>0&&n.filter("input[type=checkbox]").length===n.length)&&"array"!=s)throw new Error("Invalid 'checked' value set on JET Buttonset: "+t);if(!o&&n.length>0){var i=n[0].name;(i||n.length<=1)&&(n.filter("input[type=radio][name="+i+"]").length,n.length)}if(!(this._setCheckedOnButtons(t,n,s,o)||null===t||this._IsCustomElement()&&n.length!==this.element.children().length))throw new Error("Invalid 'checked' value set on JET Buttonset: "+t)},_setCheckedOnButtons:function(t,e,n,o){var s=this._shallowCompare(t,e,o);return this._shouldDeepCompare(t,o,s)&&(s=this._deepCompare(t,e,o,s)),o?s===t.length:1===s},_shallowCompare:function(t,e,n){var o=this,s=0;return e.each(function(){var e=o._getInputValue(this);(n?t.indexOf(e)>-1:e===t)?(this.checked=!0,s++):this.checked=!1}),s},_shouldDeepCompare:function(t,e,n){return e?n!==t.length:!n},_deepCompare:function(t,e,n,o){var s=this;return e.each(function(){var e=s._getInputValue(this);if(n)for(var i=0;i<t.length;i++)s._deepCompareValues(e,t[i])&&(this.checked=!0,o++);else s._deepCompareValues(e,t)&&(this.checked=!0,o++)}),o},_deepCompareValues:function(n,o){return"object"==e.type(n)&&n.ojCompareValues?0===n.ojCompareValues(n,o):t.Object.compareValues(n,o)},_getInputValue:function(t){return this._IsCustomElement()?this._getOjOptionFromInput(t).value:t.value},_getOjOptionFromInput:function(t){return e(t).prev().children()[0]},_getCheckedFromDom:function(t){var e=void 0,n=null,o=null,s=this;return t.each(function(t){if("input"!==this.tagName.toLowerCase())return e=void 0,!1;var i,a,l=this.type.toLowerCase();if("radio"===l)i=!0,a=this.name.toLowerCase();else{if("checkbox"!==l)return e=void 0,!1;i=!1,a=null}if(void 0!==e&&(i!==n||a!==o||n&&!o))return e=void 0,!1;var r=s._getInputValue(this);void 0===e?(e=i?this.checked?r:null:this.checked?[r]:[],n=i,o=a):this.checked&&(n?e=r:e.push(r))}),e},_CompareOptionValues:function(t,n,o){return"checked"===t?n===o||"array"===e.type(n)&&"array"===e.type(o)&&this._compareArraysAsSets(n,o):this._superApply(arguments)},_compareArraysAsSets:function(t,e){return!t.some(function(t){return e.indexOf(t)<0})&&!e.some(function(e){return t.indexOf(e)<0})},_removeNonOjOptions:function(){this.element.children(":not(oj-option)").remove()},_processOjOptions:function(){var t=this,n=this.element.find("oj-option");e.each(n,function(e,n){n.customOptionRenderer=t._customOptionRenderer.bind(t)})},_customOptionRenderer:function(t){this._removeOptionDecoration(t),this._addOptionDecoration(t)},_addOptionDecoration:function(t){var n=e(t);this._addOptionClasses(t);var o="OJ-BUTTONSET-ONE"===this.element[0].tagName,s=o?"radio":"checkbox",i=t.value,a=t.disabled,l=e("<input>"),r=e("<label>");l.uniqueId(),l.prop("value",i),l.prop("type",s),l.prop("disabled",a);var u=l[0].id;r.prop("for",u),o&&(this._name||(this._name="_n_"+u),l.prop("name",this._name)),n.before(r),r.append(n),r.after(l),this._setup(!1),this._setCheckedOnDom(this.options.checked,this.$buttons)},_removeOptionDecoration:function(t){var n=e(t).parent();if("LABEL"===n.prop("tagName")){this._removeOptionClasses(t);var o=n.siblings(".oj-button-input");o.ojButton("destroy"),o.removeUniqueId(),o.remove(),n.replaceWith(t)}},_addOptionClasses:function(n){var o=t.BaseCustomElementBridge.getSlotMap(n),s=o[""]?o[""]:null,i=o.startIcon?o.startIcon[0]:null,a=o.endIcon?o.endIcon[0]:null;if(i&&(e(i).addClass("oj-button-icon"),e(i).addClass("oj-start")),s)for(var l=0;l<s.length;l++){var r=s[l],u=r;3===r.nodeType&&(u=e("<span>"),e(r).replaceWith(u),u.append(r)),e(u).addClass("oj-button-text")}a&&(e(a).addClass("oj-button-icon"),e(a).addClass("oj-end"))},_removeOptionClasses:function(n){var o=t.BaseCustomElementBridge.getSlotMap(n),s=o[""]?o[""]:null,i=o.startIcon?o.startIcon[0]:null,a=o.endIcon?o.endIcon[0]:null;if(i&&(e(i).removeClass("oj-button-icon"),e(i).removeClass("oj-start")),s)for(var l=0;l<s.length;l++)e(s[l]).removeClass("oj-button-text");a&&(e(a).removeClass("oj-button-icon"),e(a).removeClass("oj-end"))},_InitOptions:function(t,n){if(this._super(t,n),this.$buttons=this.element.find(this._items),!("checked"in n)){this.initCheckedFromDom=!0;var o=this._getCheckedFromDom(this.$buttons);"array"!==e.type(o)&&"OJ-BUTTONSET-MANY"!==this.element[0].tagName||(this.options.checked=[]),void 0!==o&&this.option("checked",o,{_context:{internalSet:!0}})}},_ComponentCreate:function(){this._super(),this.element.attr(t.Components._OJ_CONTAINER_ATTR,this.widgetName).addClass("oj-buttonset oj-component"),this._setRole(this.options.focusManagement),this._IsCustomElement()&&(this._removeNonOjOptions(),this._processOjOptions()),this._setup(!0)},_NotifyContextMenuGesture:function(t,e,n){var o=this.element.find(":oj-button[tabindex=0]");this._OpenContextMenu(e,n,{launcher:o,position:{of:"keyboard"===n?o.ojButton("widget"):e}})},_propagateDisabled:function(t){t=!!t,this.$buttons.each(function(){e(this).data("oj-ojButton").__setAncestorComponentDisabled(t)})},_setRole:function(t){"oneTabstop"===t?this.element.attr("role","toolbar"):this.element.removeAttr("role")},_setOption:function(t,n,o){this._superApply(arguments),"disabled"===t?this._propagateDisabled(n):"checked"===t?(this._setCheckedOnDom(n,this.$buttons),this.$buttons.each(function(){e(this).data("oj-ojButton")._applyCheckedStateFromDom(!1)})):"focusManagement"===t?this._setRole(n):"chroming"===t?(u(this.element,n),this.$buttons.ojButton("refresh")):"display"===t&&this.$buttons.ojButton("option",t,n)},refresh:function(){this._super(),this._IsCustomElement()&&this._processOjOptions(),this._setup(!1)},_setup:function(t){var n=this;this.isRtl="rtl"===this._GetReadingDirection(),u(this.element,this.options.chroming),!t||this.initCheckedFromDom||this._IsCustomElement()||this._setCheckedOnDom(this.options.checked,this.$buttons),t||(this.$buttons=this.element.find(this._items)),this.element.toggleClass("oj-buttonset-multi",this.$buttons.length>1),this.$buttons.filter(":oj-button").ojButton("refresh").each(function(){e(this).data("oj-ojButton")._applyCheckedStateFromDom(!1)}).end().not(":oj-button").ojButton({display:this.options.display}).end().map(function(){return e(this).ojButton("widget")[0]}).removeClass("oj-buttonset-first oj-buttonset-last").filter(":first").addClass("oj-buttonset-first").end().filter(":last").addClass("oj-buttonset-last").end().end(),this._propagateDisabled(this.options.disabled),"oneTabstop"===this.options.focusManagement&&(this.$buttons.unbind("keydown"+this.eventNamespace).bind("keydown"+this.eventNamespace,function(t){n._handleKeyDown(t,e(this))}).unbind("click"+this.eventNamespace).bind("click"+this.eventNamespace,function(t){e(this).data("oj-ojButton")._IsEffectivelyDisabled()||n._setTabStop(e(this))}).unbind("focus"+this.eventNamespace).bind("focus"+this.eventNamespace,function(t){n._setTabStop(e(this))}),this.$enabledButtons=this.$buttons.filter(function(t){return!e(this).data("oj-ojButton")._IsEffectivelyDisabled()}),this._initTabindexes(t))},_initTabindexes:function(t){var n,o=e(this._lastTabStop);this._lastTabStop=void 0,this.$buttons.attr("tabindex","-1"),n=t||!o.is(this.$enabledButtons)?this.$enabledButtons.first():o,this._setTabStop(n)},_mapToTabbable:function(t){var e=this.$enabledButtons;return t.map(function(t,n){if("radio"!=n.type||n.checked||""==n.name)return n;var o=h(n,e).filter(":checked");return o.length?o[0]:n})},_setTabStop:function(t){var n=(t=this._mapToTabbable(t))[0],o=this._lastTabStop;n!==o&&(e(o).attr("tabindex","-1"),t.attr("tabindex","0"),this._lastTabStop=n)},_handleKeyDown:function(t,n){switch(t.which){case e.ui.keyCode.UP:case e.ui.keyCode.DOWN:if("radio"!=n.attr("type"))break;case e.ui.keyCode.LEFT:case e.ui.keyCode.RIGHT:t.preventDefault();var o=this.$enabledButtons,s=o.length;if(s<2)break;var i=(o.index(n)+(t.which==e.ui.keyCode.DOWN||t.which==e.ui.keyCode.RIGHT^this.isRtl?1:-1)+s)%s;o.eq(i).focus()}},_destroy:function(){this.element.removeClass("oj-buttonset oj-component "+l).removeAttr(t.Components._OJ_CONTAINER_ATTR).removeAttr("role"),"oneTabstop"===this.options.focusManagement&&this.$buttons.attr("tabindex","0"),this.$buttons.map(function(){return e(this).ojButton("widget")[0]}).removeClass("oj-buttonset-first oj-buttonset-last").end().ojButton("destroy")}});var s="oj-button oj-component oj-enabled oj-default",i="oj-hover oj-active oj-selected",a="oj-button-icons-only oj-button-icon-only oj-button-text-icons oj-button-text-icon-start oj-button-text-icon-end oj-button-text-only",l="oj-button-full-chrome oj-button-half-chrome oj-button-outlined-chrome",r={full:"oj-button-full-chrome",half:"oj-button-half-chrome",outlined:"oj-button-outlined-chrome"},u=function(t,e){t.removeClass(l).addClass(r[e])},h=function(t,n){var o,s=t.name,i=t.form;if(s){var a=":radio[name='"+(s=s.replace(/'/g,"\\'"))+"']:oj-button";o=n?n.filter(a):i?e(i).find(a):e(a,t.ownerDocument).filter(function(){return!this.form})}else o=(n?n.filter(t):e(t)).filter(":oj-button");return o},c={button:["ojButtonset","ojToolbar"],buttonset:["ojToolbar"]},d=function(e,n,o){var s=function(e,n,o){for(var s=0;s<o.length;++s){var i=o[s];if(n.indexOf(i)>=0)for(;;e=e.parentNode){var a=t.Components.__GetWidgetConstructor(e,i);if(a)return a}}return null}(n,o,c[e]);return s?s("option","chroming"):(t.ThemeUtils.parseJSONFromFontFamily("oj-"+e+"-option-defaults")||{}).chroming};t.Components.setDefaultOptions({ojButton:{chroming:t.Components.createDynamicPropertyGetter(function(t){return d("button",t.element,t.containers)})},ojButtonset:{chroming:t.Components.createDynamicPropertyGetter(function(t){return d("buttonset",t.element,t.containers)})}})}(),t.CustomElementBridge.registerMetadata("oj-button","baseComponent",{properties:{chroming:{type:"string",enumValues:["full","half","outlined"]},disabled:{type:"boolean"},display:{type:"string",enumValues:["all","icons"]}},events:{action:{}},extension:{_WIDGET_NAME:"ojButton"}}),t.CustomElementBridge.register("oj-button",{metadata:t.CustomElementBridge.getMetadata("oj-button"),innerDomFunction:function(t){return t.getAttribute("href")?"a":"button"}}),t.CustomElementBridge.registerMetadata("oj-menu-button","baseComponent",{properties:{chroming:{type:"string",enumValues:["full","half","outlined"]},disabled:{type:"boolean"},display:{type:"string",enumValues:["all","icons"]}},extension:{_WIDGET_NAME:"ojButton"}}),t.CustomElementBridge.register("oj-menu-button",{metadata:t.CustomElementBridge.getMetadata("oj-menu-button"),innerDomFunction:function(t){return t.getAttribute("href")?"a":"button"}}),t.CustomElementBridge.registerMetadata("oj-buttonset-one","baseComponent",{properties:{chroming:{type:"string",enumValues:["full","half","outlined"]},disabled:{type:"boolean"},display:{type:"string",enumValues:["all","icons"]},focusManagement:{type:"string",enumValues:["oneTabstop","none"]},value:{type:"any",writeback:!0}},extension:{_WIDGET_NAME:"ojButtonset",_ALIASED_PROPS:{value:"checked"}}}),t.CustomElementBridge.register("oj-buttonset-one",{metadata:t.CustomElementBridge.getMetadata("oj-buttonset-one")}),t.CustomElementBridge.registerMetadata("oj-buttonset-many","baseComponent",{properties:{chroming:{type:"string",enumValues:["full","half","outlined"]},disabled:{type:"boolean"},display:{type:"string",enumValues:["all","icons"]},focusManagement:{type:"string",enumValues:["oneTabstop","none"]},value:{type:"Array",writeback:!0}},extension:{_WIDGET_NAME:"ojButtonset",_ALIASED_PROPS:{value:"checked"}}}),t.CustomElementBridge.register("oj-buttonset-many",{metadata:t.CustomElementBridge.getMetadata("oj-buttonset-many")})});