/**
 * @license
 * Copyright (c) 2014, 2018, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";define(["ojs/ojcore"],function(t){var e=function(){};t.Object.createSubclass(e,t.Object,"KeySet"),t.KeySet=e,e.prototype.InitializeWithKeys=function(t){this._keys=this._populate(t)},e.prototype.SetInternal=function(t){this._keys=t},e.prototype.AddOrDeleteInternal=function(t,e){var n,r;return null==(n=t?this._add(e):this._remove(e))?this:((r=Object.create(Object.getPrototypeOf(this))).SetInternal(n),r)},e.prototype._add=function(t){var e=this,n=null;return t.forEach(function(t){null==e.FindEquals(t)&&(null==n&&(n=e.Clone()),n.add(t))}),n},e.prototype._remove=function(t){var e,n=this,r=null;return 0==this._keys.size?null:(t.forEach(function(t){null!=(e=n.FindEquals(t))&&(null==r&&(r=n.Clone()),r.delete(e))}),r)},e.prototype.FindEquals=function(e){var n,r,o=null;if(this._keys.has(e))return e;if("function"==typeof Symbol&&"function"==typeof Set.prototype[Symbol.iterator])for(r=(n=this._keys[Symbol.iterator]()).next();!r.done;){if(t.Object.compareValues(r.value,e)||r.value==e)return r.value;r=n.next()}else this._keys.forEach(function(n){(null==o&&t.Object.compareValues(n,e)||n==e)&&(o=n)});return o},e.prototype.GetInternalSize=function(){return this._keys.size},e.prototype.Clone=function(){return this._populate(this._keys)},e.prototype._populate=function(t){var e=new Set(t);return null!=t&&0==e.size&&t.forEach(function(t){e.add(t)}),e};var n=function(t){this.InitializeWithKeys(t)};t.Object.createSubclass(n,e,"ExpandedKeySet"),t.ExpandedKeySet=n,n.prototype.add=function(t){return this.AddOrDeleteInternal(!0,t)},n.prototype.addAll=function(){return new r},n.prototype.isAddAll=function(){return!1},n.prototype.delete=function(t){return this.AddOrDeleteInternal(!1,t)},n.prototype.clear=function(){return 0==this.GetInternalSize()?this:new n},n.prototype.has=function(t){return null!=this.FindEquals(t)},n.prototype.values=function(){return this.Clone()};var r=function(){this.InitializeWithKeys(null)};return t.Object.createSubclass(r,e,"ExpandAllKeySet"),t.ExpandAllKeySet=r,r.prototype.add=function(t){return this.AddOrDeleteInternal(!1,t)},r.prototype.addAll=function(){return 0==this.GetInternalSize()?this:new r},r.prototype.isAddAll=function(){return!0},r.prototype.delete=function(t){return this.AddOrDeleteInternal(!0,t)},r.prototype.clear=function(){return new n},r.prototype.has=function(t){return null==this.FindEquals(t)},r.prototype.deletedValues=function(){return this.Clone()},{KeySet:e,ExpandedKeySet:n,ExpandAllKeySet:r}});