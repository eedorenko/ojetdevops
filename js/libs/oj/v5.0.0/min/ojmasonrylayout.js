/**
 * @license
 * Copyright (c) 2014, 2018, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";define(["ojs/ojcore","jquery","ojs/ojcomponentcore","ojdnd","ojs/ojanimation"],function(e,t){function i(e,t,n,s,r,a){var o=i;null==o._agentTypeAndVersion&&(o._agentTypeAndVersion=o._getAgentTypeAndVersion(navigator.userAgent)),this._elem=e,this._rtl=t,this._automationEnabled=n,s&&s.tiles&&(this._tilesSelector=s.tiles),r&&r.transitionShowFromStyleClass&&(this._transitionShowFromStyleClass=r.transitionShowFromStyleClass),a&&(a.addStyleClassName&&(this._addStyleClassNameFunc=a.addStyleClassName),a.removeStyleClassName&&(this._removeStyleClassNameFunc=a.removeStyleClassName),a.getSizeStyleClassName&&(this._getSizeStyleClassNameFunc=a.getSizeStyleClassName),a.getTileSpan&&(this._getTileSpanFunc=a.getTileSpan),a.showTileOnEndFunc&&(this._showTileOnEndFunc=a.showTileOnEndFunc),a.hideTileOnEndFunc&&(this._hideTileOnEndFunc=a.hideTileOnEndFunc),a.startAnimationFunc&&(this._startAnimationFunc=a.startAnimationFunc),a.layoutOnEndFunc&&(this._layoutOnEndFunc=a.layoutOnEndFunc),a.layoutCycleOnStartFunc&&(this._layoutCycleOnStartFunc=a.layoutCycleOnStartFunc),a.layoutCycleOnEndFunc&&(this._layoutCycleOnEndFunc=a.layoutCycleOnEndFunc),a.sortTilesOriginalOrderFunc&&(this._sortTilesOriginalOrderFunc=a.sortTilesOriginalOrderFunc),a.subtreeAttached&&(this._subtreeAttachedFunc=a.subtreeAttached),a.subtreeDetached&&(this._subtreeDetachedFunc=a.subtreeDetached),a.addBusyState&&(this._addBusyStateFunc=a.addBusyState));var l=document.createElement("div"),h=l.style;h.display="inline-block",h.overflow="hidden",h.visibility="hidden";var d=document.createElement("div");(h=d.style).display="inline-block",l.appendChild(d),e.insertBefore(l,e.firstChild),this._sizeDivWrapper=l,this._sizeDiv=d;var u=this;this._hideTilesFunc=function(){u._hideTiles()},this._resolveBusyStateFunc=function(){u._resolveBusyState()}}i.prototype.setup=function(e,t){var i=!1;return e?(i=!!this._layout(),this._reorderTilesForLayout()):(this._addBusyStateFunc&&(this._busyStateResolveFunc=this._addBusyStateFunc("performing layout (setup)")),this._layoutCycleOnStartFunc&&this._layoutCycleOnStartFunc(),this._transitionStart(t),i=this._transitionLayout()),i},i.prototype.destroy=function(){this._resolveBusyState();for(var e=this._elem,t=this._getTileChildren(),i=0;i<t.length;i++){var n=t[i].style;this._rtl?n.right="":n.left="",n.top=""}e.removeChild(this._sizeDivWrapper),this._sizeDivWrapper=null,this._sizeDiv=null,this._hideTilesFunc=null,this._resolveBusyStateFunc=null,this._arMovedInfolets=null,this._arInfoletsToResize=null,this._arInfoletsToShow=null,this._arInfoletsToHide=null,this._arFireHideOnEnd=null,this._elem=null,this._addStyleClassNameFunc=null,this._removeStyleClassNameFunc=null,this._getSizeStyleClassNameFunc=null,this._getTileSpanFunc=null,this._showTileOnEndFunc=null,this._hideTileOnEndFunc=null,this._startAnimationFunc=null,this._layoutOnEndFunc=null,this._layoutCycleOnStartFunc=null,this._layoutCycleOnEndFunc=null,this._sortTilesOriginalOrderFunc=null,this._subtreeAttachedFunc=null,this._subtreeDetachedFunc=null,this._addBusyStateFunc=null},i.prototype.resizeTile=function(e,t){var i=this._elem.querySelector(e);if(i){this._arInfoletsToResize||(this._arInfoletsToResize=[]);var n=this._arInfoletsToResize;n.push(i),n.push(t),this._resizingInfolet=!0,this._queueRelayout()}},i.prototype.insertTileDomElem=function(e,t){var i=this._getTileChildren();this._sortTilesOriginalOrderFunc&&this._sortTilesOriginalOrderFunc(i);var n=null;t>=0&&t<i.length&&(n=i[t]),this._elem.insertBefore(e,n),this._queueRelayout()},i.prototype.showTile=function(e){var t=this._elem.querySelector(e);if(t){this._arInfoletsToShow||(this._arInfoletsToShow=[]),this._arInfoletsToShow.push(t),this._showingInfolets=!0;var n=i;this._layoutPhase!==n._PHASE_HIDE&&this._layoutPhase!==n._PHASE_LAYOUT?this._queueRelayout():this._showingInfolets=!1}},i.prototype.hideTile=function(e){var t=this._elem.querySelector(e);t&&(this._arInfoletsToHide||(this._arInfoletsToHide=[]),this._arInfoletsToHide.push(t),this._hidingInfolets=!0,this._queueRelayout())},i.prototype.resizeNotify=function(){this._resizingInfolet||this._hidingInfolets||this._showingInfolets||(this._addBusyStateFunc&&(this._busyStateResolveFunc=this._addBusyStateFunc("performing layout (resizeNotify)")),this._layoutCycleOnStartFunc&&this._layoutCycleOnStartFunc(),this._transitionStart(!1),this._transitionLayout())},i.prototype.getCellSize=function(){return this._cellSize},i.prototype.isAnimationEnabled=function(){if(this._temporarilyDisableAnimation)return!1;if(!this._cachedAnimationEnabled){if(this._automationEnabled)this._animationEnabled=!1;else{var e=i,t=e._agentTypeAndVersion[0],n=e._agentTypeAndVersion[1];this._animationEnabled=e._isMinimumAgentMet(t,n,["gecko",16,"trident",6,"webkit",533.1])}this._cachedAnimationEnabled=!0}return this._animationEnabled},i.prototype.isInLayoutCycle=function(){return null!=this._layoutPhase||null!=this._arMovedInfolets&&this._arMovedInfolets.length>0},i.prototype.finishLayoutCycle=function(){this._temporarilyDisableAnimation=!0,this._removeStyleClassFromTiles(this._transitionShowFromStyleClass);for(var e=i,t=this._getTileChildren(),n=0;n<t.length;n++){var s=t[n];s._afrCellSize&&delete s._afrCellSize}this._hideTilesInternalTimeout?(clearTimeout(this._hideTilesInternalTimeout),this._hideTilesInternalTimeout=null,this._handleHideTransitionEnd(null)):this._hideTilesAnimationStarted?(this._hideTilesAnimationStarted=!1,this._handleHideTransitionEnd(null)):this._showTilesTimeout?(clearTimeout(this._showTilesTimeout),this._showTilesTimeout=null,this._showTiles()):this._layoutPhase===e._PHASE_LAYOUT||null!=this._arMovedInfolets&&this._arMovedInfolets.length>0?this._handleTransitionEnd(null):this._layoutPhase===e._PHASE_SHOW&&this._handleShowTransitionEnd(null),this._temporarilyDisableAnimation=!1},i._getElemSize=function(e){var t=i,n=t._getComputedStyle(e),s=t._getCSSLengthAsInt(n.marginLeft)+t._getCSSLengthAsInt(n.marginRight),r=t._getCSSLengthAsInt(n.marginTop)+t._getCSSLengthAsInt(n.marginBottom);return{w:e.offsetWidth+s,h:e.offsetHeight+r}},i._getElemInsets=function(e){var t=i,n=t._getComputedStyle(e);return{paddingLeft:t._getCSSLengthAsInt(n.paddingLeft),paddingRight:t._getCSSLengthAsInt(n.paddingRight),paddingTop:t._getCSSLengthAsInt(n.paddingTop),paddingBottom:t._getCSSLengthAsInt(n.paddingBottom),borderLeftWidth:t._getCSSLengthAsInt(n.borderLeftWidth),borderRightWidth:t._getCSSLengthAsInt(n.borderRightWidth),borderTopWidth:t._getCSSLengthAsInt(n.borderTopWidth),borderBottomWidth:t._getCSSLengthAsInt(n.borderBottomWidth)}},i._getComputedStyle=function(e){var t=e.ownerDocument.defaultView;return t?t.getComputedStyle(e,null):e.currentStyle},i._getCSSLengthAsInt=function(e){if(e.length>0&&"auto"!=e){var t=parseInt(e,10);return isNaN(t)&&(t=0),t}return 0},i._arrayIndexOf=function(e,t){if(e)for(var i=0;i<e.length;i++)if(e[i]==t)return i;return-1},i._isMinimumAgentMet=function(e,t,i){var n=i.length;if(n%2==0)for(var s=0;s<=n-2;s+=2){if(e==i[s])return t>=i[1+s]}return!1},i._getAgentTypeAndVersion=function(e){var t=i._parseFloatVersion,n=null,s=-1,r=e.toLowerCase();if(-1!=r.indexOf("msie")||-1!=r.indexOf("trident")){n="trident";var a=t(r,/trident\/(\d+[.]\d+)/);-1!=a?s=a:(-1==(a=t(r,/msie (\d+\.\d+);/))&&(a=t(r,/msie (\d+\.\d+)b;/)),s=a-4),null!=document.documentMode&&(s=Math.min(s,document.documentMode-4))}else-1!=r.indexOf("applewebkit")?(n="webkit",s=t(r,/applewebkit\/(\d+([.]\d+)*)/)):-1!=r.indexOf("gecko/")&&(n="gecko",s=t(r,/rv:(\d+[.]\d+)/));return[n,s]},i._parseFloatVersion=function(e,t){var i=e.match(t);if(i){var n=i[1];if(n)return parseFloat(n)}return-1},i._compareTilePositions=function(e,t){return e.startRow>t.startRow?1:e.startRow<t.startRow?-1:e.startCol>t.startCol?1:e.startCol<t.startCol?-1:0},i.prototype._queueRelayout=function(){this._hideTilesTimeout||(this._layoutPhase?this._queuedRelayout||(this._queuedRelayout=!0):(this._addBusyStateFunc&&(this._busyStateResolveFunc=this._addBusyStateFunc("performing layout")),this._hideTilesTimeout=setTimeout(this._hideTilesFunc,0)))},i.prototype._getTileChildren=function(){for(var e=this._elem.querySelectorAll(this._tilesSelector),t=[],i=0;i<e.length;i++){var n=e[i],s=n.style;n.offsetWidth>0&&n.offsetHeight>0&&"hidden"!=s.visibility&&t.push(n)}return t},i.prototype._transitionLayout=function(){var e=this._arMovedInfolets,t=this._layout();if(this._arInfoletsToResize){var n=this._arInfoletsToResize;t||(t=[]);for(var s=i,r=0;r<n.length;r+=2){var a=n[r];s._arrayIndexOf(t,a)<0&&t.push(a)}}var o=!1;!t||t.length<1?(!e||e.length<1)&&(this._arMovedInfolets=null,this._handleTransitionEnd(null),o=!0):this._arMovedInfolets=t;var l=null!=t&&t.length>0;return this.isAnimationEnabled()||o||this._handleTransitionEnd(null),l},i.prototype._layout=function(){var e=this._elem,t=this._getTileChildren();this._sortTilesOriginalOrderFunc&&this._sortTilesOriginalOrderFunc(t),this._cellSize=null;var n=null;this._cols=0,this._rows=1,this._occupancyMap=null;var s=[],r=[],a=[],o=[],l=this._rtl,h=i,d=h._getElemInsets(e),u=0,_=[];this._arTilePositions=_;for(var c=0;c<t.length;c++){(D=t[c])._afrCellSize&&(this._cellSize=D._afrCellSize,delete D._afrCellSize);var f=this._getTileSpanFunc(D);if(this._cellSize||(this._cellSize=this._calcCellSize(D,f)),n=this._cellSize,!this._occupancyMap){var m=e.offsetWidth-d.paddingLeft-d.paddingRight-d.borderLeftWidth-d.borderRightWidth;this._cols=Math.max(Math.floor(m/n.w),1),this._initOccupancyMap(this._cols,this._rows),u=this._cols}f.colSpan>u&&(u=f.colSpan),f.colSpan>this._cols&&(f.colSpan=this._cols);for(var g=!1,p=0;p<this._rows;p++){for(var v=0;v<this._cols;v++)if(this._fits(v,p,f)){var y={top:(b=D.style).top};l?y.right=b.right:y.left=b.left,r.push(y);var T=this._calcPosition(D,v,p,f,n,d);a.push(T),l&&o.push(v),g=!0,_.push({startCol:v,startRow:p,tile:D});break}if(g)break;p===this._rows-1&&this._addRow()}}if(n){var S=this._sizeDiv.style;if(S){var C=u*n.w,O=this._rows*n.h,E=S.width?i._getCSSLengthAsInt(S.width.toString()):0,F=S.height?i._getCSSLengthAsInt(S.height.toString()):0;(E>C||F>O)&&(this._afrSizeDivDims={},this._afrSizeDivDims.width=C+"px",this._afrSizeDivDims.height=O+"px"),S.width=(E>C?E:C)+"px",S.height=(F>O?F:O)+"px"}}for(c=0;c<t.length;c++){var D,b=(D=t[c]).style;T=a[c];""!=(y=r[c]).top&&(l&&parseInt(T.right,10)!==parseInt(y.right,10)||!l&&parseInt(T.left,10)!==parseInt(y.left,10)||parseInt(T.top,10)!==parseInt(y.top,10))&&(s.push(D),this._layoutTransition&&h._arrayIndexOf(this._arInfoletsToResize,D)<0&&this._animateLayout(D,this._reorderTransitionStarted?"reorder":"move")),b.top=T.top,this._rtl?b.right=T.right:b.left=T.left}return s.length<1&&(s=null),s},i.prototype._updateSizeDivOnEnd=function(){if(this._afrSizeDivDims){var e=this._sizeDiv.style;e.width=this._afrSizeDivDims.width,e.height=this._afrSizeDivDims.height,delete this._afrSizeDivDims}},i.prototype._reorderTilesForLayout=function(){var e=this._arTilePositions;this._arTilePositions=null;var t=i;e=e.sort(t._compareTilePositions);for(var n=this._getTileChildren(),s=0;s<n.length;s++){var r=n[s],a=e[s].tile;if(r!=a){this._subtreeDetachedFunc(a),r.parentNode.insertBefore(a,r),this._subtreeAttachedFunc(a);var o=t._arrayIndexOf(n,a);o>s&&(n.splice(o,1),n.splice(s,0,a))}}},i.prototype._initOccupancyMap=function(e,t){this._occupancyMap=[];for(var i=this._occupancyMap,n=0;n<t;n++){var s=[];i.push(s);for(var r=0;r<e;r++)s[r]=!1}},i.prototype._addRow=function(){this._rows++;var e=[];this._occupancyMap.push(e);for(var t=0;t<this._cols;t++)e[t]=!1},i.prototype._fits=function(e,t,i){for(var n=i.colSpan,s=i.rowSpan,r=t;r<t+s;r++){r>=this._rows&&this._addRow();for(var a=e;a<e+n;a++){if(a>=this._cols)return!1;if(this._occupancyMap[r][a])return!1}}return!0},i.prototype._calcPosition=function(e,t,i,n,s,r){for(var a=n.colSpan,o=n.rowSpan,l=this._occupancyMap,h=i;h<i+o;h++)for(var d=t;d<t+a;d++)l[h][d]=!0;var u={},_=r.paddingTop+i*s.h;if(u.top=_+"px",this._rtl){var c=r.paddingRight+t*s.w;u.right=c+"px"}else{var f=r.paddingLeft+t*s.w;u.left=f+"px"}return u},i.prototype._removeStyleClassFromTiles=function(e){for(var t=this._getTileChildren(),i=0;i<t.length;i++)this._removeStyleClassNameFunc(t[i],e)},i.prototype._animateLayout=function(e,t){if(this.isAnimationEnabled()){var i=this;i._startAnimationFunc(e,t).then(function(){i._layoutTransition&&i._handleTransitionEnd(e)})}},i.prototype._transitionStart=function(e){this._layoutTransition||(this._reorderTransitionStarted=e,this._layoutTransition=!0)},i.prototype._handleTransitionEnd=function(e){var t=!0;if(this._arMovedInfolets){var n=this._arMovedInfolets;if(e){for(var s=0;s<n.length;s++)if(e===n[s]){this._arMovedInfolets=[],n=this._arMovedInfolets;break}}else this.isAnimationEnabled()||(this._arMovedInfolets=[],n=this._arMovedInfolets);n.length>0&&(t=!1)}if(t){if(this._arInfoletsToResize){var r=this._arInfoletsToResize;if(this._arInfoletsToResize=null,this.isAnimationEnabled())for(s=0;s<r.length;s+=2)r[s]}this._reorderTransitionStarted&&(this._reorderTransitionStarted=!1);var a=i;if(this._layoutTransition=!1,this._resizingInfolet=!1,this._hidingInfolets=!1,this._showingInfolets=!1,this._reorderTilesForLayout(),this._layoutOnEndFunc&&this._layoutOnEndFunc(),this._updateSizeDivOnEnd(),this._layoutPhase===a._PHASE_LAYOUT)if(this.isAnimationEnabled()){var o=this;this._showTilesTimeout=setTimeout(function(){o._showTiles()},0)}else this._showTiles();else this._layoutPhase||this._layoutCycleOnEndFunc&&this._layoutCycleOnEndFunc(this._resolveBusyStateFunc)}},i.prototype._calcCellSize=function(e,t){var n=i._getElemSize(e);return{w:n.w/t.colSpan,h:n.h/t.rowSpan}},i.prototype._hideTiles=function(){this._hideTilesTimeout&&(clearTimeout(this._hideTilesTimeout),this._hideTilesTimeout=null),this._layoutCycleOnStartFunc&&this._layoutCycleOnStartFunc();var e=i;if(this._layoutPhase=e._PHASE_HIDE,this._arInfoletsToHide&&this.isAnimationEnabled()){var t=this._arInfoletsToHide,n=this;this._hideTilesAnimationStarted=!0;for(var s=0;s<t.length;s++){var r=t[s];this._startAnimationFunc(r,"remove").then(function(){n._handleHideTransitionEnd(r)})}}else this._handleHideTransitionEnd(null)},i.prototype._handleHideTransitionEnd=function(e){this._hideTilesInternalTimeout?(clearTimeout(this._hideTilesInternalTimeout),this._hideTilesInternalTimeout=null):this._hideTilesAnimationStarted&&(this._hideTilesAnimationStarted=!1);var t=i;if(e){var n=e;if(r=this._arInfoletsToHide){for(var s=0;s<r.length;s++){if((a=r[s])===n){r.splice(s,1),this._arFireHideOnEnd||(this._arFireHideOnEnd=[]),(o=this._arFireHideOnEnd).push(n);break}}r.length<1&&(this._arInfoletsToHide=null)}}else if(!this.isAnimationEnabled()){var r;if(r=this._arInfoletsToHide){for(s=0;s<r.length;s++){var a=r[s];this._arFireHideOnEnd||(this._arFireHideOnEnd=[]),(o=this._arFireHideOnEnd).push(a)}this._arInfoletsToHide=null}}if(!this._arInfoletsToHide){if(this._arFireHideOnEnd){var o=this._arFireHideOnEnd;for(s=0;s<o.length;s++){var l=(n=o[s]).style;this._rtl?l.right="":l.left="",l.top="",this._hideTileOnEndFunc&&this._hideTileOnEndFunc(n)}this._arFireHideOnEnd=null}if(this._layoutPhase=t._PHASE_LAYOUT,this._transitionStart(!1),this._arInfoletsToResize){var h=this._arInfoletsToResize;for(s=0;s<h.length;s+=2){n=h[s];var d=h[s+1],u=this._getSizeStyleClassNameFunc(n);this.isAnimationEnabled()&&(n._afrCellSize=this._cellSize,this._animateLayout(n,"resize")),this._removeStyleClassNameFunc(n,u),this._addStyleClassNameFunc(n,d)}}this._transitionLayout()}},i.prototype._showTiles=function(){this._showTilesTimeout&&(clearTimeout(this._showTilesTimeout),this._showTilesTimeout=null);var e=i;if(this._layoutPhase=e._PHASE_SHOW,this._arInfoletsToShow&&this.isAnimationEnabled())for(var t=this,n=this._arInfoletsToShow,s=0;s<n.length;s++){var r=n[s];this._removeStyleClassNameFunc(r,this._transitionShowFromStyleClass),this._startAnimationFunc(r,"insert").then(function(){t._handleShowTransitionEnd(r)})}else{if(this._arInfoletsToShow)for(n=this._arInfoletsToShow,s=0;s<n.length;s++){r=n[s];this._removeStyleClassNameFunc(r,this._transitionShowFromStyleClass)}this._handleShowTransitionEnd(null)}},i.prototype._handleShowTransitionEnd=function(e){if(e){var t=e;if(n=this._arInfoletsToShow){for(var i=0;i<n.length;i++){if((s=n[i])===t){n.splice(i,1),this._showTileOnEndFunc&&this._showTileOnEndFunc(t);break}}n.length<1&&(this._arInfoletsToShow=null)}}else if(!this.isAnimationEnabled()){var n;if(n=this._arInfoletsToShow){for(i=0;i<n.length;i++){var s=n[i];this._showTileOnEndFunc&&this._showTileOnEndFunc(s)}this._arInfoletsToShow=null}}this._arInfoletsToShow||(this._layoutPhase=null,this._layoutCycleOnEndFunc&&this._layoutCycleOnEndFunc(this._resolveBusyStateFunc),this._queuedRelayout&&(this._queuedRelayout=!1,this._queueRelayout()))},i.prototype._resolveBusyState=function(){this._busyStateResolveFunc&&(this._busyStateResolveFunc(),this._busyStateResolveFunc=null)},i._PHASE_HIDE=1,i._PHASE_LAYOUT=2,i._PHASE_SHOW=3,function(){e.__registerWidget("oj.ojMasonryLayout",t.oj.baseComponent,{defaultElement:"<div>",widgetEventPrefix:"oj",options:{reorderHandle:null,animateStart:null,animateEnd:null,beforeInsert:null,insert:null,beforeRemove:null,remove:null,beforeResize:null,resize:null,beforeReorder:null,reorder:null},_ComponentCreate:function(){this._super(),this.element.addClass("oj-masonrylayout oj-component"),this.options.disabled&&e.Logger.warn(c),this.reorderHandleEventNamespace=this.eventNamespace+"ReorderHandle",this._menu={},this._menu.usermenu=!1,this._menu.$container=!1,this._menu.$elemCut=!1,this._menu.$elemPasteBefore=!1,this._menu.$elemPasteAfter=!1,this._initMenu(),this._applyMenu(),this._setup(!0)},refresh:function(){this._super();var e="rtl"===this._GetReadingDirection()!==this._bRTL;e&&this._destroyMLCommon(),this._setup(e)},_NotifyShown:function(){(this._super(),this._needsSetup)?this._setup(this._needsSetup[0]):this._mlCommon.setup(!0)},_NotifyAttached:function(){(this._super(),this._needsSetup)?this._setup(this._needsSetup[0]):this._mlCommon.setup(!0)},_NotifyContextMenuGesture:function(e,i,n){this._prepareContextMenuBeforeOpen(i);var s=this._menu.$container.children().not(".oj-helper-hidden");s&&s.length>0&&this._OpenContextMenu(i,n,{launcher:t(i.target).closest(":tabbable")})},_setup:function(t){if(!this._canCalculateSizes()){var n=!1;return this._needsSetup&&(n=this._needsSetup[0]),void(this._needsSetup=[t||n])}this._needsSetup=null,this._bRTL="rtl"===this._GetReadingDirection(),this._bTouchSupported=e.DomUtils.isTouchSupported();var s=this.element,r=this.options;if(t){var a=this;if(this._showTileOnEndFunc=function(e){a._showTileOnEnd(e)},this._hideTileOnEndFunc=function(e){a._hideTileOnEnd(e)},this._startAnimationFunc=function(e,t){return a._startAnimation(e,t)},this._layoutOnEndFunc=function(){a._layoutOnEnd()},this._layoutCycleOnStartFunc=function(){a._layoutCycleOnStart()},this._layoutCycleOnEndFunc=function(e){a._layoutCycleOnEnd(e)},!this._mlCommon){var o={};o.tiles=u;var l={};l.transitionShowFromStyleClass=_;var h={};h.addStyleClassName=S,h.removeStyleClassName=C,h.getSizeStyleClassName=O,h.getTileSpan=E,h.showTileOnEndFunc=this._showTileOnEndFunc,h.hideTileOnEndFunc=this._hideTileOnEndFunc,h.startAnimationFunc=this._startAnimationFunc,h.layoutOnEndFunc=this._layoutOnEndFunc,h.layoutCycleOnStartFunc=this._layoutCycleOnStartFunc,h.layoutCycleOnEndFunc=this._layoutCycleOnEndFunc,h.sortTilesOriginalOrderFunc=F,h.subtreeAttached=e.Components.subtreeAttached,h.subtreeDetached=e.Components.subtreeDetached,h.addBusyState=function(e){return a._addBusyState(e)},this._applyTileStyleClass(),this._saveTilesOriginalOrder(),this._mlCommon=new i(s[0],this._bRTL,"enabled"===e.Config.getAutomationMode(),o,l,h)}this._handleDragStartFunc=function(e){a._handleDragStart(e)},this._handleDragEnterFunc=function(e){a._handleDragEnter(e)},this._handleDragOverFunc=function(e){a._handleDragOver(e)},this._handleDragLeaveFunc=function(e){a._handleDragLeave(e)},this._handleDragEndFunc=function(e){a._handleDragEnd(e)},this._handleDropFunc=function(e){a._handleDrop(e)},r.reorderHandle&&this._setupReorderHandles()}else{this._applyTileStyleClass();var d=s.children();this._tearDownReorderHandlesForElem(d),this._setupReorderHandlesForElem(d),this._checkTilesOriginalOrder()}this._mlCommon.setup(t),t&&(this._handleResizeFunc=function(e,t){a._handleResize()},e.DomUtils.addResizeListener(s[0],this._handleResizeFunc,y))},_destroy:function(){this._clearMenu();var t=this.element;e.DomUtils.removeResizeListener(t[0],this._handleResizeFunc),this._handleResizeFunc=null,this._restoreTilesOriginalOrder();for(var i=this._getTileElements(),n=i.length,s=0;s<n;s++){delete i[s]._jetDataMasonryOriginalOrder}this._destroyMLCommon(),t.removeClass("oj-masonrylayout oj-component"),this.options.reorderHandle&&this._tearDownReorderHandles(),t.children("."+h).removeClass(h),this._handleDragStartFunc=null,this._handleDragEnterFunc=null,this._handleDragOverFunc=null,this._handleDragLeaveFunc=null,this._handleDragEndFunc=null,this._handleDropFunc=null,this._showTileOnEndFunc=null,this._hideTileOnEndFunc=null,this._startAnimationFunc=null,this._layoutOnEndFunc=null,this._layoutCycleOnStartFunc=null,this._layoutCycleOnEndFunc=null,this._arTilesToInsert=null,this._super()},_setOption:function(t,i,n){this.element,this.options;var s=!1;switch(t){case"reorderHandle":this._tearDownReorderHandles(),s=!0;break;case"disabled":e.Logger.warn(c);break;case"contextMenu":e.DomUtils.isTouchSupported()||(this._clearMenu(),i&&this._initMenu(i))}this._super(t,i,n),s&&i&&this._setupReorderHandles()},resizeTile:function(e,i){var n=this._mlCommon;n.isInLayoutCycle()&&n.finishLayoutCycle();var s=t(e),r=s[0],a=O(r);if(i==a)throw new Error("JET MasonryLayout: Unable to resize child "+e+" to style class "+i+" because "+i+" is already applied.");var o={tile:s,previousSizeStyleClass:a,sizeStyleClass:i};!1!==this._trigger("beforeResize",null,o)&&(this._arResizingTiles||(this._arResizingTiles=[]),this._arResizingTiles.push(r,a,i),n.resizeTile(e,i))},insertTile:function(i,n){var s=this._mlCommon;s.isInLayoutCycle()&&s.finishLayoutCycle(),isNaN(n)&&(n=-1);var r=t(i),a=r[0];r.addClass(h);var o={tile:r,index:n};if(!1!==this._trigger("beforeInsert",null,o)){a._jetDataTileInsertIndex=n,s.isAnimationEnabled()&&r.addClass(_);var l=a.style;l.top="-1px",this._bRTL?l.right="-1px":l.left="-1px",this._insertTileOriginalOrder(a,n),s.insertTileDomElem(a,n),e.Components.subtreeAttached(a),this._arTilesToInsert||(this._arTilesToInsert=[]),this._arTilesToInsert.push(i)}},removeTile:function(i){var n=this._mlCommon;n.isInLayoutCycle()&&n.finishLayoutCycle();var s=t(i),r=s[0];if(e.FocusUtils.containsFocus(r)){var a=this._getTileElements(!0),o=a.indexOf(r);o>0&&(this._deletingTileWithFocusPrev=a[o-1])}var l={tile:s};!1!==this._trigger("beforeRemove",null,l)&&n.hideTile(i)},_handleResize:function(){this._bDragging||this._inLayoutCycle||this._mlCommon.resizeNotify()},_showTileOnEnd:function(e){var i=t(e),n=e._jetDataTileInsertIndex;delete e._jetDataTileInsertIndex,this.options.reorderHandle&&this._setupReorderHandlesForElem(i);var s={tile:i,index:n};this._eventsToFire.push("insert",s)},_hideTileOnEnd:function(i){var n=t(i);this.options.reorderHandle&&this._tearDownReorderHandlesForElem(n),n.removeClass(h),e.Components.subtreeDetached(i),i.parentNode.removeChild(i),this._removeTileOriginalOrder(i);var s={tile:n};this._eventsToFire.push("remove",s)},_startAnimation:function(t,i){var n=(e.ThemeUtils.parseJSONFromFontFamily("oj-masonrylayout-option-defaults")||{}).animation,s=n?n[i]:null;return e.AnimationUtils.startAnimation(t,i,s,this)},_layoutOnEnd:function(){if(this._arTilesToInsert){for(var e=this._mlCommon,i=this._arTilesToInsert,n=0;n<i.length;n++){var s=i[n];e.showTile(s)}this._arTilesToInsert=null}if(this._arResizingTiles){var r=this._arResizingTiles;for(n=0;n<r.length;n+=3){var a=r[n],o=r[n+1],l=r[n+2],h={tile:t(a),previousSizeStyleClass:o,sizeStyleClass:l};this._eventsToFire.push("resize",h)}this._arResizingTiles=null}this._bDragging&&(this._bDragMoveTransition?this._handleDragMoveTransitionEnd():this._bDragEndTransition&&this._handleDragEndTransitionEnd())},_layoutCycleOnStart:function(){this._inLayoutCycle=!0,this._layoutStartActiveDomElem=null,this._eventsToFire=[];var t=document.activeElement;t&&e.DomUtils.isAncestor(this.element[0],t)&&(this._layoutStartActiveDomElem=t)},_layoutCycleOnEnd:function(t){this._inLayoutCycle=!1;var i=this.element[0];if(this._layoutStartActiveDomElem){var n=this._layoutStartActiveDomElem;if(this._layoutStartActiveDomElem=null,this._deletingTileWithFocusPrev){var s=this._deletingTileWithFocusPrev;if(this._deletingTileWithFocusPrev=null,s&&e.DomUtils.isAncestor(i,s)){var r=this._getTileElements(i,!0),a=r.indexOf(s);a>=0&&a<r.length-1?e.FocusUtils.focusFirstTabStop(r[a+1]):e.FocusUtils.focusFirstTabStop(s)}}else e.DomUtils.isAncestor(i,n)?e.FocusUtils.focusElement(n):e.FocusUtils.focusFirstTabStop(i)}if(t&&t(),this._eventsToFire){var o=this._eventsToFire;this._eventsToFire=null;for(var l=0;l<o.length;l+=2){var h=o[l],d=o[l+1];this._trigger(h,null,d)}}},_destroyMLCommon:function(){var e=this._mlCommon;e&&e.destroy(),this._mlCommon=null},_canCalculateSizes:function(){var e=document.createElement("div"),t=e.style;t.width="10px",t.height="10px";var i=this.element[0];i.appendChild(e);var n=!1;try{n=e.offsetWidth>0&&e.offsetHeight>0}catch(e){}return i.removeChild(e),n},_getTileElements:function(e){for(var t=this.element.children(u),i=t.length,n=[],a=0;a<i;a++){var o=t[a];if(!e||e&&o!==this._dropSite){var l=o.style;l.visibility!==s&&l.display!==r&&n.push(o)}}return n},_saveTilesOriginalOrder:function(){var e=this._getTileElements();if(e)for(var t=0;t<e.length;t++){var i=e[t];i._jetDataMasonryOriginalOrder||(i._jetDataMasonryOriginalOrder=t+1)}},_checkTilesOriginalOrder:function(){var e=this._getTileElements();if(e)for(var t=0;t<e.length;t++){var i=e[t];i._jetDataMasonryOriginalOrder||this._insertTileOriginalOrder(i,t)}},_restoreTilesOriginalOrder:function(){var t=this._getTileElements(),i=this._getTileElements();F(i);for(var n=0;n<t.length;n++){var s=t[n],r=i[n];if(s!=r){e.Components.subtreeDetached(r),s.parentNode.insertBefore(r,s),e.Components.subtreeAttached(r);var a=t.indexOf(r);a>n&&(t.splice(a,1),t.splice(n,0,r))}}},_insertTileOriginalOrder:function(e,t){var i=this._getTileElements();if(t<0&&(t=i.length),i)for(var n=0;n<i.length;n++){var s=i[n];s._jetDataMasonryOriginalOrder&&s._jetDataMasonryOriginalOrder>=t+1&&s._jetDataMasonryOriginalOrder++}e._jetDataMasonryOriginalOrder=t+1},_removeTileOriginalOrder:function(e){if(e._jetDataMasonryOriginalOrder){var t=this._getTileElements();if(t)for(var i=0;i<t.length;i++){var n=t[i];n._jetDataMasonryOriginalOrder&&n._jetDataMasonryOriginalOrder>e._jetDataMasonryOriginalOrder&&n._jetDataMasonryOriginalOrder--}delete e._jetDataMasonryOriginalOrder}},_applyTileStyleClass:function(){var e=this.element.children();(e=(e=e.not("."+h)).filter(function(e,t){return t.className.match(d)})).addClass(h)},_initMenu:function(e){var i=this._GetContextMenu();if(e||i||this._IsCustomElement()||(i=this.element.attr("contextmenu"))&&(this.options.contextMenu="#"+i),e||i){if(i=e||i,"function"==t.type(i)){try{i=i()}catch(e){i=null}t.type(i)}if(i){var n=t(i);if(n){n.css("display",r);var s=this._menu;if(!s)return;s.$container=n,s.usermenu=!0}this._menu.usermenu&&e&&this._applyMenu()}}},_applyMenu:function(){if(this._menu&&this._menu.usermenu&&this.options.reorderHandle){var e=this._menu.$container,i=this;"OJ-MENU"===e[0].tagName?e[0].addEventListener("ojAction",this._handleContextMenuSelect.bind(this)):e.on("ojselect",this._handleContextMenuSelect.bind(this));var n=e.find("[data-oj-command]"),s=!1;n.each(function(){if(0===t(this).children("a").length){var n=t(this).attr("data-oj-command").slice("oj-masonrylayout-".length),r="OJ-MENU"===e[0].tagName?this.tagName:"li",a=i._buildContextMenuItem(n,r);t(this).attr("id",a.attr("id")),"OJ-OPTION"===this.tagName?(this.innerHTML=a.get(0).innerHTML,t(this).attr("data-oj-command",a.attr("data-oj-command"))):(a.get(0).className=t(this).get(0).className,t(this).replaceWith(a)),s=!0}}),s&&("OJ-MENU"===e[0].tagName?e[0].refresh():e.ojMenu("refresh")),this._menu.$elemCut=e.find("#"+f),this._menu.$elemPasteBefore=e.find("#"+m),this._menu.$elemPasteAfter=e.find("#"+g)}},_clearMenu:function(){var e=this._menu;e&&e.usermenu&&(e.usermenu=!1,"OJ-MENU"===e.$container[0].tagName?e.$container[0].removeEventListener("ojAction"):e.$container.off("ojselect"),e.$container=null)},_prepareContextMenuBeforeOpen:function(e){var i=this.element,n=e.originalEvent.target,s=this.options.reorderHandle,r=!1;if(s){var a=t(n).closest(s);a&&a.length>0&&(r=!0)}var l=b(n,i[0]);if(this._menu.tile=l,this._menu.usermenu){var h=this._menu.cutTile,d=!1,u=this._menu.$elemCut;if(u){var _=u.hasClass("oj-helper-hidden");r||_?r&&_&&(u.removeClass("oj-helper-hidden"),d=!0):(u.addClass("oj-helper-hidden"),d=!0);var c=u.hasClass(o),f=!1;h&&l===h&&(f=!0),f&&!c?(u.addClass(o),d=!0):!f&&c&&(u.removeClass(o),d=!0)}var m=this._menu.$elemPasteBefore;if(m){var g=m.hasClass("oj-helper-hidden");r||g?r&&g&&(m.removeClass("oj-helper-hidden"),d=!0):(m.addClass("oj-helper-hidden"),d=!0);var p=m.hasClass(o);f=!1;h&&l!==h&&l!==I(h)||(f=!0),f&&!p?(m.addClass(o),d=!0):!f&&p&&(m.removeClass(o),d=!0)}var v=this._menu.$elemPasteAfter;if(v){var y=v.hasClass("oj-helper-hidden");r||y?r&&y&&(v.removeClass("oj-helper-hidden"),d=!0):(v.addClass("oj-helper-hidden"),d=!0);var T=v.hasClass(o);f=!1;h&&h!==l&&h!==I(l)||(f=!0),f&&!T?(v.addClass(o),d=!0):!f&&T&&(v.removeClass(o),d=!0)}if(d){var S=this._menu.$container;"OJ-MENU"===S[0].tagName?S[0].refresh():S.ojMenu("refresh")}}},_buildContextMenuItem:function(e,i){var n=p[e],s=t(document.createElement(i));return s.attr("id",n),s.attr("data-oj-command",e),s.append(this._buildContextMenuLabel(e,"OJ-OPTION"===i)),s},_buildContextMenuLabel:function(e,i){var n=v[e],s=document.createTextNode(this.getTranslatedString(n));return i?s:t('<a href="#"></a>').append(s)},_menuCut:function(e){e&&(this._menu.cutTile=e)},_menuPaste:function(e,t){if(e&&this._menu.cutTile){var i=this._menu.cutTile;this._menu.cutTile=!1,this._doPaste(i,e,t)}},_doPaste:function(e,i,n){var s=e._jetDataMasonryOriginalOrder-1,r=t(e),a={tile:r,fromIndex:s};if(!1!==this._trigger("beforeReorder",null,a)){this._removeTileOriginalOrder(e);var o=i._jetDataMasonryOriginalOrder-1;n||o++;var l=this.element[0];if(n)this._insertTileOriginalOrder(e,o),l.insertBefore(e,i);else{var h=I(i);this._insertTileOriginalOrder(e,o),l.insertBefore(e,h)}this._mlCommon.setup(!0);var d={tile:r,fromIndex:s,toIndex:o};this._trigger("reorder",null,d)}},_handleContextMenuSelect:function(e,i){var n=(i?i.item:t(e.target)).attr("id");n===f?this._menuCut(this._menu.tile):n===m?this._menuPaste(this._menu.tile,!0):n===g&&this._menuPaste(this._menu.tile,!1)},_getTileIndex:function(e){var t=this._getTileElements(!0);F(t);for(var i=t.length,n=0;n<i;n++)if(t[n]===e)return n;return-1},_setupReorderHandles:function(){var e=this.element,t=e.children();this._setupReorderHandlesForElem(t),e.on("dragstart"+this.reorderHandleEventNamespace,this._handleDragStartFunc).on("dragenter"+this.reorderHandleEventNamespace,this._handleDragEnterFunc).on("dragover"+this.reorderHandleEventNamespace,this._handleDragOverFunc).on("dragleave"+this.reorderHandleEventNamespace,this._handleDragLeaveFunc).on("dragend"+this.reorderHandleEventNamespace,this._handleDragEndFunc).on("drop"+this.reorderHandleEventNamespace,this._handleDropFunc)},_setupReorderHandlesForElem:function(e){var t=this.options;e.filter(t.reorderHandle).attr(a,"true").addClass(l),e.find(t.reorderHandle).attr(a,"true").addClass(l)},_tearDownReorderHandles:function(){var e=this.element,t=e.children();this._tearDownReorderHandlesForElem(t),e.off(this.reorderHandleEventNamespace)},_tearDownReorderHandlesForElem:function(e){var t=this.options;e.filter(t.reorderHandle).removeAttr(a).removeClass(l),e.find(t.reorderHandle).removeAttr(a).removeClass(l)},_handleDragStart:function(e){var i=this.options;if(i.reorderHandle){var n=e.originalEvent.target,s=t(n).closest(i.reorderHandle);if(!s||s.length<1)return}if(i.reorderHandle&&!this._bDragging){n=e.target;var r=this.element,a=b(n,r[0]);if(a){var o=this._getTileIndex(a);a._jetDataMasonryDragSourceIndex=o;var l={tile:t(a),fromIndex:o};if(!1!==this._trigger("beforeReorder",null,l)){var h=e.originalEvent;this._dragStart(a,h.pageX,h.pageY,h.dataTransfer)}}}},_handleDragEnter:function(i){if(this._bDragging){var n=i.originalEvent,s=n.relatedTarget,r=this.element[0],a=!1;if(s)a=r!=s&&!e.DomUtils.isAncestor(r,s);else if(this._dragLeftMasonryLayout){var o=document.elementFromPoint(n.clientX,n.clientY);a=o&&(o==r||e.DomUtils.isAncestor(r,o))}if(a)if(this._dragLeftMasonryLayout=!1,this._draggedTile){if(this._dropSite){t(this._dropSite).css("display",""),this._mlCommon.setup(!1,!0)}}else n.dataTransfer.dropEffect="none"}},_handleDragOver:function(e){if(!this._bDragging)return!1;var t=e.originalEvent;return t.dataTransfer.dropEffect="move",this._dragMove(t.pageX,t.clientX,t.clientY),e.preventDefault(),!1},_handleDragLeave:function(i){if(this._bDragging){var n=i.originalEvent,s=n.relatedTarget,a=this.element[0],o=!1;if(s)o=a!=s&&!e.DomUtils.isAncestor(a,s);else{var l=document.elementFromPoint(n.clientX,n.clientY);o=l&&l!=a&&!e.DomUtils.isAncestor(a,l)}if(o)if(this._dragLeftMasonryLayout=!0,this._dropSite)t(this._dropSite).css("display",r),this._mlCommon.setup(!1,!0)}},_clearDragStartHideTileTimeout:function(){if(this._dragStartHideTileTimeout){clearTimeout(this._dragStartHideTileTimeout),this._dragStartHideTileTimeout=null;var e=this._draggedTile;e&&t(e).removeClass("oj-drag")}},_handleDragEnd:function(i){if(this._clearDragStartHideTileTimeout(),this._bDragging&&!this._bDropping){var n=this._draggedTile;if(n&&this._dropSite){var s=this._dropSite,r=this.element[0];if(e.DomUtils.isAncestor(r,n))t(s).css("display",""),this._removeTileOriginalOrder(s),s.parentNode.removeChild(s),t(n).css("display",""),this._insertTileOriginalOrder(n,n._jetDataMasonryOriginalOrder-1),this._mlCommon.setup(!1,!0);delete n._jetDataMasonryDragSourceIndex}this._draggedTile=null,this._dropSite=null,this._prevTileUnderPoint=null,this._prevCellUnderPoint=null,this._bDragMoveTransition=!1,this._bMouseMoved=!1,this._dragOffset=null,this._bDragEndTransition=!1,this._bDragging=!1}},_handleDrop:function(e){if(!this._bDragging)return!1;var t=this._mlCommon;t.isInLayoutCycle()&&t.finishLayoutCycle(),this._clearDragStartHideTileTimeout();var i=e.originalEvent;return this._drop(this._draggedTile,i.pageX,i.pageY),e.stopPropagation(),!1},_dragStart:function(i,n,s,a){this._bDragging=!0,this._bDropping=!1,this._bMouseMoved=!1,this._bDragStartTileHidden=!1,this._draggedTile=i;var o=this.element[0],l=O(i);this._dropSite=document.createElement("div");var d=this._dropSite;d._jetDataMasonryOriginalOrder=i._jetDataMasonryOriginalOrder,d.className=l+" oj-drop "+h;var u=d.style,_=i.style;u.top=_.top,this._bRTL?u.right=_.right:u.left=_.left;var c=T(i);o.insertBefore(d,i);var f={left:n-c.left,top:s-c.top};this._dragOffset=f,t(i).addClass("oj-drag"),a.effectAllowed="move",a.setData("text/html",i.outerHTML),a.setDragImage(i,f.left,f.top);var m=this;this._dragStartHideTileTimeout=setTimeout(function(){m._bDragStartTileHidden=!0,_.display=r,t(i).removeClass("oj-drag"),m._dragStartHideTileTimeout=null,e.Components.subtreeHidden(i)},0)},_dragMove:function(e,i,n){if(this._bMouseMoved=!0,this._bDragStartTileHidden&&!this._bDragMoveTransition){var s=this.element[0],r=document.elementFromPoint(i,n),a=b(r,s),o=!1;if(a){var l=t(a),h=this.options.reorderHandle;if(h)if(l.is(h))o=!0;else{var d=l.find(h);o=d&&d.length>0}}var u=!1;if(null==a||a===this._dropSite||a===this._draggedTile)this._prevTileUnderPoint=null,this._prevCellUnderPoint=null;else if(this._prevTileUnderPoint&&this._prevCellUnderPoint&&this._prevTileUnderPoint!=a){var _=this._getCellPosition(i,n);_&&_.row==this._prevCellUnderPoint.row&&_.col==this._prevCellUnderPoint.col&&(u=!0)}if(a&&!u&&a!==this._dropSite&&a!==this._draggedTile&&o){var c=e-T(s).left,f=I(this._dropSite),m=c>=a.offsetLeft+.5*a.offsetWidth;if(this._removeTileOriginalOrder(this._dropSite),m&&!this._bRTL||!m&&this._bRTL){var g=I(a);g?(this._insertTileOriginalOrder(this._dropSite,g._jetDataMasonryOriginalOrder-1),s.insertBefore(this._dropSite,g)):(this._insertTileOriginalOrder(this._dropSite,a._jetDataMasonryOriginalOrder),s.appendChild(this._dropSite))}else this._insertTileOriginalOrder(this._dropSite,a._jetDataMasonryOriginalOrder-1),s.insertBefore(this._dropSite,a);if(f!==I(this._dropSite)){var p=this._mlCommon,v=a,y=this._getCellPosition(i,n);this._bDragMoveTransition=p.setup(!1,!0),this._bDragMoveTransition&&(this._prevTileUnderPoint=v,this._prevCellUnderPoint=y)}}}},_handleDragMoveTransitionEnd:function(){this._bDragMoveTransition=!1},_drop:function(i,s,r){this._bDropping=!0;var a=this.element[0],o=this._dropSite;this._dropSite=null,this._prevTileUnderPoint=null,this._prevCellUnderPoint=null,e.Components.subtreeDetached(i),a.insertBefore(i,o),a.removeChild(o),e.Components.subtreeAttached(i),i._jetDataMasonryOriginalOrder=o._jetDataMasonryOriginalOrder;var l=i.style;l.display="",e.Components.subtreeShown(i);var h=T(a),d=this._dragOffset;l.top=r-d.top-h.top+n;var u=s-d.left-h.left;if(this._bRTL?(l.right=a.offsetWidth-(u+t(i).outerWidth(!0))+n,l.left=""):l.left=u+n,this._dragOffset=null,this._bMouseMoved){var _=this._mlCommon;this._bDragEndTransition=_.setup(!1,!0)}else this._handleDragEndTransitionEnd()},_handleDragEndTransitionEnd:function(){this._bDragEndTransition=!1,this._bDragging=!1,this._bDropping=!1,this._bMouseMoved=!1,this._bDragStartTileHidden=!1;var e=this._draggedTile;this._draggedTile=null;var i=e._jetDataMasonryDragSourceIndex;delete e._jetDataMasonryDragSourceIndex;var n=this._getTileIndex(e),s={tile:t(e),fromIndex:i,toIndex:n};this._trigger("reorder",null,s)},_getCellPosition:function(e,t){var i=this._mlCommon.getCellSize(),n=null;return i&&(n={col:parseInt(e/i.w,10),row:parseInt(t/i.h,10)}),n},_addBusyState:function(t){var i=this.element,n=e.Context.getContext(i[0]).getBusyContext(),s="MasonryLayout";s+=" (id='"+i.attr("id")+"')";var r={description:s+=": "+t};return n.addBusyState(r)},getNodeBySubId:function(e){return this._super(e)},getSubIdByNode:function(e){return this._super(e)}});var n="px",s="hidden",r="none",a="draggable",o="oj-disabled",l="oj-draggable",h="oj-masonrylayout-tile",d=/oj-masonrylayout-tile-[0-9]+x[0-9]+/,u="."+h,_="oj-masonrylayout-tile-transition-show-from",c="JET MasonryLayout: 'disabled' property not supported",f="ojmasonrylayoutcut",m="ojmasonrylayoutpastebefore",g="ojmasonrylayoutpasteafter",p={cut:f,"paste-before":m,"paste-after":g},v={cut:"labelCut","paste-before":"labelPasteBefore","paste-after":"labelPasteAfter"},y=25,T=function(e){return t(e).offset()},S=function(e,i){t(e).addClass(i)},C=function(e,i){t(e).removeClass(i)},O=function(e){var i=null,n=t(e).attr("class").match(d);return n&&(i=n[0]),i},E=function(e){var n=null,s=t(e).attr("class").match(d);if(s){var r=s[0].substring(h.length+1),a=r.indexOf("x"),o=r.substring(0,a),l=r.substring(a+1);n={colSpan:i._getCSSLengthAsInt(o),rowSpan:i._getCSSLengthAsInt(l)}}return n},F=function(e){return e&&e.sort(D),e},D=function(e,t){return t._jetDataMasonryOriginalOrder<e._jetDataMasonryOriginalOrder?1:e._jetDataMasonryOriginalOrder<t._jetDataMasonryOriginalOrder?-1:0},b=function(e,t){for(var i=e;i;){var n=i.style;if(n&&(n.visibility===s||n.display===r))break;var a=i.parentNode;if(a===t)return i;i=a}return null},I=function(e){for(var t=e;t;){var i=t.nextSibling,n=!0;if(i){var a=i.style;!a||a.visibility!==s&&a.display!==r||(n=!1)}if(i&&1===i.nodeType&&n)return i;t=i}return null}}(),e.CustomElementBridge.registerMetadata("oj-masonry-layout","baseComponent",{properties:{reorderHandle:{type:"string"},translations:{type:"Object",properties:{labelCut:{type:"string",value:"Cut"},labelPasteAfter:{type:"string",value:"Paste After"},labelPasteBefore:{type:"string",value:"Paste Before"}}}},methods:{insertTile:{},removeTile:{},resizeTile:{}},events:{animateEnd:{},animateStart:{},beforeInsert:{},beforeRemove:{},beforeReorder:{},beforeResize:{},insert:{},remove:{},reorder:{},resize:{}},extension:{_WIDGET_NAME:"ojMasonryLayout"}}),e.CustomElementBridge.register("oj-masonry-layout",{metadata:e.CustomElementBridge.getMetadata("oj-masonry-layout")})});