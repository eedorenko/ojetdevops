/**
 * @license
 * Copyright (c) 2014, 2018, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";define(["ojs/ojcore","knockout","ojs/ojkoshared"],function(e,o){!function(){function o(o){if(null!=o){var n=e.__AttributeUtils.getExpressionInfo(o).expr;return null==n&&(n="'"+o+"'"),n}return null}e.__KO_CUSTOM_BINDING_PROVIDER_INSTANCE.addPostprocessor({preprocessNode:function(e,n){var t;if(1===e.nodeType){var r=e.nodeName.toLowerCase();if("oj-slot"===r||"oj-bind-slot"===r){for(var i=["name","slot","index"],s="ko _ojBindSlot_:{",l=[],d=0;d<i.length;d++){var a=i[d],p=o(e.getAttribute(a));p&&l.push(a+":"+p)}s+=l.join(","),s+="}";var u=document.createComment(s),m=document.createComment("/ko");t=[u];var c=e.parentNode;for(c.insertBefore(u,e);e.childNodes.length>0;){var C=e.childNodes[0];c.insertBefore(C,e),t.push(C)}t.push(m),c.replaceChild(m,e)}}return t||n}})}(),e.CompositeTemplateRenderer={},e.CompositeTemplateRenderer.renderTemplate=function(n,t,r){var i=e.CompositeTemplateRenderer._storeNodes(t,r);o.virtualElements.setDomNodeChildren(t,r),e.CompositeTemplateRenderer.invokeViewModelMethod(n.viewModel,"attached",[n.viewModelContext]),e.CompositeTemplateRenderer.invokeViewModelMethod(n.viewModel,"connected",[n.viewModelContext]);var s=e.CompositeTemplateRenderer._createKoBindingContext(t).createChildContext(n.viewModel,void 0,function(o){o[e.Composite.__COMPOSITE_PROP]=t,o.__oj_slots=n.slotMap,o.__oj_nodestorage=i,o.$slotNodeCounts=n.slotNodeCounts,o.$slotCounts=n.slotNodeCounts,o.$props=n.props,o.$properties=n.props,o.$unique=n.unique,o.$uniqueId=n.uniqueId,o.$parent=null,o.$parentContext=null,o.$parents=null});o.applyBindingsToDescendants(s,t),e.CompositeTemplateRenderer.invokeViewModelMethod(n.viewModel,"bindingsApplied",[n.viewModelContext])},e.CompositeTemplateRenderer.getEnclosingComposite=function(n){for(var t=null,r=o.contextFor(n);r&&!t;r=r.$parentContext)t=r[e.Composite.__COMPOSITE_PROP];return t},e.CompositeTemplateRenderer.createTracker=function(){return o.observable()},e.CompositeTemplateRenderer.invokeViewModelMethod=function(e,n,t){if(null!=e){var r=e[n];return"function"==typeof r?o.ignoreDependencies(r,e,t):void 0}},e.CompositeTemplateRenderer._storeNodes=function(o,n){var t,r=o.childNodes;if(r){(t=document.createElement("div")).setAttribute("data-bind","_ojNodeStorage_"),t.style.display="none",n.push(t);for(var i=[],s=0;s<r.length;s++){var l=r[s];e.BaseCustomElementBridge.isSlotAssignable(l)&&i.push(l)}i.forEach(function(e){t.appendChild(e)}),e.Components&&e.Components.subtreeHidden(t)}return t},e.CompositeTemplateRenderer._createKoBindingContext=function(e){var n=document.createElement("div");o.applyBindings(null,n);var t=o.contextFor(n);return o.cleanNode(n),t},o.bindingHandlers._ojNodeStorage_={init:function(){return{controlsDescendantBindings:!0}}},o.bindingHandlers._ojBindSlot_={init:function(n,t,r,i,s){o.utils.domNodeDisposal.addDisposeCallback(n,function(t){var r=t.__oj_nodestorage;if(r)for(var i=o.virtualElements.firstChild(n);i;){var s=o.virtualElements.nextSibling(i);null!=i.__oj_slots&&(r.appendChild(i),e.Components&&e.Components.subtreeHidden(i)),i=s}}.bind(null,s));var l=s.__oj_slots,d=t(),a=o.utils.unwrapObservable,p=a(d.name)||"",u=a(d.index),m=null!=u?[l[p][u]]:l[p];if(m){for(var c=0;c<m.length;c++){m[c].__oj_slots=a(d.slot)||""}if(o.virtualElements.setDomNodeChildren(n,m),e.Components)for(c=0;c<m.length;c++)e.Components.subtreeShown(m[c]);return{controlsDescendantBindings:!0}}}},o.virtualElements.allowedBindings._ojBindSlot_=!0});