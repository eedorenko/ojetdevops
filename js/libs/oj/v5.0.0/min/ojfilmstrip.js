/**
 * @license
 * Copyright (c) 2014, 2018, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";define(["ojs/ojcore","jquery","ojs/ojcomponentcore","promise"],function(e,t){e.FilmStripPagingModel=function(){this.Init()},e.Object.createSubclass(e.FilmStripPagingModel,e.EventSource,"oj.FilmStripPagingModel"),e.FilmStripPagingModel.prototype.Init=function(){e.FilmStripPagingModel.superclass.Init.call(this),this._page=-1,this._totalSize=0,this._pageSize=-1},e.FilmStripPagingModel.prototype.setTotalSize=function(e){this._totalSize=e},e.FilmStripPagingModel.prototype.getPageSize=function(){return this._pageSize},e.FilmStripPagingModel.prototype.getPage=function(){return this._page},e.FilmStripPagingModel.prototype.setPage=function(e,t){e=parseInt(e,10);try{var i=this.getPageCount(),s=this._page,n=this._pageSize,r=n;if(t&&t.pageSize&&(r=t.pageSize),0===this._totalSize&&-1===r)return Promise.resolve();var a=Math.ceil(this._totalSize/r);if(e<0||e>a-1)throw new Error("JET FilmStrip: Invalid 'page' set: "+e);var o=!1;if(e!=s||r!=n){if(!1===this.handleEvent("beforePage",{page:e,previousPage:s}))return Promise.reject();o=!0}this._page=e,this._pageSize=r;var h=this.getPageCount(),l=this;return new Promise(function(t,n){i!=h&&l.handleEvent("pageCount",{pageCount:h,previousPageCount:i}),o&&l.handleEvent("page",{page:e,previousPage:s}),t(null)})}catch(e){return Promise.reject(e)}},e.FilmStripPagingModel.prototype.getStartItemIndex=function(){return-1===this._page&&-1===this._pageSize?-1:this._page*this._pageSize},e.FilmStripPagingModel.prototype.getEndItemIndex=function(){return Math.min(this.getStartItemIndex()+this._pageSize,this._totalSize)-1},e.FilmStripPagingModel.prototype.getPageCount=function(){return Math.ceil(this._totalSize/this._pageSize)},e.FilmStripPagingModel.prototype.totalSize=function(){return this._totalSize},e.FilmStripPagingModel.prototype.totalSizeConfidence=function(){return"actual"},function(){e.__registerWidget("oj.ojFilmStrip",t.oj.baseComponent,{defaultElement:"<div>",widgetEventPrefix:"oj",options:{maxItemsPerPage:0,orientation:"horizontal",currentItem:{index:0},arrowPlacement:"adjacent",arrowVisibility:"auto"},_ComponentCreate:function(){this._super();var t=this.element;t.addClass("oj-filmstrip oj-component").attr("tabindex",0).attr("role","region"),t.uniqueId();var s=this.options;if(s.disabled&&e.Logger.warn(Z),s.orientation!==f&&s.orientation!==Y)throw new Error(d+s.orientation);if(s.arrowPlacement!==i&&s.arrowPlacement!==O)throw new Error(c+s.arrowPlacement);if(s.arrowVisibility!==J&&s.arrowVisibility!==_&&s.arrowVisibility!==v&&s.arrowVisibility!==n)throw new Error(g+s.arrowVisibility);this.touchEventNamespace=this.eventNamespace+"Touch",this.mouseEventNamespace=this.eventNamespace+"Mouse",this.keyEventNamespace=this.eventNamespace+"Key",this.navArrowHoverableEventNamespace=this.eventNamespace+"NavArrowHoverable",s.currentItem=this._convertItemToObj(s.currentItem),this._setup(!0),this._populateItemObj(s.currentItem),this.option(P,s.currentItem,{_context:{internalSet:!0,writeback:!0}})},refresh:function(){this._super(),this._setup(!1)},getItemsPerPage:function(){return this._itemsPerPage},getPagingModel:function(){return this._pagingModel},_NotifyShown:function(){this._super(),this._needsSetup?this._setup(this._needsSetup[0]):this._handleResize()},_NotifyAttached:function(){this._super(),this._needsSetup?this._setup(this._needsSetup[0]):this._handleResize()},_setup:function(i){var s=this;if(i&&!this._pagingModel&&(this._pagingModel=new e.FilmStripPagingModel),i&&!this._filterNestedFilmStripsFunc&&(this._filterNestedFilmStripsFunc=function(e,i){return t(i).closest(".oj-filmstrip")[0]===s.element[0]}),!this._canCalculateSizes()){var n=!1;return this._needsSetup&&(n=this._needsSetup[0]),void(this._needsSetup=[i||n])}this._needsSetup=null,this._bRTL="rtl"===this._GetReadingDirection(),this._bTouchSupported=e.DomUtils.isTouchSupported();var r=this.element;i?(this._itemsPerPage=0,this._handlePageFunc=function(e){s._handlePage(e)},this._componentSize=0,this._itemSize=-1,this._handleTransitionEndFunc=function(e){s._handleTransitionEnd()},this._handleResizeFunc=function(e,t){s._handleResize()},this._bTouchSupported&&(this._handleTouchStartFunc=function(e){s._handleTouchStart(e)},this._handleTouchMoveFunc=function(e){s._handleTouchMove(e)},this._handleTouchEndFunc=function(e){s._handleTouchEnd(e)},this._addTouchListeners()),this._handleMouseDownFunc=function(e){s._handleMouseDown(e)},this._handleMouseMoveFunc=function(e){s._handleMouseMove(e)},this._handleMouseUpFunc=function(e){s._handleMouseUp(e)},this._addMouseListeners(),this._handleKeyDownFunc=function(e){s._handleKeyDown(e)},this._addKeyListeners()):this._destroyInternal();for(var a=r.children(),o=0;o<a.length;o++)e.Components.subtreeDetached(a[o]);var h=this._pagingModel;if(i&&h.on("page",this._handlePageFunc),h.setTotalSize(a.length),this._wrapChildren(),a.length>0){this._adjustSizes();for(o=0;o<a.length;o++)e.Components.subtreeAttached(a[o]);e.DomUtils.addResizeListener(r[0],this._handleResizeFunc,X)}},_destroy:function(){this._bTouchSupported&&(this._removeTouchListeners(),this._handleTouchStartFunc=null,this._handleTouchMoveFunc=null,this._handleTouchEndFunc=null),this._removeMouseListeners(),this._handleMouseDownFunc=null,this._handleMouseMoveFunc=null,this._handleMouseUpFunc=null,this._removeKeyListeners(),this._handleKeyDownFunc=null,this._destroyInternal(),this._pagingModel.off("page",this._handlePageFunc),this._handlePageFunc=null,this._pagingModel=null,this._handleResizeFunc=null,this._handleTransitionEndFunc=null,this._filterNestedFilmStripsFunc=null;var e=this.element;e.removeClass("oj-filmstrip oj-component "+I).removeAttr("tabindex role"),e.removeUniqueId(),this._super()},_destroyInternal:function(){this._deferredHandleResize=!1,this._resolveBusyState();var t=this.element;e.DomUtils.removeResizeListener(t[0],this._handleResizeFunc),this._itemSize=-1,this._queuedHandleResize&&(clearTimeout(this._queuedHandleResize),this._queuedHandleResize=null);for(var i=this._getItems(),s=0;s<i.length;s++)e.Components.subtreeDetached(i[s]);this._clearCalculatedSizes(),this._getItemContainers().unwrap(),this._unwrapChildren();for(s=0;s<i.length;s++)e.Components.subtreeAttached(i[s])},_setOption:function(t,s,r){var a=this.options,o=!1,h=-1,l=this._pagingModel,p=l.getPage();switch(t){case"disabled":e.Logger.warn(Z);break;case"orientation":if(s!==f&&s!==Y)throw new Error(d+s);o=a.orientation!=s;break;case"maxItemsPerPage":o=a.maxItemsPerPage!=s;break;case"arrowPlacement":if(s!==i&&s!==O)throw new Error(c+s);o=a.arrowPlacement!=s;break;case"arrowVisibility":if(s!==J&&s!==_&&s!==v&&s!==n)throw new Error(g+s);o=a.arrowVisibility!=s;break;case P:s=this._convertItemToObj(s),this._populateItemObj(s);var m=a.currentItem;if(m&&s&&(m.id!=s.id||m.index!=s.index)&&((h=this._findPage(s))<0||h>=l.getPageCount()))throw new Error(u+s)}switch(this._super(t,s,r),t){case P:h>-1&&h!=p&&l.setPage(h)}o&&this._setup(!1)},_handleResize:function(){if(this._busyStateResolveFunc)this._deferredHandleResize=!0;else if(this._bHandlingResize){if(!this._queuedHandleResize){var e=this;this._queuedHandleResize=setTimeout(function(){e._queuedHandleResize=null,e._handleResize()},0)}}else this._bHandlingResize=!0,this._adjustSizes(!0),this._bHandlingResize=!1},_isHorizontal:function(){return this.options.orientation!==Y},_getCssPositionAttr:function(){return this._isHorizontal()?this._bRTL?"right":"left":"top"},_getCssSizeAttr:function(){return this._isHorizontal()?"width":"height"},_canCalculateSizes:function(){var e=document.createElement("div"),t=e.style;t.position="absolute",t.width="10px",t.height="10px";var i=this.element[0];i.appendChild(e);var s=!1;try{s=e.offsetWidth>0&&e.offsetHeight>0}catch(e){}return i.removeChild(e),s},_wrapChildren:function(){var e=this.element,t=this._isHorizontal(),s=e.children();s.addClass(M).wrap("<div class='"+z+" "+T+"'></div>");var n=this._getCssPositionAttr(),r=e.children().wrapAll("<div class='"+z+" "+N+"' style='"+n+": 0px;'></div>").parent();this._pagesWrapper=r;var a=this.options;a.arrowVisibility!==_&&a.arrowPlacement===i&&(this._contentWrapper=r.wrap("<div class='"+z+" oj-filmstrip-content-container'></div>").parent()),e.addClass(z),t||e.addClass(U),a.arrowVisibility!==_&&s.length>0&&(this._prevButton=this._createPrevNavArrow(),this._nextButton=this._createNextNavArrow(),this._navArrowsShownOnHover()&&this._setupNavArrowsHoverable())},_unwrapChildren:function(){var e=this.element,t=this._getItems();this._tearDownNavArrowsHoverable(),this._prevButton&&(this._UnregisterChildNode(this._prevButton),this._prevButton=null),this._nextButton&&(this._UnregisterChildNode(this._nextButton),this._nextButton=null);var i=e.children(q+y);i&&i.remove(),t.removeClass(M).unwrap().unwrap(),this._pagesWrapper=null,this._contentWrapper&&(t.unwrap(),this._contentWrapper=null),e.removeClass(z+" "+U)},_setupNavArrowsHoverable:function(){this.element.on("mouseenter"+this.navArrowHoverableEventNamespace,function(e){t(e.currentTarget).hasClass("oj-disabled")||t(e.currentTarget).addClass(I)}).on("mouseleave"+this.navArrowHoverableEventNamespace,function(e){t(e.currentTarget).removeClass(I)})},_tearDownNavArrowsHoverable:function(){this.element.off(this.navArrowHoverableEventNamespace)},_navArrowsShownOnHover:function(){var e=this.options,t=e.arrowVisibility;return t===v||t===n&&e.arrowPlacement===O},_hasPrevPage:function(){return this._pagingModel.getPage()>0},_hasNextPage:function(){var e=this._pagingModel;return e.getPage()<e.getPageCount()-1},_prevPage:function(){if(this._hasPrevPage()){var e=this._pagingModel;e.setPage(e.getPage()-1)}},_nextPage:function(){if(this._hasNextPage()){var e=this._pagingModel;e.setPage(e.getPage()+1)}},_displayNavigationArrow:function(e,t){this.options.arrowPlacement===i?t.css("visibility",e?"":_):t.parent().css("display",e?"":w)},_updateNavigationArrowsDisplay:function(){if(this.options.arrowVisibility!==_){var e=this._pagingModel,t=e.getPage(),i=e.getPageCount();this._displayNavigationArrow(0!==t,this._prevButton),this._displayNavigationArrow(t!==i-1,this._nextButton)}},_createPrevNavArrow:function(){var e=this.element,t=this._isHorizontal()?V:W,i=this._createNavigationArrowContainer(t);this.options.arrowPlacement===O?e.append(i):e.prepend(i);var s=te(this.getTranslatedString("labelAccArrowPreviousPage")),n=te(this.getTranslatedString("tipArrowPreviousPage")),r=this._createNavigationArrow(i,t,s,n),a=this;return r.on("click",function(){a._prevPage()}),r},_createNextNavArrow:function(){var e=this.element,t=this._isHorizontal()?b:S,i=this._createNavigationArrowContainer(t);e.append(i);var s=te(this.getTranslatedString("labelAccArrowNextPage")),n=te(this.getTranslatedString("tipArrowNextPage")),r=this._createNavigationArrow(i,t,s,n),a=this;return r.on("click",function(){a._nextPage()}),r},_createNavigationArrowContainer:function(e){var i=t(document.createElement("div"));return i.addClass(y+" "+e),this.options.arrowPlacement===O&&(i.addClass("oj-filmstrip-arrow-container-overlay"),this._navArrowsShownOnHover()&&i.addClass(F)),i},_createNavigationArrow:function(e,t,s,n){var r="<div class='"+C+" oj-default oj-enabled "+t+"' role='button' tabindex='-1'";r+="><span class='oj-filmstrip-arrow-icon "+t+" oj-component-icon'></span></div>",e.append(r);var a=this.element.attr("id"),o=e.children(q+C).eq(0);o.uniqueId();var h=o.attr("id");return s&&o.attr("aria-label",s),n&&o.attr("title",n),o.attr("aria-labelledby",h+" "+a),this._AddHoverable(o),this._AddActiveable(o),this.options.arrowPlacement===i&&this._navArrowsShownOnHover()&&o.addClass(F),o},_getItemContainers:function(){return this._pagesWrapper.find(q+T).filter(this._filterNestedFilmStripsFunc)},_getItems:function(){return this._pagesWrapper.find(q+M).filter(this._filterNestedFilmStripsFunc)},_getPages:function(){return this._pagesWrapper.children(q+j)},_clearCalculatedSizes:function(){var e=this._pagesWrapper;this._getPages().css(p,l).css(Q,l),this._getItemContainers().css(p,l).css(Q,l),e.css(this._getCssSizeAttr(),l)},_adjustSizes:function(n){this._clearCalculatedSizes();var a=this.options,o=this._isHorizontal(),h=a.maxItemsPerPage,u=h<1,d=this.element,c=this._getItemContainers();if(this._itemSize<0){var g=this._getItemIndex(a.currentItem),m=t(c[g]),f=m.children(q+M);f.css(r,l),e.Components.subtreeShown(f[0]),this._itemSize=o?m.width():m.height()}var v=o?d.width():d.height();if(a.arrowVisibility!==_&&a.arrowPlacement===i){var P=d.children(q+y).eq(0);v-=2*(o?P.width():P.height())}if(this._componentSize=v,!u){var S=Math.max(Math.floor(v/this._itemSize),1);S<h&&(h=S)}var b=u?Math.max(Math.floor(v/this._itemSize),1):h,C=v/b;c.css(p,C+K).css(Q,C+K);var F=Math.ceil(c.length/b),I=this._getPages(),T=!1,N=this._pagingModel;if(N.getPageCount()!=F||this._itemsPerPage!=b||!I||I.length<1){if(T=!0,n)for(var E=0;E<c.length;E++)e.Components.subtreeDetached(c[E]);I&&I.length>0&&c.unwrap();for(E=0;E<c.length;E+=b){c.slice(E,E+b).wrapAll("<div class='"+z+" "+j+"' style='"+r+": "+w+";' "+s+"='true'></div>")}if(n)for(E=0;E<c.length;E++)e.Components.subtreeAttached(c[E])}(I=this._getPages()).css(p,v+K).css(Q,v+K);var x=this._pagesWrapper,A=this._contentWrapper;x.css(this._getCssSizeAttr(),v),A&&A.css(this._getCssSizeAttr(),v);var H=0;if(a.currentItem&&(H=this._findPage(a.currentItem,b)),N.getPageCount()!=F||this._itemsPerPage!=b||N.getPage()!=H)N.setPage(H,{pageSize:b});else if(T){var R=N.getPage();this._handlePage({previousPage:R,page:R})}},_handlePage:function(e){var i=e.page,s=e.previousPage,n=this._pagesWrapper,r=this._getPages(),a=this._pagingModel.getPageSize(),o=s<0||s==i||this._itemsPerPage!=a;this._itemsPerPage=a;var h=null;o||(h=t(r[s]));var l=this._getCssPositionAttr(),u=t(r[i]),d=u.is(m);d&&this._unhidePage(u);var c=this._bDragInit;if(s>-1&&!o&&(c=!0,n.css(this._getCssSizeAttr(),2*this._componentSize),i<s&&d&&n.css(l,-this._componentSize+K),i>s?(h.addClass(A),u.addClass(x)):(h.addClass(R),u.addClass(H))),this._busyStateResolveFunc=this._addBusyState("scrolling"),c){var g=this,p=this._bDragInit;if(p&&s<0)r.filter(G).addClass(E);setTimeout(function(){g._finishHandlePage(i,s,o,p)},25)}else this._finishHandlePage(i,s,o)},_finishHandlePage:function(e,i,s,n){var r=this._pagesWrapper;if(s||(this._bPageChangeTransition=!0,r.on("transitionend"+this.eventNamespace+" webkitTransitionEnd"+this.eventNamespace,this._handleTransitionEndFunc)),s)this._handleTransitionEnd();else{var a=this._getPages();if(n&&ee(a),i>-1){var o=e>i,h=t(a[i]),l=t(a[e]);h.addClass(E),l.addClass(E),o?(h.removeClass(A),l.removeClass(x),h.addClass(k),l.addClass(D)):(h.removeClass(R),l.removeClass(H),h.addClass(L),l.addClass(B))}else if(n){var u=a.filter(G);$(u,"translate3d(0, 0, 0)")}}},_handleTransitionEnd:function(){this._bPageChangeTransition=!1;var i=this._pagesWrapper,s=this._getCssPositionAttr();i.off(this.eventNamespace).css(this._getCssSizeAttr(),this._componentSize).css(s,"0px");var n=null;(e.FocusUtils.containsFocus(i[0])||this._nextButton&&e.FocusUtils.containsFocus(this._nextButton[0])||this._prevButton&&e.FocusUtils.containsFocus(this._prevButton[0]))&&(n=document.activeElement);for(var r=this._pagingModel.getPage(),a=this._getPages(),o=0;o<a.length;o++)o!=r&&this._hidePage(t(a[o]));if(a.removeClass(E+" "+k+" "+D+" "+L+" "+B),ee(a),this._updateNavigationArrowsDisplay(),n&&t(n).is(m)){var h=this.element,l=e.FocusUtils.getFirstTabStop(a[r]);l?e.FocusUtils.focusElement(l):e.FocusUtils.focusElement(h[0])}var u=this.options;if(this._findPage(u.currentItem)!=r){var d=this._getFirstItemOnPage(r);d&&this.option(P,d,{_context:{writeback:!0}})}this._deferredHandleResize&&(this._deferredHandleResize=!1,this._handleResize()),this._resolveBusyState()},_getItemIndex:function(t){var i=-1;if(t){var s=this._getItems();if(t.id&&e.DomUtils.isValidIdentifier(t.id))for(var n=0;n<s.length;n++){var r=s[n].id;if(r&&r.length>0&&r===t.id){i=n;break}}else null!=t.index&&t.index>=0&&t.index<s.length&&(i=t.index)}return i},_convertItemToObj:function(e){var t=null;return"object"==typeof e?t=e:"number"==typeof e?t={index:e}:"string"==typeof e&&(t={id:e}),t},_populateItemObj:function(e){if(e&&this._pagingModel.getPage()>=0){var t=this._getItemIndex(e);if(e.index=t,null==e.id&&-1!==t){var i=this._getItems();e.id=i[t].id}}},_findPage:function(e,t){var i=this._getItemIndex(e),s=-1;return i>-1&&(void 0===t&&(t=this._itemsPerPage),s=Math.floor(i/t)),s},_getFirstItemOnPage:function(e,t,i){var s=this._pagingModel;if(void 0===t&&(t=s.getPageCount()),e>=0&&e<t){var n=this._getItems();void 0===i&&(i=this._itemsPerPage);var r=e*i;if(r<n.length)return{id:n[r].id,index:r}}return null},_hidePage:function(t){e.Components.subtreeHidden(t[0]),t.css(r,w).attr(s,"true"),t.find(q+M).filter(this._filterNestedFilmStripsFunc).css(r,w)},_unhidePage:function(t){t.css(r,l).removeAttr(s),t.find(q+M).filter(this._filterNestedFilmStripsFunc).css(r,l),e.Components.subtreeShown(t[0])},_addKeyListeners:function(){this.element.on("keydown"+this.keyEventNamespace,this._handleKeyDownFunc)},_removeKeyListeners:function(){this.element.off(this.keyEventNamespace)},_addMouseListeners:function(){this.element.on("mousedown"+this.mouseEventNamespace,this._handleMouseDownFunc).on("mousemove"+this.mouseEventNamespace,this._handleMouseMoveFunc).on("mouseup"+this.mouseEventNamespace,this._handleMouseUpFunc)},_removeMouseListeners:function(){this.element.off(this.mouseEventNamespace)},_addTouchListeners:function(){this.element.on("touchstart"+this.touchEventNamespace,this._handleTouchStartFunc).on("touchmove"+this.touchEventNamespace,this._handleTouchMoveFunc).on("touchend"+this.touchEventNamespace,this._handleTouchEndFunc).on("touchcancel"+this.touchEventNamespace,this._handleTouchEndFunc)},_removeTouchListeners:function(){this.element.off(this.touchEventNamespace)},_handleKeyDown:function(e){var i=this._pagingModel,s=i.getPage(),n=-1;switch(e.keyCode){case t.ui.keyCode.RIGHT:n=this._bRTL?s-1:s+1;break;case t.ui.keyCode.LEFT:n=this._bRTL?s+1:s-1;break;case t.ui.keyCode.DOWN:n=s+1;break;case t.ui.keyCode.UP:n=s-1;break;case t.ui.keyCode.HOME:n=0;break;case t.ui.keyCode.END:n=i.getPageCount()-1;break;default:return}n>-1&&n<i.getPageCount()&&i.setPage(n),e.preventDefault()},_handleMouseDown:function(e){var t=e.originalEvent;this._dragScrollStart(t)},_handleMouseMove:function(e){var t=e.originalEvent;this._dragScrollMove(e,t)},_handleMouseUp:function(e){this._dragScrollEnd()},_handleTouchStart:function(e){var t=e.originalEvent.touches;if(1===t.length){var i=t[0];this._dragScrollStart(i)}},_handleTouchMove:function(e){var t=e.originalEvent.touches[0];this._dragScrollMove(e,t),(this._bTouch||this._scrolledForThisTouch)&&e.preventDefault()},_handleTouchEnd:function(e){this._dragScrollEnd()},_dragScrollStart:function(e){if(this._pagingModel.getPageCount()>1&&!this._bPageChangeTransition){this._bTouch=!0,this._bDragInit=!1;var t=this._isHorizontal();this._touchStartCoord=t?e.pageX:e.pageY,this._touchStartCoord2=t?e.pageY:e.pageX}},_initDragScroll:function(e){var i=this._isHorizontal();this._touchStartCoord=i?e.pageX:e.pageY,this._touchStartCoord2=i?e.pageY:e.pageX;var s=this._getCssPositionAttr(),n=this._pagesWrapper,r=this._pagingModel,a=this._getPages(),o=1;r.getPage()>0&&(this._unhidePage(t(a[r.getPage()-1])),n.css(s,-this._componentSize+K),o++),r.getPage()<r.getPageCount()-1&&(this._unhidePage(t(a[r.getPage()+1])),o++),o>1&&n.css(this._getCssSizeAttr(),o*this._componentSize),this._touchStartScroll=parseInt(n.css(s),10)},_dragScrollMove:function(e,i){if(this._bTouch){var s=this._isHorizontal(),n=(s?i.pageX:i.pageY)-this._touchStartCoord,r=(s?i.pageY:i.pageX)-this._touchStartCoord2;if(Math.abs(r)>Math.abs(n)&&(this._bTouch=!1,this._scrolledForThisTouch=!1),this._bDragInit){var l=s&&this._bRTL?n>0:n<0,u=this._pagingModel,d=u.getPage();if(l&&d<u.getPageCount()-1||!l&&d>0){var c=this.element[0],g=Math.min(o*(s?c.offsetWidth:c.offsetHeight),h),p=this._getCssPositionAttr(),_=this._pagesWrapper,m=this._getPages();if(Math.abs(n)>=g){var f=l?d+1:d-1,v=l?d-1:d+1;if(v>-1&&v<u.getPageCount()&&this._hidePage(t(m[v])),l&&v>-1){var P=parseInt(_.css(p),10);_.css(p,P+this._componentSize+K)}_.css(this._getCssSizeAttr(),2*this._componentSize),this._bTouch=!1,u.setPage(f)}else{var w=s&&this._bRTL?-n:n,S=s?"translate3d("+w+"px, 0, 0)":"translate3d(0, "+w+"px, 0)";$(m.filter(G),S)}this._scrolledForThisTouch=!0}this._scrolledForThisTouch&&(e.preventDefault(),e.stopPropagation())}else Math.abs(n)>a&&(this._initDragScroll(i),this._bDragInit=!0)}},_dragScrollEnd:function(){if(this._bTouch&&this._bDragInit){var e=this._pagingModel.getPage();this._handlePage({previousPage:e,page:e})}this._bTouch=!1,this._bDragInit=!1,this._scrolledForThisTouch=!1},_addBusyState:function(t){var i=this.element,s=e.Context.getContext(i[0]).getBusyContext(),n="FilmStrip";n+=" (id='"+i.attr("id")+"')";var r={description:n+=": "+t};return s.addBusyState(r)},_resolveBusyState:function(){this._busyStateResolveFunc&&(this._busyStateResolveFunc(),this._busyStateResolveFunc=null)},getNodeBySubId:function(e){if(null==e)return this.element?this.element[0]:null;var t=e.subId;return"oj-filmstrip-start-arrow"===t?this.widget().find(q+C+q+V).filter(this._filterNestedFilmStripsFunc)[0]:"oj-filmstrip-end-arrow"===t?this.widget().find(q+C+q+b).filter(this._filterNestedFilmStripsFunc)[0]:"oj-filmstrip-top-arrow"===t?this.widget().find(q+C+q+W).filter(this._filterNestedFilmStripsFunc)[0]:"oj-filmstrip-bottom-arrow"===t?this.widget().find(q+C+q+S).filter(this._filterNestedFilmStripsFunc)[0]:null},getSubIdByNode:function(e){for(var t=this.getNodeBySubId({subId:"oj-filmstrip-start-arrow"}),i=this.getNodeBySubId({subId:"oj-filmstrip-end-arrow"}),s=this.getNodeBySubId({subId:"oj-filmstrip-top-arrow"}),n=this.getNodeBySubId({subId:"oj-filmstrip-bottom-arrow"}),r=e,a=this.element[0];r&&r!=a;){if(r===t)return{subId:"oj-filmstrip-start-arrow"};if(r===i)return{subId:"oj-filmstrip-end-arrow"};if(r===s)return{subId:"oj-filmstrip-top-arrow"};if(r===n)return{subId:"oj-filmstrip-bottom-arrow"};r=r.parentElement}return null},_CompareOptionValues:function(t,i,s){return"currentItem"==t?e.Object.compareValues(i,s):this._super(t,i,s)}});var i="adjacent",s="aria-hidden",n="auto",r="display",a=3,o=.33,h=100,l="",u="JET FilmStrip: Value of 'currentItem' property not found: ",d="JET FilmStrip: Unsupported value set as 'orientation' property: ",c="Unsupported value set as 'arrowPlacement' property: ",g="Unsupported value set as 'arrowVisibility' property: ",p="flex-basis",_="hidden",m=":hidden",f="horizontal",v="hover",P="currentItem",w="none",S="oj-bottom",b="oj-end",C="oj-filmstrip-arrow",y="oj-filmstrip-arrow-container",F="oj-filmstrip-arrow-transition",z="oj-filmstrip-container",I="oj-filmstrip-hover",M="oj-filmstrip-item",T="oj-filmstrip-item-container",j="oj-filmstrip-page",N="oj-filmstrip-pages-container",E="oj-filmstrip-transition",x="oj-filmstrip-transition-next-newpage-from",A="oj-filmstrip-transition-next-oldpage-from",H="oj-filmstrip-transition-prev-newpage-from",R="oj-filmstrip-transition-prev-oldpage-from",D="oj-filmstrip-transition-next-newpage-to",k="oj-filmstrip-transition-next-oldpage-to",B="oj-filmstrip-transition-prev-newpage-to",L="oj-filmstrip-transition-prev-oldpage-to",U="oj-filmstrip-vertical",V="oj-start",W="oj-top",O="overlay",q=".",K="px",X=25,Y="vertical",J="visible",G=":visible",Q="-webkit-flex-basis",Z="JET FilmStrip: 'disabled' property not supported",$=function(e,t){e.css("-webkit-transform",t).css("-ms-transform",t).css("transform",t)},ee=function(e){e.css("-webkit-transform",l).css("-ms-transform",l).css("transform",l)},te=function(e){var i=t("<div></div>");return i.text(e),i[0].innerHTML}}(),e.CustomElementBridge.registerMetadata("oj-film-strip","baseComponent",{properties:{arrowPlacement:{type:"string",enumValues:["adjacent","overlay"]},arrowVisibility:{type:"string",enumValues:["visible","hidden","hover","auto"]},currentItem:{type:"object",writeback:!0,properties:{id:{type:"string"},index:{type:"number"}}},maxItemsPerPage:{type:"number"},orientation:{type:"string",enumValues:["horizontal","vertical"]},translations:{type:"Object",properties:{labelAccArrowNextPage:{type:"string",value:"Next Page"},labelAccArrowPreviousPage:{type:"string",value:"Previous Page"},tipArrowNextPage:{type:"string",value:"Next"},tipArrowPreviousPage:{type:"string",value:"Previous"}}}},methods:{getItemsPerPage:{},getPagingModel:{}},extension:{_WIDGET_NAME:"ojFilmStrip"}}),e.CustomElementBridge.register("oj-film-strip",{metadata:e.CustomElementBridge.getMetadata("oj-film-strip")})});