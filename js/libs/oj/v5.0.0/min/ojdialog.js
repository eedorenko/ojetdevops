/**
 * @license
 * Copyright (c) 2014, 2018, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";define(["ojs/ojcore","jquery","promise","ojs/ojcomponentcore","ojs/ojpopupcore","ojs/ojanimation","ojs/ojbutton","jqueryui-amd/widgets/draggable","jqueryui-amd/widgets/mouse"],function(e,t){var i,s,o;i="oj-dialog-body",s="oj-dialog-footer",o="oj-dialog-header",e.__registerWidget("oj.ojDialog",t.oj.baseComponent,{version:"1.0.0",widgetEventPrefix:"oj",options:{cancelBehavior:"icon",dragAffordance:"title-bar",initialVisibility:"hide",modality:"modal",position:{my:{horizontal:"center",vertical:"center"},offset:{x:0,y:0},at:{horizontal:"center",vertical:"center"},of:"window",collision:"fit",using:function(e){var i=t(this).css(e).offset().top;i<0&&t(this).css("top",e.top-i)}},resizeBehavior:"resizable",role:"dialog",title:null,beforeClose:null,beforeOpen:null,close:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null,animateStart:null,animateEnd:null},_ComponentCreate:function(){if(this._super(),this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this.element.removeAttr("title"),this.element.hide(),this.element.uniqueId(),this.element.addClass("oj-dialog oj-component"),this.element.attr({tabIndex:-1}),this._IsCustomElement()&&this.element[0].hasAttribute.role||this.element.attr("role",this.options.role),this._on(this.element,{keydown:this._keydownHandler.bind(this)}),this.userDefinedDialogHeader=!1,!this._IsCustomElement())for(var i=this.element.children(),s=0;s<i.length;s++){var o=t(i[s]);o.is(".oj-dialog-header")?(this.userDefinedDialogHeader=!0,this._userDefinedHeader=o,this._userDefinedHeaderDiv=i[s]):o.is(".oj-dialog-body")?(this._createContentDiv(),this._uiDialogContent=t(this._contentDiv),this.element[0].insertBefore(this._contentDiv,i[s]),e.Components.subtreeAttached(this._contentDiv),this._contentDiv.appendChild(i[s]),e.Components.subtreeAttached(i[s]),this._uiDialogBody=o,this._uiDialogBodyDiv=i[s]):o.is(".oj-dialog-footer")&&(this._uiDialogFooter=o,this._uiDialogFooterDiv=i[s])}this._IsCustomElement()&&this._processSlottedChildren(),this.userDefinedDialogHeader?(this._userDefinedTitleDiv=this._userDefinedHeaderDiv.querySelector(".oj-dialog-title"),this._userDefinedTitle=t(this._userDefinedTitleDiv),"icon"===this.options.cancelBehavior&&this._createCloseButton(this._userDefinedHeaderDiv),null!=this._userDefinedTitleDiv&&(this._userDefinedTitle.uniqueId(),this.element.attr({"aria-labelledby":this._userDefinedTitle.attr("id")}))):this._createTitlebar(),"title-bar"===this.options.dragAffordance&&t.fn.draggable&&this._makeDraggable(),this._uiDialogContent||(this._createContentDiv(),this._uiDialogContent=t(this._contentDiv),t(this._contentDiv),this._userDefinedHeader?this.element[0].insertBefore(this._contentDiv,this._userDefinedHeaderDiv):this._uiDialogTitlebar?this.element[0].insertBefore(this._contentDiv,this._uiDialogTitlebarDiv):this._uiDialogFooter?this.element[0].insertBefore(this._uiDialogFooterDiv,this._contentDiv):this.element[0].appendChild(this._contentDiv),e.Components.subtreeAttached(this._contentDiv)),this._setupFocus(this.element);var n=this.options;n.position=e.PositionUtils.coerceToJet(n.position)},_createHeaderSlot:function(){this._userDefinedHeader||(this._headerSlot=document.createElement("div"),this._headerSlot.classList.add(o),this.element[0].appendChild(this._headerSlot),e.Components.subtreeAttached(this._headerSlot),this.userDefinedDialogHeader=!0,this._userDefinedHeaderDiv=this._headerSlot,this._userDefinedHeader=t(this._headerSlot))},_createFooterSlot:function(){this._uiDialogFooter||(this._footerSlot=document.createElement("div"),this.element[0].appendChild(this._footerSlot),e.Components.subtreeAttached(this._footerSlot),this._uiDialogFooterDiv=this._footerSlot,this._uiDialogFooter=t(this._footerSlot))},_createContentDiv:function(){this._contentDiv=document.createElement("div"),this._contentDiv.classList.add("oj-dialog-content","oj-dialog-default-content")},_createBodySlot:function(){this._uiDialogBody||(this._createContentDiv(),this.element[0].appendChild(this._contentDiv),e.Components.subtreeAttached(this._contentDiv),this._bodySlot=document.createElement("div"),this._contentDiv.appendChild(this._bodySlot),this._uiDialogContent=t(this._contentDiv),this._uiDialogBodyDiv=this._bodySlot,this._uiDialogBody=t(this._bodySlot))},_processSlottedChildren:function(){null!=this._footerSlot&&this.element[0].removeChild(this._footerSlot),null!=this._headerSlot&&this.element[0].removeChild(this._headerSlot),null!=this._bodySlot&&this.element[0].removeChild(this._bodySlot);var t=e.BaseCustomElementBridge.getSlotMap(this.element[0]);for(var o in t)t.hasOwnProperty(o)&&"header"!=o&&"footer"!=o&&"body"!=o&&""!=o&&t[o].parentNode.removeChild(t[o]);t.hasOwnProperty("header")&&this._createHeaderSlot(),(t.hasOwnProperty("body")||t.hasOwnProperty(""))&&this._createBodySlot(),t.hasOwnProperty("footer")&&this._createFooterSlot();var n=this._bodySlot;for(var o in t)if(t.hasOwnProperty(o)){switch(o){case"header":n=this._headerSlot;break;case"footer":n=this._footerSlot;break;case"body":case"":n=this._bodySlot}var r=t[o];if(null!=r)for(var a=0;a<r.length;a++)switch(n.appendChild(r[a]),o){case"header":break;case"footer":n=this._footerSlot,t[o][a].classList.add(s);break;case"body":case"":n=this._bodySlot,t[o][a].classList.add(i)}}},_AfterCreateEvent:function(){"show"===this.options.initialVisibility&&this.open()},_destroy:function(){this._off(this.element,"keydown"),e.ZOrderUtils.getStatus(this.element)===e.ZOrderUtils.STATUS.OPEN&&this._closeImplicitly(),this._setWhenReady("none"),this.element.hasClass("oj-draggable"),this._resizableComponent&&(this._resizableComponent("instance")&&this._resizableComponent("destroy"),this._resizableComponent=null),this._destroyCloseButton(),this.userDefinedDialogHeader&&this._userDefinedTitle.removeUniqueId(),this.uiDialogTitle&&(this.uiDialogTitle.remove(),this.uiDialogTitle=null),this._uiDialogContent&&(this._uiDialogBody&&this._uiDialogBody.insertAfter(this._uiDialogContent),this._uiDialogContent.remove(),this._uiDialogBody=this._uiDialogContent=null),this.element.removeUniqueId().removeClass("oj-dialog oj-component").css(this.originalCss),this.element.stop(!0,!0),this.originalTitle&&this.element.attr("title",this.originalTitle),this._uiDialogTitlebar&&(this._uiDialogTitlebar.remove(),this._uiDialogTitlebar=null),delete this._popupServiceEvents,this._super()},disable:t.noop,enable:t.noop,close:function(i){if(!this._isOperationPending("close",[i])&&e.ZOrderUtils.getStatus(this.element)===e.ZOrderUtils.STATUS.OPEN&&(!1!==this._trigger("beforeClose",i)||this._ignoreBeforeCloseResultant)){if(this._setWhenReady("close"),this._focusedElement=null,this.opener.filter(":focusable").focus().length||t(this.document[0].activeElement).blur(),"modal"===this.options.modality){var s=Array.prototype.forEach,o=this.element[0].getElementsByClassName("oj-helper-element-in-dialog-with-accesskey");s.call(o,function(e){e.classList.remove("oj-helper-element-in-dialog-with-accesskey")});var n=document.getElementsByClassName("oj-helper-element-with-accesskey");s.call(n,function(e){e.setAttribute("accesskey",e.getAttribute("data-ojAccessKey")),e.removeAttribute("data-ojAccessKey"),e.classList.remove("oj-helper-element-with-accesskey")})}var r={};r[e.PopupService.OPTION.POPUP]=this.element,r[e.PopupService.OPTION.CONTEXT]={closeEvent:i},e.PopupService.getInstance().close(r)}},_beforeCloseHandler:function(t){var i=t[e.PopupService.OPTION.POPUP],s=(e.ThemeUtils.parseJSONFromFontFamily("oj-dialog-option-defaults")||{}).animation;if(!this._ignoreBeforeCloseResultant&&s&&s.close){var o=i.attr("style");return e.AnimationUtils.startAnimation(i[0],"close",s.close,this).then(function(){i.attr("style",o),i.hide()})}i.hide()},_afterCloseHandler:function(t){var i,s=t[e.PopupService.OPTION.CONTEXT];s&&(i=s.closeEvent),this._trigger("close",i)},isOpen:function(){var t=e.ZOrderUtils.getStatus(this.element);return t===e.ZOrderUtils.STATUS.OPENING||t===e.ZOrderUtils.STATUS.OPEN||t===e.ZOrderUtils.STATUS.CLOSING},open:function(i){if(!this._isOperationPending("open",[i])&&!1!==this._trigger("beforeOpen",i))if(e.ZOrderUtils.getStatus(this.element)!==e.ZOrderUtils.STATUS.OPEN){this._setWhenReady("open"),this.opener=t(this.document[0].activeElement),"resizable"===this.options.resizeBehavior&&this._makeResizable();var s="rtl"===this._GetReadingDirection(),o=e.PositionUtils.coerceToJqUi(this.options.position);if(o=e.PositionUtils.normalizeHorizontalAlignment(o,s),"modal"===this.options.modality){var n=Array.prototype.forEach,r=this.element[0].querySelectorAll("[accesskey]");n.call(r,function(e){e.classList.add("oj-helper-element-in-dialog-with-accesskey")});var a=document.querySelectorAll("[accesskey]");n.call(a,function(e){e.classList.contains("oj-helper-element-in-dialog-with-accesskey")||(e.classList.add("oj-helper-element-with-accesskey"),e.setAttribute("data-ojAccessKey",e.getAttribute("accesskey")),e.removeAttribute("accesskey"))})}var l={};l[e.PopupService.OPTION.POPUP]=this.element,l[e.PopupService.OPTION.LAUNCHER]=this.opener,l[e.PopupService.OPTION.POSITION]=o,l[e.PopupService.OPTION.MODALITY]=this.options.modality,l[e.PopupService.OPTION.EVENTS]=this._getPopupServiceEvents(),l[e.PopupService.OPTION.LAYER_SELECTORS]="oj-dialog-layer",l[e.PopupService.OPTION.LAYER_LEVEL]=e.PopupService.LAYER_LEVEL.TOP_LEVEL,l[e.PopupService.OPTION.CUSTOM_ELEMENT]=this._IsCustomElement(),e.PopupService.getInstance().open(l)}else this._focusTabbable()},_beforeOpenHandler:function(t){var i=t[e.PopupService.OPTION.POPUP],s=t[e.PopupService.OPTION.POSITION];i.show(),i.position(s),i.parent().addClass("oj-animate-open");var o=(e.ThemeUtils.parseJSONFromFontFamily("oj-dialog-option-defaults")||{}).animation;return o&&o.open?e.AnimationUtils.startAnimation(i[0],"open",o.open,this):void 0},_afterOpenHandler:function(t){t[e.PopupService.OPTION.POPUP].parent().removeClass("oj-animate-open"),this._trigger("open"),this._focusTabbable()},refresh:function(){this._super()},_focusTabbable:function(){var t=this._focusedElement;t&&t.length>0&&e.DomUtils.isAncestorOrSelf(this.element[0],t[0])||(t||(t=this.element.find("[autofocus]")),t.length||(t=this._uiDialogContent.find(":tabbable")),t.length||this._uiDialogFooter&&this._uiDialogFooter.length&&(t=this._uiDialogFooter.find(":tabbable")),t.length||this.closeButton&&(t=this.closeButton.filter(":focusable")),t.length||(t=this.element),t.length>0&&(t.eq(0).focus(),this._trigger("focus")))},_keepFocus:function(e){e.preventDefault(),function(){var e=this.document[0].activeElement;this.element===e||t.contains(this.element,e)||this._focusTabbable()}.call(this)},_isNumber:function(e){return!isNaN(parseInt(e,10))},_keydownHandler:function(e){if("none"!==this.options.cancelBehavior&&!e.isDefaultPrevented()&&e.keyCode&&e.keyCode===t.ui.keyCode.ESCAPE)return e.preventDefault(),e.stopImmediatePropagation(),void this.close(e);if(e.keyCode===t.ui.keyCode.TAB){var i=this.element.find(":tabbable"),s=i.filter(":first"),o=i.filter(":last");e.shiftKey?e.shiftKey&&(document.activeElement===s[0]||document.activeElement===this.element[0]?(o.focus(),e.preventDefault()):1===i.index(document.activeElement)&&i[0]&&(i[0].focus(),e.preventDefault())):document.activeElement===o[0]||document.activeElement===this.element[0]?(s.focus(),e.preventDefault()):0===i.index(document.activeElement)&&i[1]&&(i[1].focus(),e.preventDefault())}},_setupFocus:function(e){var i=this;this._focusable({applyHighlight:!0,setupHandlers:function(s,o){i._on(e,{focus:function(e){s(t(e.currentTarget))},blur:function(e){o(t(e.currentTarget))}})}})},_destroyCloseButton:function(){null!=this.closeButtonDiv&&(this.closeButtonDiv.parentElement&&(e.Components.subtreeDetached(this.closeButtonDiv),this.closeButtonDiv.parentElement.removeChild(this.closeButtonDiv)),this.closeButton=null),this._headerSlot&&this._headerSlot.classList.remove("oj-dialog-header-close"),this._uiDialogTitlebarDiv&&this._uiDialogTitlebarDiv.classList.remove("oj-dialog-header-close")},_createCloseButton:function(i){if(this._IsCustomElement()){this.closeButtonDiv=document.createElement("oj-button"),this.closeButtonDiv.classList.add("oj-dialog-header-close-wrapper"),this.closeButtonDiv.setAttribute("data-oj-binding-provider","none"),this.closeButtonDiv.setAttribute("display","icons"),this.closeButtonDiv.setAttribute("chroming","half");var s=document.createElement("span");s.textContent=this.getTranslatedString("labelCloseIcon");var o=document.createElement("span");o.className="oj-fwk-icon oj-fwk-icon-cross",o.setAttribute("slot","startIcon"),this.closeButtonDiv.appendChild(o),this.closeButtonDiv.appendChild(s),i.appendChild(this.closeButtonDiv),e.Components.subtreeAttached(this.closeButtonDiv),this.closeButton=t(this.closeButtonDiv)}this._IsCustomElement()||(this.closeButton=t("<button><\button>").addClass("oj-dialog-header-close-wrapper"),this.closeButton.ojButton({display:"icons",chroming:"half",label:this.getTranslatedString("labelCloseIcon"),icons:{start:"oj-component-icon oj-fwk-icon-cross"}}).attr("tabindex","1").appendTo(i),this.closeButtonDiv=this.closeButton[0]),this._on(this.closeButton,{click:function(e){e.preventDefault(),e.stopImmediatePropagation(),this.close(e)}}),this._headerSlot&&this._headerSlot.classList.add("oj-dialog-header-close"),this._uiDialogTitlebarDiv&&this._uiDialogTitlebarDiv.classList.add("oj-dialog-header-close")},_createTitlebar:function(){this._uiDialogTitlebarDiv=document.createElement("div"),this._uiDialogTitlebarDiv.classList.add(o),this.element[0].insertBefore(this._uiDialogTitlebarDiv,this.element[0].firstChild),e.Components.subtreeAttached(this._uiDialogTitlebarDiv),this._uiDialogTitlebar=t(this._uiDialogTitlebarDiv),this._on(this._uiDialogTitlebar,{mousedown:function(t){e.DomUtils.isAncestorOrSelf(this.closeButtonDiv,t.target)||this.element.focus()}});var i=document.createElement("div");i.classList.add("oj-dialog-title"),t(i).uniqueId(),this._uiDialogTitlebarDiv.appendChild(i),e.Components.subtreeAttached(i),this._title(i),this.element.attr({"aria-labelledby":i.id}),"icon"===this.options.cancelBehavior&&this._createCloseButton(this._uiDialogTitlebarDiv)},_title:function(e){this.options.title||(e.innerHTML="&#160;"),e.textContent=this.options.title},_makeDraggable:function(){var e=this,i=this.options;function s(e){return{position:e.position,offset:e.offset}}this.element.draggable({addClasses:!1,handle:".oj-dialog-header",containment:"document",start:function(i,o){t(this).addClass("oj-dialog-dragging"),e._positionDescendents(),e._trigger("dragStart",i,s(o))},drag:function(t,i){e._positionDescendents(),e._trigger("drag",t,s(i))},stop:function(o,n){var r=n.offset.left-e.document.scrollLeft(),a=n.offset.top-e.document.scrollTop();i.position={my:{horizontal:"left",vertical:"top"},at:{horizontal:"left",vertical:"top"},offset:{x:r>=0?r:0,y:a>=0?a:0},of:window},t(this).removeClass("oj-dialog-dragging"),e._positionDescendents(),e._trigger("dragStop",o,s(n))}}),this.element.addClass("oj-draggable")},_makeResizable:function(){var e=this;function i(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}this.options,this.element.css("position"),this._resizableComponent=this.element.ojResizable.bind(this.element),this._resizableComponent({cancel:".oj-dialog-content",containment:"document",handles:"n,e,s,w,se,sw,ne,nw",start:function(s,o){e._isResizing=!0,t(this).addClass("oj-dialog-resizing"),e._trigger("resizeStart",s,i(o))},resize:function(t,s){e._trigger("resize",t,i(s))},stop:function(s,o){e._isResizing=!1,t(this).removeClass("oj-dialog-resizing"),e._trigger("resizeStop",s,i(o))}})},_position:function(){var t="rtl"===this._GetReadingDirection(),i=e.PositionUtils.coerceToJqUi(this.options.position);i=e.PositionUtils.normalizeHorizontalAlignment(i,t),this.element.position(i),this._positionDescendents()},_positionDescendents:function(){e.PopupService.getInstance().triggerOnDescendents(this.element,e.PopupService.EVENT.POPUP_REFRESH)},_setOption:function(i,s,o){var n,r;if("disabled"!==i)switch(this._super(i,s,o),i){case"dragAffordance":(n=this.element.hasClass("oj-draggable"))&&"none"===s&&(this.element.draggable("destroy"),this.element.removeClass("oj-draggable")),n||"title-bar"!==s||this._makeDraggable();break;case"position":var a=this.options;return a.position=e.PositionUtils.coerceToJet(s,a.position),void this._position();case"resizeBehavior":r=!1,this._resizableComponent&&(r=!0),r&&"resizable"!==s&&(this._resizableComponent("instance")&&this._resizableComponent("destroy"),this._resizableComponent=null),r||"resizable"!==s||this._makeResizable();break;case"title":this.userDefinedDialogHeader?this._title(this._userDefinedHeaderDiv.querySelector(".oj-dialog-title")):this._title(this._uiDialogTitlebarDiv.querySelector(".oj-dialog-title"));break;case"role":this.element.attr("role",s);break;case"modality":if(e.ZOrderUtils.getStatus(this.element)===e.ZOrderUtils.STATUS.OPEN){var l={};l[e.PopupService.OPTION.POPUP]=this.element,l[e.PopupService.OPTION.MODALITY]=s,e.PopupService.getInstance().changeOptions(l)}break;case"cancelBehavior":"none"===s||"escape"===s?this._destroyCloseButton():"icon"===s&&(this.userDefinedDialogHeader?(this._destroyCloseButton(),this._createCloseButton(this._userDefinedHeaderDiv),this._userDefinedTitleDiv=this._userDefinedHeaderDiv.querySelector(".oj-dialog-title"),this._userDefinedTitle=t(this._userDefinedTitleDiv)):(this._destroyCloseButton(),this._createCloseButton(this._uiDialogTitlebarDiv),this.standardTitleDiv=this._uiDialogTitlebarDiv.querySelector(".oj-dialog-title"),this.standardTitle=t(this.standardTitleDiv)))}},getNodeBySubId:function(e){if(null===e)return this.element?this.element[0]:null;function t(e){for(var t=[],i=/\w|_|-/,s=0;s<e.length;s++){var o=e.substring(s,s+1);i.test(o)?t.push(o):t.push("\\"+o)}return t.join("")}var n=e.subId;if(!this._IsCustomElement()||n!==s&&n!==i)switch(n){case o:case s:case"oj-dialog-content":case"oj-resizable-n":case"oj-resizable-e":case"oj-resizable-s":case"oj-resizable-w":case"oj-resizable-se":case"oj-resizable-sw":case"oj-resizable-ne":case"oj-resizable-nw":var r=this.element[0].nodeName+'[id="'+t(this.element.attr("id"))+'"] > ';return r+="."+n,(a=this.element.parent().find(r))&&0!==a.length?a[0]:null;case"oj-dialog-close-icon":case"oj-dialog-close":return null;case i:return r=this.element[0].nodeName+'[id="'+t(this.element.attr("id"))+'"] > ',r+=".oj-dialog-content > ",r+="."+n,(a=this.element.parent().find(r))&&0!==a.length?a[0]:null;case"oj-dialog-header-close-wrapper":var a;return r=this.element[0].nodeName+'[id="'+t(this.element.attr("id"))+'"] > ',r+=".oj-dialog-header > ",r+="."+n,(a=this.element.parent().find(r))&&0!==a.length?a[0]:null}else{if(n===i)return this._uiDialogBodyDiv.querySelector(".oj-dialog-body");if(n===s)return this._uiDialogFooterDiv.querySelector(".oj-dialog-footer")}return null},getSubIdByNode:function(e){if(null!=e){var i=t(e);if(i.hasClass(o))return{subId:o};if(i.hasClass(s))return{subId:s};if(i.hasClass("oj-dialog-content"))return{subId:"oj-dialog-content"};if(i.hasClass("oj-dialog-header-close-wrapper"))return{subId:"oj-dialog-header-close-wrapper"};if(i.hasClass("oj-resizable-n"))return{subId:"oj-resizable-n"};if(i.hasClass("oj-resizable-e"))return{subId:"oj-resizable-e"};if(i.hasClass("oj-resizable-s"))return{subId:"oj-resizable-s"};if(i.hasClass("oj-resizable-w"))return{subId:"oj-resizable-w"};if(i.hasClass("oj-resizable-se"))return{subId:"oj-resizable-se"};if(i.hasClass("oj-resizable-sw"))return{subId:"oj-resizable-sw"};if(i.hasClass("oj-resizable-ne"))return{subId:"oj-resizable-ne"};if(i.hasClass("oj-resizable-nw"))return{subId:"oj-resizable-nw"}}return null},_surrogateRemoveHandler:function(){this.element.remove()},_getPopupServiceEvents:function(){if(!this._popupServiceEvents){var t=this._popupServiceEvents={};t[e.PopupService.EVENT.POPUP_CLOSE]=this._closeImplicitly.bind(this),t[e.PopupService.EVENT.POPUP_REMOVE]=this._surrogateRemoveHandler.bind(this),t[e.PopupService.EVENT.POPUP_REFRESH]=this._positionDescendents.bind(this),t[e.PopupService.EVENT.POPUP_BEFORE_OPEN]=this._beforeOpenHandler.bind(this),t[e.PopupService.EVENT.POPUP_AFTER_OPEN]=this._afterOpenHandler.bind(this),t[e.PopupService.EVENT.POPUP_BEFORE_CLOSE]=this._beforeCloseHandler.bind(this),t[e.PopupService.EVENT.POPUP_AFTER_CLOSE]=this._afterCloseHandler.bind(this)}return this._popupServiceEvents},_closeImplicitly:function(){this._ignoreBeforeCloseResultant=!0,this.close(),delete this._ignoreBeforeCloseResultant},_setWhenReady:function(t){var i=this._whenReadyMediator;i&&(i.destroy(),delete this._whenReadyMediator),["open","close"].indexOf(t)<0||(this._whenReadyMediator=new e.PopupWhenReadyMediator(this.element,t,"ojDialog",this._IsCustomElement()))},_isOperationPending:function(e,t){var i=this._whenReadyMediator;return!!i&&i.isOperationPending(this,e,e,t)},_NotifyDetached:function(){e.ZOrderUtils.getStatus(this.element)===e.ZOrderUtils.STATUS.OPEN&&this._closeImplicitly(),this._super()}}),e.Components.setDefaultOptions({ojDialog:{resizeBehavior:e.Components.createDynamicPropertyGetter(function(){return(e.ThemeUtils.parseJSONFromFontFamily("oj-dialog-option-defaults")||{}).resizeBehavior}),cancelBehavior:e.Components.createDynamicPropertyGetter(function(){return(e.ThemeUtils.parseJSONFromFontFamily("oj-dialog-option-defaults")||{}).cancelBehavior}),dragAffordance:e.Components.createDynamicPropertyGetter(function(){return(e.ThemeUtils.parseJSONFromFontFamily("oj-dialog-option-defaults")||{}).dragAffordance})}}),t.widget("oj.ojResizable",{version:"1.0.0",widgetEventPrefix:"oj",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,resize:null,start:null,stop:null},_num:function(e){return parseInt(e,10)||0},_isNumber:function(e){return!isNaN(parseInt(e,10))},_hasScroll:function(e,i){if("hidden"===t(e).css("overflow"))return!1;var s,o=i&&"left"===i?"scrollLeft":"scrollTop";return e[o]>0||(e[o]=1,s=e[o]>0,e[o]=0,s)},_create:function(){this._super();var e,i,s,o,n=this,r=this.options,a=this.element.mouse.bind(this.element);if(a(),this.mouse=a("instance"),this.mouse._mouseCapture=function(e){return n._mouseCapture(e)},this.mouse._mouseStart=function(e){return n._mouseStart(e)},this.mouse._mouseDrag=function(e){return n._mouseDrag(e)},this.mouse._mouseStop=function(e){return this.element&&this.element.focus(),n._mouseStop(e)},this.element.addClass("oj-resizable"),t.extend(this,{originalElement:this.element,_proportionallyResizeElements:[],_helper:null}),this._initialResize=!0,this.handles=r.handles||(t(".oj-resizable-handle",this.element).length?{n:".oj-resizable-n",e:".oj-resizable-e",s:".oj-resizable-s",w:".oj-resizable-w",se:".oj-resizable-se",sw:".oj-resizable-sw",ne:".oj-resizable-ne",nw:".oj-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),e=this.handles.split(","),this.handles={},i=0;i<e.length;i++)s=t.trim(e[i]),o=t("<div class='oj-resizable-handle oj-resizable-"+s+"'></div>"),this.handles[s]=".oj-resizable-"+s,this.element.append(o);this._renderAxis=function(e){var t;for(t in e=e||this.element,this.handles)this.handles[t].constructor===String&&(this.handles[t]=this.element.children(this.handles[t]).first().show())},this._renderAxis(this.element),this._handles=t(".oj-resizable-handle",this.element),this._handles.mouseover(function(){n.resizing||(this.className&&(o=this.className.match(/oj-resizable-(se|sw|ne|nw|n|e|s|w)/i)),n.axis=o&&o[1]?o[1]:"se")}),this.mouse._mouseInit()},_destroy:function(){this.mouse&&this.mouse._mouseDestroy();try{this.mouse.destroy(),this.mouse=null}catch(e){}var e;return e=this.originalElement,t(e).removeClass("oj-resizable oj-resizable-disabled oj-resizable-resizing").removeData("resizable").removeData("oj-resizable").unbind(".resizable").find(".oj-resizable-handle").remove(),this},_mouseCapture:function(e){var i,s,o=!1;for(i in this.handles)((s=t(this.handles[i])[0])===e.target||t.contains(s,e.target))&&(o=!0);return!this.options.disabled&&o},_mouseStart:function(e){var i,s,o,n=this.options,r=this.element.position(),a=this.element;return this.resizing=!0,/absolute/.test(a.css("position"))?a.css({position:"absolute",top:a.css("top"),left:a.css("left")}):a.is(".oj-draggable")&&a.css({position:"absolute",top:r.top,left:r.left}),this._renderProxy(),i=this._num(this.helper.css("left")),s=this._num(this.helper.css("top")),n.containment&&(i+=t(n.containment).scrollLeft()||0,s+=t(n.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:i,top:s},this.size={width:a.width(),height:a.height()},this.originalSize={width:a.width(),height:a.height()},this.originalPosition={left:i,top:s},this.sizeDiff={width:a.outerWidth()-a.width(),height:a.outerHeight()-a.height()},this.originalMousePosition={left:e.pageX,top:e.pageY},this.aspectRatio=this.originalSize.width/this.originalSize.height||1,o=t(".oj-resizable-"+this.axis).css("cursor"),t("body").css("cursor","auto"===o?this.axis+"-resize":o),a.addClass("oj-resizable-resizing"),this._propagate("start",e),this._alsoresize_start(e),this._containment_start(e),!0},_mouseDrag:function(e){var i,s=this.helper,o={},n=this.originalMousePosition,r=this.axis,a=e.pageX-n.left||0,l=e.pageY-n.top||0,h=this._change[r];return this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height},!!h&&(i=h.apply(this,[e,a,l]),this._updateVirtualBoundaries(e.shiftKey),e.shiftKey&&(i=this._updateRatio(i,e)),i=this._respectSize(i,e),this._updateCache(i),this._propagate("resize",e),this._alsoresize_resize(e,this.ui()),this._containment_resize(e,this.ui()),this.position.top!==this.prevPosition.top&&(o.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(o.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(o.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(o.height=this.size.height+"px"),s.css(o),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),t.isEmptyObject(o)||this._trigger("resize",e,this.ui()),!1)},_mouseStop:function(e){return this.resizing=!1,t("body").css("cursor","auto"),this.element.removeClass("oj-resizable-resizing"),this._propagate("stop",e),this._alsoresize_stop(e),this._containment_stop(e),!1},_updateVirtualBoundaries:function(e){var t,i,s,o,n,r=this.options;n={minWidth:this._isNumber(r.minWidth)?r.minWidth:0,maxWidth:this._isNumber(r.maxWidth)?r.maxWidth:1/0,minHeight:this._isNumber(r.minHeight)?r.minHeight:0,maxHeight:this._isNumber(r.maxHeight)?r.maxHeight:1/0},e&&(t=n.minHeight*this.aspectRatio,s=n.minWidth/this.aspectRatio,i=n.maxHeight*this.aspectRatio,o=n.maxWidth/this.aspectRatio,t>n.minWidth&&(n.minWidth=t),s>n.minHeight&&(n.minHeight=s),i<n.maxWidth&&(n.maxWidth=i),o<n.maxHeight&&(n.maxHeight=o)),this._vBoundaries=n},_updateCache:function(e){this.offset=this.helper.offset(),this._isNumber(e.left)&&(this.position.left=e.left),this._isNumber(e.top)&&(this.position.top=e.top),this._isNumber(e.height)&&(this.size.height=e.height),this._isNumber(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,i=this.size,s=this.axis;return this._isNumber(e.height)?e.width=e.height*this.aspectRatio:this._isNumber(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===s&&(e.left=t.left+(i.width-e.width),e.top=null),"nw"===s&&(e.top=t.top+(i.height-e.height),e.left=t.left+(i.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,i=this.axis,s=this._isNumber(e.width)&&t.maxWidth&&t.maxWidth<e.width,o=this._isNumber(e.height)&&t.maxHeight&&t.maxHeight<e.height,n=this._isNumber(e.width)&&t.minWidth&&t.minWidth>e.width,r=this._isNumber(e.height)&&t.minHeight&&t.minHeight>e.height,a=this.originalPosition.left+this.originalSize.width,l=this.position.top+this.size.height,h=/sw|nw|w/.test(i),d=/nw|ne|n/.test(i);return n&&(e.width=t.minWidth),r&&(e.height=t.minHeight),s&&(e.width=t.maxWidth),o&&(e.height=t.maxHeight),n&&h&&(e.left=a-t.minWidth),s&&h&&(e.left=a-t.maxWidth),r&&d&&(e.top=l-t.minHeight),o&&d&&(e.top=l-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var e,t,i,s,o,n=this.helper||this.element;for(e=0;e<this._proportionallyResizeElements.length;e++){if(o=this._proportionallyResizeElements[e],!this.borderDif)for(this.borderDif=[],i=[o.css("borderTopWidth"),o.css("borderRightWidth"),o.css("borderBottomWidth"),o.css("borderLeftWidth")],s=[o.css("paddingTop"),o.css("paddingRight"),o.css("paddingBottom"),o.css("paddingLeft")],t=0;t<i.length;t++)this.borderDif[t]=(parseInt(i[t],10)||0)+(parseInt(s[t],10)||0);o.css({height:n.height()-this.borderDif[0]-this.borderDif[2]||0,width:n.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var e=this.element;this.options,this.elementOffset=e.offset(),this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var i=this.originalSize;return{left:this.originalPosition.left+t,width:i.width-t}},n:function(e,t,i){var s=this.originalSize;return{top:this.originalPosition.top+i,height:s.height-i}},s:function(e,t,i){return{height:this.originalSize.height+i}},se:function(e,i,s){return t.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,i,s]))},sw:function(e,i,s){return t.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,i,s]))},ne:function(e,i,s){return t.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,i,s]))},nw:function(e,i,s){return t.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,i,s]))}},_propagate:function(e,t){"resize"!==e&&this._trigger(e,t,this.ui())},_alsoresize_start:function(){var e=this.options,i=function(e){t(e).each(function(){var e=t(this);e.data("oj-resizable-alsoresize",{width:parseInt(e.width(),10),height:parseInt(e.height(),10),left:parseInt(e.css("left"),10),top:parseInt(e.css("top"),10)})})};"object"!=typeof e.alsoResize||e.alsoResize.parentNode?i(e.alsoResize):e.alsoResize.length?(e.alsoResize=e.alsoResize[0],i(e.alsoResize)):t.each(e.alsoResize,function(e){i(e)})},_alsoresize_resize:function(e,i){var s=this.options,o=this.originalSize,n=this.originalPosition,r={height:this.size.height-o.height||0,width:this.size.width-o.width||0,top:this.position.top-n.top||0,left:this.position.left-n.left||0},a=function(e,s){t(e).each(function(){var e=t(this),o=t(this).data("oj-resizable-alsoresize"),n={},a=s&&s.length?s:e.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];t.each(a,function(e,t){var i=(o[t]||0)+(r[t]||0);i&&i>=0&&(n[t]=i||null)}),e.css(n)})};"object"!=typeof s.alsoResize||s.alsoResize.nodeType?a(s.alsoResize,null):t.each(s.alsoResize,function(e,t){a(e,t)})},_alsoresize_stop:function(){t(this).removeData("oj-resizable-alsoresize")},_containment_start:function(){var e,i,s,o,n,r,a,l=this,h=l.options,d=l.element,c=h.containment,u=c instanceof t?c.get(0):/parent/.test(c)?d.parent().get(0):c;u&&(l.containerElement=t(u),/document/.test(c)||c===document?(l.containerOffset={left:0,top:0},l.containerPosition={left:0,top:0},l.parentData={element:t(document),left:0,top:0,width:t(document).width(),height:t(document).height()||document.body.parentNode.scrollHeight}):(e=t(u),i=[],t(["Top","Right","Left","Bottom"]).each(function(t,s){i[t]=l._num(e.css("padding"+s))}),l.containerOffset=e.offset(),l.containerPosition=e.position(),l.containerSize={height:e.innerHeight()-i[3],width:e.innerWidth()-i[1]},s=l.containerOffset,o=l.containerSize.height,n=l.containerSize.width,r=l._hasScroll(u,"left")?u.scrollWidth:n,a=l._hasScroll(u)?u.scrollHeight:o,l.parentData={element:u,left:s.left,top:s.top,width:r,height:a}))},_containment_resize:function(e,t){var i,s,o,n,r=this.options,a=this.containerOffset,l=this.position,h=e.shiftKey,d={top:0,left:0},c=this.containerElement,u=!0;c[0]!==document&&/static/.test(c.css("position"))&&(d=a),l.left<(this._helper?a.left:0)&&(this.size.width=this.size.width+(this._helper?this.position.left-a.left:this.position.left-d.left),h&&(this.size.height=this.size.width/this.aspectRatio,u=!1),this.position.left=r.helper?a.left:0),l.top<(this._helper?a.top:0)&&(this.size.height=this.size.height+(this._helper?this.position.top-a.top:this.position.top),h&&(this.size.width=this.size.height*this.aspectRatio,u=!1),this.position.top=this._helper?a.top:0),this.offset.left=this.parentData.left+this.position.left,this.offset.top=this.parentData.top+this.position.top,i=Math.abs((this._helper?this.offset.left-d.left:this.offset.left-a.left)+this.sizeDiff.width),s=Math.abs((this._helper?this.offset.top-d.top:this.offset.top-a.top)+this.sizeDiff.height),o=this.containerElement.get(0)===this.element.parent().get(0),n=/relative|absolute/.test(this.containerElement.css("position")),o&&n&&(i-=Math.abs(this.parentData.left)),i+this.size.width>=this.parentData.width&&(this.size.width=this.parentData.width-i,h&&(this.size.height=this.size.width/this.aspectRatio,u=!1)),s+this.size.height>=this.parentData.height&&(this.size.height=this.parentData.height-s,h&&(this.size.width=this.size.height*this.aspectRatio,u=!1)),u||(this.position.left=t.prevPosition.left,this.position.top=t.prevPosition.top,this.size.width=t.prevSize.width,this.size.height=t.prevSize.height)},_containment_stop:function(){var e=this.options,i=this.containerOffset,s=this.containerPosition,o=this.containerElement,n=t(this.helper),r=n.offset(),a=n.outerWidth()-this.sizeDiff.width,l=n.outerHeight()-this.sizeDiff.height;this._helper&&!e.animate&&/relative/.test(o.css("position"))&&t(this).css({left:r.left-s.left-i.left,width:a,height:l}),this._helper&&!e.animate&&/static/.test(o.css("position"))&&t(this).css({left:r.left-s.left-i.left,width:a,height:l})},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition,prevSize:this.prevSize,prevPosition:this.prevPosition}}}),e.CustomElementBridge.registerMetadata("oj-dialog","baseComponent",{properties:{cancelBehavior:{type:"string",enumValues:["icon","escape","none"]},dragAffordance:{type:"string",enumValues:["title-bar","none"]},initialVisibility:{type:"string",enumValues:["hide","show"]},modality:{type:"string",enumValues:["modal","modeless"]},position:{type:"object",properties:{my:{type:"object|string",properties:{horizontal:{type:"string",enumValues:["start","end","left","center","right"]},vertical:{type:"string",enumValues:["top","center","bottom"]}}},at:{type:"object|string",properties:{horizontal:{type:"string",enumValues:["start","end","left","center","right"]},vertical:{type:"string",enumValues:["top","center","bottom"]}}},offset:{type:"object",properties:{x:{type:"number"},y:{type:"number"}}},of:{type:"string|{x:number, y:number}"},collision:{type:"string",enumValues:["flip","fit","flipfit","none"]}}},resizeBehavior:{type:"string",enumValues:["resizable","none"]},translations:{type:"Object",properties:{labelCloseIcon:{type:"string",value:"Close"}}}},events:{animateEnd:{},animateStart:{},beforeClose:{},beforeOpen:{},close:{},open:{},focus:{},resize:{},resizeStart:{},resizeStop:{},drag:{},dragStart:{},dragStop:{}},methods:{close:{},isOpen:{},open:{},refresh:{}},extension:{_WIDGET_NAME:"ojDialog"}}),e.CustomElementBridge.register("oj-dialog",{metadata:e.CustomElementBridge.getMetadata("oj-dialog")})});